<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.74.3" />
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="canonical" href="https://text.baldanders.info/remark/2018/02/go-1_8_7-and-1_9_4-are-released/">
<script src="//kit.fontawesome.com/152e339e63.js"></script><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Inconsolata%3a500,700%7cNoto+Sans+JP%3a500,700%7cNoto+Sans%3a500,700%7cNoto+Serif%7cNoto+Serif+JP&display=swap" type='text/css'>
<link rel="stylesheet" href="/css/local-font-dark.css" type='text/css'>
<link rel="stylesheet" href="/css/baldanders-info-dark.css" type='text/css'>

<link rel="alternate" href="https://text.baldanders.info/index.xml" type="application/rss+xml" title="text.Baldanders.info">
<link rel="alternate" href="https://text.baldanders.info/index.json" type="application/json" title="text.Baldanders.info">
<meta name="google-site-verification" content="jTjBCslPtf8gwVatiY-GDgGv7pV5csa8aUOw1MRPUD4">
<title>Go 1.8.7 および 1.9.4 がリリース（セキュリティ・アップデート） — しっぽのさきっちょ | text.Baldanders.info</title>
<meta property="og:title" content="Go 1.8.7 および 1.9.4 がリリース（セキュリティ・アップデート） — しっぽのさきっちょ | text.Baldanders.info">
<meta name="description" content="#cgo ディレクティブを含む Go 言語コードをビルドする際に任意の処理を実行される可能性がある。">
<meta property="og:description" content="#cgo ディレクティブを含む Go 言語コードをビルドする際に任意の処理を実行される可能性がある。">
<meta property="og:image" content="https://text.baldanders.info/images/attention/kitten.jpg">
<meta name="author" content="Spiegel">


<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@spiegel_2007">
<meta name="twitter:creator" content="@spiegel_2007">
<meta name="keywords" content="security, vulnerability, golang">
<link rel='prev' href='https://text.baldanders.info/remark/2018/02/folklore/' title='節分どうでしょう' />
<link rel='next' href='https://text.baldanders.info/remark/2018/02/simple-web-server-with-golang/' title='紙芝居用の簡易 Web サーバを Go 言語で書く' />

<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"@id": "https://text.baldanders.info/",
	"inLanguage": "ja",
	"name": "text.Baldanders.info",
    "url": "https://text.baldanders.info/",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"image": "https://text.baldanders.info/images/attention/site.jpg",
	"description": "帰ってきた「しっぽのさきっちょ」"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Organization",
	"@id": "https://text.baldanders.info/#org",
	"name": "Spiegel",
	"logo": {
		"@type": "ImageObject",
		"@id": "https://text.baldanders.info/#logo",
		"url": "https://text.baldanders.info/images/avatar.jpg"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Person",
	"@id": "https://text.baldanders.info/#maker",
	"name": "Spiegel",
	"url": "https://baldanders.info/profile/",
	"image": "https://text.baldanders.info/images/avatar.jpg"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Blog",
	"@id": "https://text.baldanders.info/remark/",
	"url": "https://text.baldanders.info/remark/",
	"inLanguage": "ja",
	"name": "しっぽのさきっちょ",
	"description": "帰ってきた「しっぽのさきっちょ」。とりとめのない四方山話。",
	"image": "https://text.baldanders.info/images/attention/remark.jpg",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BreadcrumbList",
	"@id": "https://text.baldanders.info/remark/2018/02/go-1_8_7-and-1_9_4-are-released/#breadcrumb-list",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"item": {
				"@id": "https://text.baldanders.info/"
			}
		},
		{
			"@type": "ListItem",
			"position": 2,
			"item": {
				"@id": "https://text.baldanders.info/remark/"
			}
		}
	]
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BlogPosting",
	"@id": "https://text.baldanders.info/remark/2018/02/go-1_8_7-and-1_9_4-are-released/",
	"url": "https://text.baldanders.info/remark/2018/02/go-1_8_7-and-1_9_4-are-released/",
	"mainEntityOfPage": "https://text.baldanders.info/remark/2018/02/go-1_8_7-and-1_9_4-are-released/",
	"inLanguage": "ja",
	"name": "Go 1.8.7 および 1.9.4 がリリース（セキュリティ・アップデート）",
	"description": "#cgo ディレクティブを含む Go 言語コードをビルドする際に任意の処理を実行される可能性がある。",
	"headline": "#cgo ディレクティブを含む Go 言語コードをビルドする際に任意の処理を実行される可能性がある。",
	"keywords": "security, vulnerability, golang",
	"image": "https://text.baldanders.info/images/attention/kitten.jpg",
	"datePublished": "2018-02-09T11:19:26+00:00",
	"dateModified": "2019-07-01T13:48:09+00:00",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"license": "https://creativecommons.org/licenses/by-sa/4.0/"
}
</script>
</head>
<body>

<div id='container'>

<main>
<nav class="breadcrumb">
<a href="https://text.baldanders.info/">text.Baldanders.info</a> &raquo; <a href="/remark/">しっぽのさきっちょ</a>
</nav>
<article>
<h1>Go 1.8.7 および 1.9.4 がリリース（セキュリティ・アップデート）</h1>
<nav class="tags">
	<div><a href='/tags/'>Tags</a>: #<a href="/tags/golang/">golang</a> #<a href="/tags/security/">security</a> #<a href="/tags/vulnerability/">vulnerability</a></div>
	<div class="cloud">
		<span class="share-color" title="Share this entry"><i class="fas fa-share-square"></i></span>&nbsp;:&nbsp;<a href="http://www.facebook.com/share.php?u=https%3a%2f%2ftext.baldanders.info%2fremark%2f2018%2f02%2fgo-1_8_7-and-1_9_4-are-released%2f" target="_blank"><span class="facebook-color"><i class="fab fa-facebook-square" aria-hidden="true"></i></span></a>&nbsp;<a href="http://twitter.com/share?text=Go%201.8.7%20%e3%81%8a%e3%82%88%e3%81%b3%201.9.4%20%e3%81%8c%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9%ef%bc%88%e3%82%bb%e3%82%ad%e3%83%a5%e3%83%aa%e3%83%86%e3%82%a3%e3%83%bb%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%ef%bc%89+by+@spiegel_2007&amp;url=https%3a%2f%2ftext.baldanders.info%2fremark%2f2018%2f02%2fgo-1_8_7-and-1_9_4-are-released%2f" target="_blank"><span class="twitter-color"><i class="fab fa-twitter-square" aria-hidden="true"></i></span></a>&nbsp;<a href="https://getpocket.com/edit?url=https%3a%2f%2ftext.baldanders.info%2fremark%2f2018%2f02%2fgo-1_8_7-and-1_9_4-are-released%2f&amp;title=Go%201.8.7%20%e3%81%8a%e3%82%88%e3%81%b3%201.9.4%20%e3%81%8c%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9%ef%bc%88%e3%82%bb%e3%82%ad%e3%83%a5%e3%83%aa%e3%83%86%e3%82%a3%e3%83%bb%e3%82%a2%e3%83%83%e3%83%97%e3%83%87%e3%83%bc%e3%83%88%ef%bc%89" target="_blank"><span class="pocket-color"><i class="fab fa-get-pocket" aria-hidden="true"></i></span></a>
	</div>
</nav>
<nav class="history">History in
  <a href="https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io/commits/master/remark/2018/02/go-1_8_7-and-1_9_4-are-released/index.html">GitHub Page</a>
</nav>

<section><div>
<div class="noextension">
<a href="https://baldanders.info/noextension/" title="「著作権の保護期間延長に反対します」に関するブックマーク | Baldanders.info"><img src="/images/noextension.png" alt="no extension" width="165" height="50" /></a>
</div>
<p><a href="https://golang.org/" title="The Go Programming Language">Go 言語</a>コンパイラの 1.8.7 および 1.9.4 がリリースされている。
このバージョンでは脆弱性 <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2018-6574">CVE-2018-6574</a> の修正が行われている。
また 1.10 のリリース候補版も RC2 がリリースされている。</p>
<ul>
<li><a href="https://github.com/golang/go/issues/23672">cmd/go: arbitrary code execution during “go get” · Issue #23672 · golang/go · GitHub</a></li>
</ul>
<h2>脆弱性の内容</h2>
<p><code>#cgo</code> ディレクティブを含む <a href="https://golang.org/" title="The Go Programming Language">Go 言語</a>コードをビルドする際に任意の処理を実行される可能性がある。</p>
<figure lang="en">
<blockquote>
<q>When cgo is enabled, the build step during “go get” invokes the host C compiler, gcc or clang, adding compiler flags specified in the Go source files. Both gcc and clang support a plugin mechanism in which a shared-library plugin is loaded into the compiler, as directed by compiler flags. This means that a Go package repository can contain an attack.so file along with a Go source file that says (for example) <code>// #cgo CFLAGS: -fplugin=attack.so</code>, causing the attack plugin to be loaded into the host C compiler during the build. Gcc and clang plugins are completely unrestricted in their access to the host system.</q>
</blockquote>
<figcaption>via <q><a href="#ZgotmplZ">arbitrary code execution during “go get”</a></q></figcaption>
</figure>
<p>このため <code>#cgo</code> ディレクティブでコンパイラプラグインに関する <code>-fplugin</code> 等のオプションを無効にしたようだ。
このことによる副作用を軽減するため，新たに2つの環境変数 <code>CGO_CFLAGS_ALLOW</code> および <code>CGO_CFLAGS_DISALLOW</code> が用意された。</p>
<figure lang="en">
<blockquote>
<q>The fix changes “go build” (used during “go get” and “go install”) to limit the flags that can appear in Go source file <code>#cgo</code> directives to a list of allowed compiler flags; <code>-fplugin=</code> and other variants are not on the allowed list. The same restrictions are applied to compiler flags obtained from pkg-config. Flags obtained from the environment variables $CGO_CFLAGS and so on are not restricted, since those variables can only be set by the user running the build. To change the set of allowed compiler flags, new environment variables $CGO_CFLAGS_ALLOW and $CGO_CFLAGS_DISALLOW can set to regular expressions matching additional allowed and disallowed flags. Run “go doc cgo” for details.</q>
</blockquote>
<figcaption>via <q><a href="#ZgotmplZ">arbitrary code execution during “go get”</a></q></figcaption>
</figure>
<h2>影響度（CVSS）</h2>
<ul>
<li><a href="https://access.redhat.com/security/cve/cve-2018-6574">CVE-2018-6574 - Red Hat Customer Portal</a></li>
</ul>
<p><strong>CVSSv3 基本評価値 8.3 (<code>CVSS:3.0/AV:N/AC:H/PR:N/UI:R/S:C/C:H/I:H/A:H</code>)</strong></p>
<table>
<thead>
<tr>
<th align="right">基本評価基準</th>
<th align="left">評価値</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">攻撃元区分（AV）</td>
<td align="left">ネットワーク（N）</td>
</tr>
<tr>
<td align="right">攻撃条件の複雑さ（AC）</td>
<td align="left">高（H）</td>
</tr>
<tr>
<td align="right">必要な特権レベル（PR）</td>
<td align="left">不要（N）</td>
</tr>
<tr>
<td align="right">ユーザ関与レベル（UI）</td>
<td align="left">要（R）</td>
</tr>
<tr>
<td align="right">スコープ（S）</td>
<td align="left">変更あり（C）</td>
</tr>
<tr>
<td align="right">情報漏えいの可能性（機密性への影響, C）</td>
<td align="left">高（H）</td>
</tr>
<tr>
<td align="right">情報改ざんの可能性（完全性への影響, I）</td>
<td align="left">高（H）</td>
</tr>
<tr>
<td align="right">業務停止の可能性（可用性への影響, A）</td>
<td align="left">高（H）</td>
</tr>
</tbody>
</table>
<p>CVSS については<a href="https://text.baldanders.info/remark/2015/cvss-v3-metrics-in-jvn/">解説ページ</a>を参照のこと。</p>
<h2>影響を受ける製品</h2>
<p>以下のバージョンが影響を受ける。</p>
<ul>
<li>1.8.6 およびそれ以前</li>
<li>1.9.3 およびそれ以前</li>
<li>1.10rc1</li>
</ul>
<h2>対策・回避策</h2>
<p>以下のバージョンにアップデートすること。</p>
<ul>
<li>1.8.7 およびそれ以降</li>
<li>1.9.4 およびそれ以降</li>
<li>1.10rc2 およびそれ以降</li>
</ul>
<p>影響度が高いので早めにアップデートを行うこと。</p>
<h2>ブックマーク</h2>
<ul>
<li><a href="https://golang.org/cmd/cgo/">cgo - The Go Programming Language</a></li>
<li><a href="http://www.kotha.net/ghcguide_ja/7.6.2/compiler-plugins.html">コンパイラプラグイン</a></li>
</ul>

</div></section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/remark/2018/02/folklore/">節分どうでしょう</a></div>
<div class="next-page"><a href="/remark/2018/02/simple-web-server-with-golang/">紙芝居用の簡易 Web サーバを Go 言語で書く</a> &raquo;</div>
</nav>

<aside class="feedback" id='feedback'>
<h1>Feedback</h1>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "textbaldandersinfo" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<p>Web ブラウザとその設定によってはコメント機能をホストしている <a href="https://disqus.com/">Disqus</a> のコードを「追跡コード」としてブロックする場合があります。</p>
<p>フィードバックの手段として Twitter, Facebook または電子メールも利用できます。電子メールを利用する際の公開鍵は<a href="https://baldanders.info/profile/">プロフィール</a>から取得できます。</p>
</aside>
<footer>


<div class="userinfo">
	<div class="userinfo-avater">
		<a href="https://baldanders.info/profile/"><img src="https://text.baldanders.info/images/avatar.jpg" width="48" height="48" alt="avatar" id="logo"></a>
	</div>
	<div class="userinfo-info" id="maker">
		Text by <a href="https://baldanders.info/profile/" rel="cc:attributionURL" property="cc:attributionName">Spiegel</a>
		in <time property='dc:dateCopyrighted'>2018-02-09</time> (revised in 2019-07-01)
		<a rel='cc:license' href="https://creativecommons.org/licenses/by-sa/4.0/"><i class="fab fa-creative-commons"></i>&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;<i class="fab fa-creative-commons-sa"></i></a>
		<ul class="social">
	<li><a href="https://github.com/spiegel-im-spiegel"><span class="github-color"><i class="fab fa-github"></i></span></a></li>
	<li><a href="https://twitter.com/spiegel_2007"><span class="twitter-color"><i class="fab fa-twitter"></i></span></a></li>
	
	
	
	<li><a href="https://www.flickr.com/photos/spiegel/"><span class="flickr-color"><i class="fab fa-flickr"></i></span></a></li>
	<li><a href="https://www.facebook.com/spiegel.im.spiegel"><span class="facebook-color"><i class="fab fa-facebook-f"></i></span></a></li>
	
	
</ul>
	</div>
</div>

<nav>
<ul class='cloud center'>
<li><a href='https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io'>Repository</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/about-feeds/'>Feeds</a></li>
<li><a href='/site-policy/'>Site Policy</a></li>
<li><a href='https://validator.w3.org/nu/?doc=https%3a%2f%2ftext.baldanders.info%2fremark%2f2018%2f02%2fgo-1_8_7-and-1_9_4-are-released%2f&amp;showoutline=yes'>Debug</a></li>
</ul>
<ul class='cloud center'>
<li><a href='https://baldanders.info/'>Home</a></li>
<li><a href='https://photo.baldanders.info/'>Photos</a></li>
<li><a href='https://slide.baldanders.info/'>Slide</a></li>
<li><a href='https://scrapbox.io/spiegel-branch/'>Scrapbox</a></li>
<li><a href='http://qiita.com/spiegel-im-spiegel'>Qiita</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='https://gohugo.io/'>Hugo 0.74.3</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-baldanders-info
">Theme of Baldanders.info</a>.</li>
</ul>
</nav>
</footer>
</div>

</body>
</html>
