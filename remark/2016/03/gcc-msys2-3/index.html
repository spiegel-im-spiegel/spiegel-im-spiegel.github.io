<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.29" />
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel='stylesheet' href='//fonts.googleapis.com/css?family=Noto+Serif%7cNoto+Sans%3a400,700%7cInconsolata%3a400,700' type='text/css'>
<link rel='stylesheet' href='//fonts.googleapis.com/earlyaccess/notosansjp.css' type='text/css'>
<link rel='stylesheet' href='//fonts.googleapis.com/earlyaccess/sawarabimincho.css' type='text/css'>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/cc-icons/1.2.1/css/cc-icons.min.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/text-baldanders.css">
<link rel="alternate" href="http://text.baldanders.info/index.xml" type="application/rss+xml" title="text.Baldanders.info">
<meta name="google-site-verification" content="jTjBCslPtf8gwVatiY-GDgGv7pV5csa8aUOw1MRPUD4">
<link rel="stylesheet" href="/css/addon.css">
<link rel="stylesheet" href="/css/chroma-styles.css">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
	displayAlign: "left",
	displayIndent: "2em",
	tex2jax: {
		inlineMath: [['$','$'], ['\\(','\\)']],
		processEscapes: true
	},
	TeX: {
		equationNumbers: { autoNumber: "AMS" },
	    extensions: ["mhchem.js"]
	},
	CommonHTML: {
		matchFontHeight: false
	},
	"HTML-CSS": {
		availableFonts: ["STIX"],
	    preferredFont: "STIX",
		webFont: "STIX-Web",
		matchFontHeight: false
	}
});
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_HTML&amp;locale=ja"></script>
<title>MSYS2 による gcc 開発環境の構築 ― pgpdump をビルドする — しっぽのさきっちょ | text.Baldanders.info</title>
<meta name="description" content="前回で gcc を導入できたので，実際にビルドを試してみる。今回はターゲットとして pgpdump を用いる。">
<meta name="author" content="Spiegel">
<meta name="keywords" content="msys2,gcc,tools">
<link rel='prev' href='http://text.baldanders.info/remark/2016/03/gcc-msys2-2/' title='MSYS2 による gcc 開発環境の構築 ― gcc パッケージ群の導入' />
<link rel='next' href='http://text.baldanders.info/remark/2016/03/vulnerability-cross-protocol-attack-on-tls-using-sslv2/' title='SSLv2 を有効にしている TLS 実装の脆弱性 ― 馬も鹿も暗号化する時代のセキュリティ' />
</head>
<body>

<div id='container'>
<header>
<div id="sitetitle"><a href="http://text.baldanders.info/">text.Baldanders.info</a> <a href='/index.xml' title='Feed'><i class='fa fa-rss'></i></a></div>
<p>帰ってきた「しっぽのさきっちょ」</p>
</header>


<main>
<article itemscope itemtype='http://schema.org/BlogPosting' itemref='maker'>
<div><strong><a href="/remark">しっぽのさきっちょ</a>: 2016-03-01 付</strong> （2016-03-08 更新）</div>
<h1 itemprop='name'>MSYS2 による gcc 開発環境の構築 ― pgpdump をビルドする</h1>
<nav class="tags">
<div><a href="/tags">Tags</a>: #<a href="/tags/gcc">gcc</a> #<a href="/tags/msys2">msys2</a> #<a href="/tags/tools">tools</a></div>
<div><a href="https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io/commits/master/remark/2016/03/gcc-msys2-3/index.html">History</a></div>
</nav>

<section><div>
<div style="float:right;margin-left:0.5rem;margin-bottom:0.5rem;padding-left:0.5rem;padding-bottom:0.5rem;">
<a href="http://www.baldanders.info/spiegel/log2/000820.shtml" title="Stop Fast Track TPP — Baldanders.info"><img src="http://www.baldanders.info/images/noextension.png" alt="no extension" width="165" height="50" /></a>
</div>


<ol>
<li><a href="/remark/2016/03/gcc-msys2-1/">MSYS2 のインストールから初期化処理まで</a></li>
<li><a href="/remark/2016/03/gcc-msys2-2/">gcc パッケージ群の導入</a></li>
<li><a href="/remark/2016/03/gcc-msys2-3/">pgpdump をビルドする</a> （← イマココ）</li>
</ol>

<p><a href="/remark/2016/03/gcc-msys2-2/" title="MSYS2 による gcc 開発環境の構築 ― gcc パッケージ群の導入">前回</a>で gcc を導入できたので，実際にビルドを試してみる。
今回はターゲットとして <a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">pgpdump</a> を用いる。</p>

<h2 id="pgpdump">pgpdump</h2>

<p><a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">pgpdump</a> は山本和彦さんによる <a href="http://tools.ietf.org/html/rfc4880" title="RFC 4880 - OpenPGP Message Format">OpenPGP</a> パケットの<a href="http://www.mew.org/~kazu/proj/pgpdump/ja/">視覚化ツール</a>。
ソースコードは <a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">GitHub で公開</a>されているが， UNIX 系のプラットフォームを前提に作られているため <a href="http://msys2.github.io/" title="MSYS2 installer">MSYS2</a> 上でビルドを行う。</p>

<p>まずは <a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">pgpdump</a> のソースコードをダウンロードする。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">$ git clone https://github.com/kazu-yamamoto/pgpdump.git
</span><span class="s1f40">Cloning into &#39;pgpdump&#39;...
</span><span class="s1f40">remote: Counting objects: 492, done.
</span><span class="s1f40">Receiving objects:  59% (291remote: Total 492 (delta 0), reused 0 (delta 0), pack-reused 492 92
</span><span class="s1f40">Receiving objects: 100% (492/492), 180.29 KiB | 0 bytes/s, done.
</span><span class="s1f40">Resolving deltas: 100% (320/320), done.
</span><span class="s1f40">Checking connectivity... done.</span></code></pre>
</div>
<h2 id="32bit-版のビルド">32bit 版のビルド</h2>

<p><a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">pgpdump</a> のビルド手順は <code>configure</code> を実行した後 make を実行する<sup class="footnote-ref" id="fnref:conf"><a rel="footnote" href="#fn:conf">1</a></sup>。
まずは何も考えずに <code>configure</code> の実行してみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">$ cd pgpdump/
</span><span class="s1f40">
</span><span class="s1f40">$ ./configure
</span><span class="s1f40">checking for gcc... gcc
</span><span class="s1f40">checking whether the C compiler works... yes
</span><span class="s1f40">checking for C compiler default output file name... a.exe
</span><span class="s1f40">checking for suffix of executables... .exe
</span><span class="s1f40">checking whether we are cross compiling... no
</span><span class="s1f40">checking for suffix of object files... o
</span><span class="s1f40">checking whether we are using the GNU C compiler... yes
</span><span class="s1f40">checking whether gcc accepts -g... yes
</span><span class="s1f40">checking for gcc option to accept ISO C89... none needed
</span><span class="s1f40">checking for inflate in -lz... yes
</span><span class="s1f40">checking for BZ2_bzBuffToBuffDecompress in -lbz2... yes
</span><span class="s1f40">checking how to run the C preprocessor... gcc -E
</span><span class="s1f40">checking for grep that handles long lines and -e... /usr/bin/grep
</span><span class="s1f40">checking for egrep... /usr/bin/grep -E
</span><span class="s1f40">checking for ANSI C header files... yes
</span><span class="s1f40">checking for sys/types.h... yes
</span><span class="s1f40">checking for sys/stat.h... yes
</span><span class="s1f40">checking for stdlib.h... yes
</span><span class="s1f40">checking for string.h... yes
</span><span class="s1f40">checking for memory.h... yes
</span><span class="s1f40">checking for strings.h... yes
</span><span class="s1f40">checking for inttypes.h... yes
</span><span class="s1f40">checking for stdint.h... yes
</span><span class="s1f40">checking for unistd.h... yes
</span><span class="s1f40">checking for unistd.h... (cached) yes
</span><span class="s1f40">checking sys/time.h usability... yes
</span><span class="s1f40">checking sys/time.h presence... yes
</span><span class="s1f40">checking for sys/time.h... yes
</span><span class="s1f40">checking unixlib/local.h usability... no
</span><span class="s1f40">checking unixlib/local.h presence... no
</span><span class="s1f40">checking for unixlib/local.h... no
</span><span class="s1f40">checking whether time.h and sys/time.h may both be included... yes
</span><span class="s1f40">checking whether struct tm is in sys/time.h or time.h... time.h
</span><span class="s1f40">checking for struct tm.tm_zone... no
</span><span class="s1f40">checking whether tzname is declared... yes
</span><span class="s1f40">checking for tzname... yes
</span><span class="s1f40">configure: creating ./config.status
</span><span class="s1f40">config.status: creating Makefile
</span><span class="s1f40">config.status: WARNING:  &#39;Makefile.in&#39; seems to ignore the --datarootdir setting
</span><span class="s1f40">config.status: creating config.h</span></code></pre>
</div>
<p><a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">pgpdump</a> ではパケット内の圧縮データを扱うため <code>libz</code> および <code>libbz2</code> が必要となるが，ちゃんと認識しているようだ。
これによって作成された <code>Makefile</code> がこれ。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">prefix = /usr/local
</span><span class="s1f40">exec_prefix = ${prefix}
</span><span class="s1f40">bindir = ${exec_prefix}/bin
</span><span class="s1f40">mandir = ${prefix}/share/man
</span><span class="s1f40">LIBS = -lbz2 -lz
</span><span class="s1f40">CFLAGS  = -g -O2 -O -Wall
</span><span class="s1f40">LDFLAGS =
</span><span class="s1f40">VERSION = `git tag | tail -1 | sed -e &#39;s/v//&#39;`
</span><span class="s1f40">
</span><span class="s1f40">RM = rm -f
</span><span class="s1f40">INSTALL  = install
</span><span class="s1f40">
</span><span class="s1f40">INCS = pgpdump.h
</span><span class="s1f40">SRCS = pgpdump.c types.c tagfuncs.c packet.c subfunc.c signature.c keys.c \
</span><span class="s1f40">       buffer.c uatfunc.c
</span><span class="s1f40">OBJS = pgpdump.o types.o tagfuncs.o packet.o subfunc.o signature.o keys.o \
</span><span class="s1f40">       buffer.o uatfunc.o
</span><span class="s1f40">PROG = pgpdump
</span><span class="s1f40">
</span><span class="s1f40">MAN  = pgpdump.1
</span><span class="s1f40">
</span><span class="s1f40">CNF = config.h config.status config.cache config.log
</span><span class="s1f40">MKF = Makefile
</span><span class="s1f40">
</span><span class="s1f40">.c.o:
</span><span class="s1f40">	$(CC) -c $(CFLAGS) $&lt;
</span><span class="s1f40">
</span><span class="s1f40">all: $(PROG)
</span><span class="s1f40">
</span><span class="s1f40">$(PROG): $(OBJS)
</span><span class="s1f40">	$(CC) $(CFLAGS) -o $(PROG) $(OBJS) $(LIBS) $(LDFLAGS)
</span><span class="s1f40">
</span><span class="s1f40">clean:
</span><span class="s1f40">	$(RM) $(OBJS) $(PROG)
</span><span class="s1f40">
</span><span class="s1f40">distclean:
</span><span class="s1f40">	$(RM) $(OBJS) $(PROG) $(CNF) $(MKF)
</span><span class="s1f40">
</span><span class="s1f40">install: all
</span><span class="s1f40">	$(INSTALL) -d $(DESTDIR)$(bindir)
</span><span class="s1f40">	$(INSTALL) -cp -pm755 $(PROG) $(DESTDIR)$(bindir)
</span><span class="s1f40">	$(INSTALL) -d $(DESTDIR)$(mandir)/man1
</span><span class="s1f40">	$(INSTALL) -cp -pm644 $(MAN) $(DESTDIR)$(mandir)/man1
</span><span class="s1f40">
</span><span class="s1f40">archive:
</span><span class="s1f40">	git archive master -o ~/pgpdump-$(VERSION).tar --prefix=pgpdump-$(VERSION)/
</span><span class="s1f40">	gzip ~/pgpdump-$(VERSION).tar</span></code></pre>
</div>
<p>この時点での問題は以下のとおり。</p>

<ol>
<li><code>prefix</code> が <code>/usr/local</code> になっている。このままでもエラーにはならないが，今回は 32bit 版と 64bit 版を分けたいので <code>/mingw32</code> としたい</li>
<li>リンク時のオプション（<code>LDFLAGS</code>）に <code>-static</code> がないため，このままビルドすると DLL に依存する構成になってしまう</li>
</ol>

<p>これらについては <code>configure</code> に情報を渡せばよい。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">$ ./configure --prefix=/mingw32 LDFLAGS=-static</span></code></pre>
</div>
<p>これで <code>Makefile</code> は以下のようになる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">prefix = /mingw32
</span><span class="s1f40">exec_prefix = ${prefix}
</span><span class="s1f40">bindir = ${exec_prefix}/bin
</span><span class="s1f40">mandir = ${prefix}/share/man
</span><span class="s1f40">LIBS = -lbz2 -lz
</span><span class="s1f40">CFLAGS  = -g -O2 -O -Wall
</span><span class="s1f40">LDFLAGS = -static
</span><span class="s1f40">VERSION = `git tag | tail -1 | sed -e &#39;s/v//&#39;`
</span><span class="s1f40">
</span><span class="s1f40">RM = rm -f
</span><span class="s1f40">INSTALL  = install
</span><span class="s1f40">
</span><span class="s1f40">INCS = pgpdump.h
</span><span class="s1f40">SRCS = pgpdump.c types.c tagfuncs.c packet.c subfunc.c signature.c keys.c \
</span><span class="s1f40">       buffer.c uatfunc.c
</span><span class="s1f40">OBJS = pgpdump.o types.o tagfuncs.o packet.o subfunc.o signature.o keys.o \
</span><span class="s1f40">       buffer.o uatfunc.o
</span><span class="s1f40">PROG = pgpdump
</span><span class="s1f40">
</span><span class="s1f40">MAN  = pgpdump.1
</span><span class="s1f40">
</span><span class="s1f40">CNF = config.h config.status config.cache config.log
</span><span class="s1f40">MKF = Makefile
</span><span class="s1f40">
</span><span class="s1f40">.c.o:
</span><span class="s1f40">	$(CC) -c $(CFLAGS) $&lt;
</span><span class="s1f40">
</span><span class="s1f40">all: $(PROG)
</span><span class="s1f40">
</span><span class="s1f40">$(PROG): $(OBJS)
</span><span class="s1f40">	$(CC) $(CFLAGS) -o $(PROG) $(OBJS) $(LIBS) $(LDFLAGS)
</span><span class="s1f40">
</span><span class="s1f40">clean:
</span><span class="s1f40">	$(RM) $(OBJS) $(PROG)
</span><span class="s1f40">
</span><span class="s1f40">distclean:
</span><span class="s1f40">	$(RM) $(OBJS) $(PROG) $(CNF) $(MKF)
</span><span class="s1f40">
</span><span class="s1f40">install: all
</span><span class="s1f40">	$(INSTALL) -d $(DESTDIR)$(bindir)
</span><span class="s1f40">	$(INSTALL) -cp -pm755 $(PROG) $(DESTDIR)$(bindir)
</span><span class="s1f40">	$(INSTALL) -d $(DESTDIR)$(mandir)/man1
</span><span class="s1f40">	$(INSTALL) -cp -pm644 $(MAN) $(DESTDIR)$(mandir)/man1
</span><span class="s1f40">
</span><span class="s1f40">archive:
</span><span class="s1f40">	git archive master -o ~/pgpdump-$(VERSION).tar --prefix=pgpdump-$(VERSION)/
</span><span class="s1f40">	gzip ~/pgpdump-$(VERSION).tar</span></code></pre>
</div>
<p>では make を実行しよう。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">$ make
</span><span class="s1f40">cc -c -g -O2 -O -Wall pgpdump.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall types.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall tagfuncs.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall packet.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall subfunc.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall signature.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall keys.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall buffer.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall uatfunc.c
</span><span class="s1f40">cc -g -O2 -O -Wall -o pgpdump pgpdump.o types.o tagfuncs.o packet.o subfunc.o signature.o keys.o buffer.o uatfunc.o -lbz2 -lz  -static
</span><span class="s1f40">
</span><span class="s1f40">$ strip pgpdump.exe</span></code></pre>
</div>
<p>できた実行ファイルをコマンドプロンプトから起動してみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">C:&gt;pgpdump.exe -v
</span><span class="s1f40">pgpdump.exe version 0.29, Copyright (C) 1998-2014 Kazu Yamamoto</span></code></pre>
</div>
<p>うまくいったようである。</p>

<h2 id="64bit-版のビルド">64bit 版のビルド</h2>

<p>32bit 版で要領は分かったので一気に終わらせてしまおう。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">$ git clone https://github.com/kazu-yamamoto/pgpdump.git
</span><span class="s1f40">Cloning into &#39;pgpdump&#39;...
</span><span class="s1f40">remote: Counting objects: 492, done.
</span><span class="s1f40">Receiving objects:  62% (306remote: Total 492 (delta 0), reused 0 (delta 0), pack-reused 492/92
</span><span class="s1f40">Receiving objects: 100% (492/492), 180.29 KiB | 0 bytes/s, done.
</span><span class="s1f40">Resolving deltas: 100% (320/320), done.
</span><span class="s1f40">Checking connectivity... done.
</span><span class="s1f40">
</span><span class="s1f40">$ cd pgpdump/
</span><span class="s1f40">
</span><span class="s1f40">$ ./configure --prefix=/mingw64 LDFLAGS=-static
</span><span class="s1f40">checking for gcc... gcc
</span><span class="s1f40">checking whether the C compiler works... yes
</span><span class="s1f40">checking for C compiler default output file name... a.exe
</span><span class="s1f40">checking for suffix of executables... .exe
</span><span class="s1f40">checking whether we are cross compiling... no
</span><span class="s1f40">checking for suffix of object files... o
</span><span class="s1f40">checking whether we are using the GNU C compiler... yes
</span><span class="s1f40">checking whether gcc accepts -g... yes
</span><span class="s1f40">checking for gcc option to accept ISO C89... none needed
</span><span class="s1f40">checking for inflate in -lz... yes
</span><span class="s1f40">checking for BZ2_bzBuffToBuffDecompress in -lbz2... yes
</span><span class="s1f40">checking how to run the C preprocessor... gcc -E
</span><span class="s1f40">checking for grep that handles long lines and -e... /usr/bin/grep
</span><span class="s1f40">checking for egrep... /usr/bin/grep -E
</span><span class="s1f40">checking for ANSI C header files... yes
</span><span class="s1f40">checking for sys/types.h... yes
</span><span class="s1f40">checking for sys/stat.h... yes
</span><span class="s1f40">checking for stdlib.h... yes
</span><span class="s1f40">checking for string.h... yes
</span><span class="s1f40">checking for memory.h... yes
</span><span class="s1f40">checking for strings.h... yes
</span><span class="s1f40">checking for inttypes.h... yes
</span><span class="s1f40">checking for stdint.h... yes
</span><span class="s1f40">checking for unistd.h... yes
</span><span class="s1f40">checking for unistd.h... (cached) yes
</span><span class="s1f40">checking sys/time.h usability... yes
</span><span class="s1f40">checking sys/time.h presence... yes
</span><span class="s1f40">checking for sys/time.h... yes
</span><span class="s1f40">checking unixlib/local.h usability... no
</span><span class="s1f40">checking unixlib/local.h presence... no
</span><span class="s1f40">checking for unixlib/local.h... no
</span><span class="s1f40">checking whether time.h and sys/time.h may both be included... yes
</span><span class="s1f40">checking whether struct tm is in sys/time.h or time.h... time.h
</span><span class="s1f40">checking for struct tm.tm_zone... no
</span><span class="s1f40">checking whether tzname is declared... yes
</span><span class="s1f40">checking for tzname... yes
</span><span class="s1f40">configure: creating ./config.status
</span><span class="s1f40">config.status: creating Makefile
</span><span class="s1f40">config.status: WARNING:  &#39;Makefile.in&#39; seems to ignore the --datarootdir setting
</span><span class="s1f40">config.status: creating config.h
</span><span class="s1f40">
</span><span class="s1f40">$ make
</span><span class="s1f40">cc -c -g -O2 -O -Wall pgpdump.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall types.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall tagfuncs.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall packet.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall subfunc.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall signature.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall keys.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall buffer.c
</span><span class="s1f40">cc -c -g -O2 -O -Wall uatfunc.c
</span><span class="s1f40">cc -g -O2 -O -Wall -o pgpdump pgpdump.o types.o tagfuncs.o packet.o subfunc.o signature.o keys.o buffer.o uatfunc.o -lbz2 -lz  -static
</span><span class="s1f40">
</span><span class="s1f40">$ strip pgpdump.exe</span></code></pre>
</div>
<p>これもコマンドプロンプト上で起動してみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">C:&gt;pgpdump.exe -v
</span><span class="s1f40">pgpdump.exe version 0.29, Copyright (C) 1998-2014 Kazu Yamamoto</span></code></pre>
</div>
<p>問題なし。</p>

<h2 id="動作確認">動作確認</h2>

<p>実際にちゃんと動くかどうか <a href="https://www.jpcert.or.jp/jpcert-pgp.html" title="JPCERT コーディネーションセンター PGP公開鍵">JPCERT/CC の公開鍵</a>をを使って確認してみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="s1f40">C:&gt;pgpdump.exe info-0x69ECE048.asc
</span><span class="s1f40">Old: Public Key Packet(tag 6)(269 bytes)
</span><span class="s1f40">        Ver 4 - new
</span><span class="s1f40">        Public key creation time - Tue Jun 02 14:43:57 東京 (標準時) 2009
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        RSA n(2048 bits) - ...
</span><span class="s1f40">        RSA e(17 bits) - ...
</span><span class="s1f40">Old: User ID Packet(tag 13)(29 bytes)
</span><span class="s1f40">        User ID - JPCERT/CC &lt;info@jpcert.or.jp&gt;
</span><span class="s1f40">Old: Signature Packet(tag 2)(316 bytes)
</span><span class="s1f40">        Ver 4 - new
</span><span class="s1f40">        Sig type - Generic certification of a User ID and Public Key packet(0x10).
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        Hash alg - SHA1(hash 2)
</span><span class="s1f40">        Hashed Sub: preferred symmetric algorithms(sub 11)(3 bytes)
</span><span class="s1f40">                Sym alg - AES with 256-bit key(sym 9)
</span><span class="s1f40">                Sym alg - CAST5(sym 3)
</span><span class="s1f40">                Sym alg - Triple-DES(sym 2)
</span><span class="s1f40">        Hashed Sub: key server preferences(sub 23)(4 bytes)
</span><span class="s1f40">                Flag - No-modify
</span><span class="s1f40">        Hashed Sub: key flags(sub 27)(4 bytes)
</span><span class="s1f40">                Flag - This key may be used to certify other keys
</span><span class="s1f40">                Flag - This key may be used to sign data
</span><span class="s1f40">                Flag - This key may be used to encrypt communications
</span><span class="s1f40">                Flag - This key may be used to encrypt storage
</span><span class="s1f40">                Flag - The private component of this key may be in the possession of more than one person
</span><span class="s1f40">        Hashed Sub: preferred compression algorithms(sub 22)(2 bytes)
</span><span class="s1f40">                Comp alg - ZLIB &lt;RFC1950&gt;(comp 2)
</span><span class="s1f40">                Comp alg - ZIP &lt;RFC1951&gt;(comp 1)
</span><span class="s1f40">        Hashed Sub: features(sub 30)(4 bytes)
</span><span class="s1f40">                Flag - Modification detection (packets 18 and 19)
</span><span class="s1f40">        Hashed Sub: preferred hash algorithms(sub 21)(3 bytes)
</span><span class="s1f40">                Hash alg - SHA256(hash 8)
</span><span class="s1f40">                Hash alg - SHA384(hash 9)
</span><span class="s1f40">                Hash alg - SHA512(hash 10)
</span><span class="s1f40">        Hashed Sub: signature creation time(sub 2)(4 bytes)
</span><span class="s1f40">                Time - Tue Jun 16 12:51:22 東京 (標準時) 2009
</span><span class="s1f40">        Sub: issuer key ID(sub 16)(8 bytes)
</span><span class="s1f40">                Key ID - 0x317D97A469ECE048
</span><span class="s1f40">        Hash left 2 bytes - cd 79
</span><span class="s1f40">        RSA m^d mod n(2047 bits) - ...
</span><span class="s1f40">                -&gt; PKCS-1
</span><span class="s1f40">Old: Signature Packet(tag 2)(277 bytes)
</span><span class="s1f40">        Ver 3 - old
</span><span class="s1f40">        Hash material(5 bytes):
</span><span class="s1f40">                Sig type - Generic certification of a User ID and Public Key packet(0x10).
</span><span class="s1f40">                Creation time - Tue Jun 02 14:43:57 東京 (標準時) 2009
</span><span class="s1f40">        Key ID - 0xE7734FA60C7BDE12
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        Hash alg - SHA1(hash 2)
</span><span class="s1f40">        Hash left 2 bytes - e9 53
</span><span class="s1f40">        RSA m^d mod n(2047 bits) - ...
</span><span class="s1f40">                -&gt; PKCS-1
</span><span class="s1f40">Old: Signature Packet(tag 2)(156 bytes)
</span><span class="s1f40">        Ver 4 - new
</span><span class="s1f40">        Sig type - Generic certification of a User ID and Public Key packet(0x10).
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        Hash alg - SHA1(hash 2)
</span><span class="s1f40">        Hashed Sub: signature creation time(sub 2)(4 bytes)
</span><span class="s1f40">                Time - Mon Jun 15 14:51:27 東京 (標準時) 2009
</span><span class="s1f40">        Sub: issuer key ID(sub 16)(8 bytes)
</span><span class="s1f40">                Key ID - 0x8C756B2E2C94D4ED
</span><span class="s1f40">        Hash left 2 bytes - 35 fd
</span><span class="s1f40">        RSA m^d mod n(1022 bits) - ...
</span><span class="s1f40">                -&gt; PKCS-1
</span><span class="s1f40">Old: Public Subkey Packet(tag 14)(269 bytes)
</span><span class="s1f40">        Ver 4 - new
</span><span class="s1f40">        Public key creation time - Tue Jun 02 14:43:57 東京 (標準時) 2009
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        RSA n(2048 bits) - ...
</span><span class="s1f40">        RSA e(17 bits) - ...
</span><span class="s1f40">Old: Signature Packet(tag 2)(577 bytes)
</span><span class="s1f40">        Ver 4 - new
</span><span class="s1f40">        Sig type - Subkey Binding Signature(0x18).
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        Hash alg - SHA1(hash 2)
</span><span class="s1f40">        Hashed Sub: signature creation time(sub 2)(4 bytes)
</span><span class="s1f40">                Time - Tue Jun 02 14:43:58 東京 (標準時) 2009
</span><span class="s1f40">        Hashed Sub: key flags(sub 27)(4 bytes)
</span><span class="s1f40">                Flag - This key may be used to encrypt communications
</span><span class="s1f40">                Flag - This key may be used to encrypt storage
</span><span class="s1f40">        Hashed Sub: embedded signature(sub 32)(284 bytes)
</span><span class="s1f40">        Ver 4 - new
</span><span class="s1f40">        Sig type - Primary Key Binding Signature(0x19).
</span><span class="s1f40">        Pub alg - RSA Encrypt or Sign(pub 1)
</span><span class="s1f40">        Hash alg - SHA256(hash 8)
</span><span class="s1f40">        Hashed Sub: signature creation time(sub 2)(4 bytes)
</span><span class="s1f40">                Time - Tue Jun 02 14:43:57 東京 (標準時) 2009
</span><span class="s1f40">        Sub: issuer key ID(sub 16)(8 bytes)
</span><span class="s1f40">                Key ID - 0x09D704B753BA1622
</span><span class="s1f40">        Hash left 2 bytes - 71 2d
</span><span class="s1f40">        RSA m^d mod n(2048 bits) - ...
</span><span class="s1f40">                -&gt; PKCS-1
</span><span class="s1f40">        Sub: issuer key ID(sub 16)(8 bytes)
</span><span class="s1f40">                Key ID - 0x317D97A469ECE048
</span><span class="s1f40">        Hash left 2 bytes - 1d e2
</span><span class="s1f40">        RSA m^d mod n(2046 bits) - ...
</span><span class="s1f40">                -&gt; PKCS-1</span></code></pre>
</div>
<p>うむ，問題ないようだな。
ちなみに Windows バイナリは<a href="http://www.baldanders.info/spiegel/archive/pgpdump/">うちのサイトでも公開</a>しているのでご自由にどうぞ。</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:conf"><a href="/remark/2016/03/gcc-msys2-2/" title="MSYS2 による gcc 開発環境の構築 ― gcc パッケージ群の導入">前回</a>インストールした <code>base-devel</code> パッケージグループは今回の <a href="https://github.com/kazu-yamamoto/pgpdump" title="kazu-yamamoto/pgpdump: A PGP packet visualizer">pgpdump</a> ビルドには必要なく，インストールしなくても問題ない。まぁ今回は単純なビルドだし。
 <a class="footnote-return" href="#fnref:conf"><sup>[return]</sup></a></li>
</ol>
</div>

</div></section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/remark/2016/03/gcc-msys2-2/">MSYS2 による gcc 開発環境の構築 ― gcc パッケージ群の導入</a></div>
<div class="next-page"><a href="/remark/2016/03/vulnerability-cross-protocol-attack-on-tls-using-sslv2/">SSLv2 を有効にしている TLS 実装の脆弱性 ― 馬も鹿も暗号化する時代のセキュリティ</a> &raquo;</div>
</nav>

<aside id='tech-terms'>
<style scoped>
#tech-terms h1 {
  border: solid thin gray;
  margin: 0 0 1rem 0;
  padding: 0 0.5rem 2px 2px;
}
</style>
<h1>Technical Terms</h1>
<div class="cloud" style="font-size:smaller;">
<script type="text/javascript" src="http://e-words.jp/embed.x?e=utf8"></script>
<p class="right">Powered by <a href="hhttp://e-words.jp/p/s-embed.html">e-Words</a></p>
</div>
</aside>
<aside id='feedback'>
<style scoped>
#feedback h1 {
  border: solid thin gray;
  margin: 0 0 1rem 0;
  padding: 0 0.5rem 2px 2px;
}
</style>
<h1>Feedback</h1>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "textbaldandersinfo" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>

<footer>

	<div class="userinfo">
		<div class="userinfo-avater">
			
				<a href="http://www.baldanders.info/spiegel/profile/"><img src="/images/avatar.jpg" width="48" height="48" alt="avatar"></a>
			
		</div>
		<div class="userinfo-info" id="maker" itemprop='author' itemscope itemtype='http://schema.org/Person'>
			
				Written by <a href="http://www.baldanders.info/spiegel/profile/" rel="cc:attributionURL" property="cc:attributionName" itemprop='name'>Spiegel</a> in <time property='dc:dateCopyrighted'>2016-03-01</time> (revised in <time property='dc:modified'>2016-03-08</time>).
				
	<a rel='cc:license' href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><i class="cc cc-cc"></i>&nbsp;<i class="cc cc-by"></i>&nbsp;<i class="cc cc-sa"></i></a>

			
			
	<ul class="social">
		<li><a href="https://github.com/spiegel-im-spiegel" target="_blank"><i class="fa fa-github"></i></a></li>
		<li><a href="https://twitter.com/spiegel_2007" target="_blank"><i class="fa fa-twitter"></i></a></li>
		
		<li><a href="http://spiegel-im-spiegel.tumblr.com/" target="_blank"><i class="fa fa-tumblr"></i></a></li>
		<li><a href="http://instagram.com/spiegel_2007" target="_blank"><i class="fa fa-instagram"></i></a></li>
		<li><a href="https://www.flickr.com/photos/spiegel/" target="_blank"><i class="fa fa-flickr"></i></a></li>
		<li><a href="https://www.facebook.com/spiegel.im.spiegel" target="_blank"><i class="fa fa-facebook"></i></a></li>
		<li><a href="https://jp.linkedin.com/in/spiegelimspiegel" target="_blank"><i class="fa fa-linkedin"></i></a></li>
		
	</ul>
	<ul class="social">
		<li><a href="http://www.facebook.com/share.php?u=http%3a%2f%2ftext.baldanders.info%2fremark%2f2016%2f03%2fgcc-msys2-3%2f" target="_blank"><i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i></a></li>
		<li><a href="http://twitter.com/share?text=MSYS2%20%e3%81%ab%e3%82%88%e3%82%8b%20gcc%20%e9%96%8b%e7%99%ba%e7%92%b0%e5%a2%83%e3%81%ae%e6%a7%8b%e7%af%89%20%e2%80%95%20pgpdump%20%e3%82%92%e3%83%93%e3%83%ab%e3%83%89%e3%81%99%e3%82%8b+from+@spiegel_2007&amp;url=http%3a%2f%2ftext.baldanders.info%2fremark%2f2016%2f03%2fgcc-msys2-3%2f" target="_blank"><i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i></a></li>
		<li><a href="https://flattr.com/submit/auto?user_id=spiegel&amp;url=http%3a%2f%2ftext.baldanders.info%2fremark%2f2016%2f03%2fgcc-msys2-3%2f&amp;title=MSYS2%20%e3%81%ab%e3%82%88%e3%82%8b%20gcc%20%e9%96%8b%e7%99%ba%e7%92%b0%e5%a2%83%e3%81%ae%e6%a7%8b%e7%af%89%20%e2%80%95%20pgpdump%20%e3%82%92%e3%83%93%e3%83%ab%e3%83%89%e3%81%99%e3%82%8b" target="_blank"><img src="//button.flattr.com/flattr-badge-large.png" alt="Flattr this" title="Flattr this"></a></li>
	</ul>

		</div>
	</div>

<nav>
<ul class='cloud center'>
<li><a href='https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io'>Repository</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/about-feeds/'>Feeds</a></li>
<li><a href='/site-policy/'>Site Policy</a></li>
<li><a href='https://validator.w3.org/nu/?doc=http%3a%2f%2ftext.baldanders.info%2fremark%2f2016%2f03%2fgcc-msys2-3%2f&amp;showoutline=yes'>Debug</a></li>
</ul>
<ul class='cloud center'>
<li><a href='http://www.baldanders.info/'>Baldanders.info</a></li>
<li><a href='https://scrapbox.io/spiegel-branch/'>Scrapbox</a></li>
<li><a href='http://qiita.com/spiegel-im-spiegel'>Qiita</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='https://gohugo.io/'>Hugo 0.29</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-text">Text</a>.</li>
</ul>
</nav>
</footer>

</div>
<script src="/highlightjs/highlight.pack.js"></script>
<script>
  hljs.configure({
    tabReplace: "    ",	
  });
  hljs.initHighlightingOnLoad();
</script>

</body>
</html>
