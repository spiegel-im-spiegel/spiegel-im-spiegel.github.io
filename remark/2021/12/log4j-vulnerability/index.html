<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.154.2">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://text.baldanders.info/remark/2021/12/log4j-vulnerability/">
<script defer src="/fa/js/all.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=BIZ+UDGothic:wght@400;700&family=BIZ+UDMincho:wght@400;700&family=Intel+One+Mono:wght@400;700&family=Noto+Color+Emoji&family=Noto+Sans:wght@400;700&family=Noto+Serif+Hentaigana:wght@400;700&family=Noto+Serif:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/local-font.css" type='text/css'>
<link rel="stylesheet" href="/css/baldanders-info-dark.css" type='text/css'>

<link rel="alternate" href="https://text.baldanders.info/index.xml" type="application/rss+xml" title="text.Baldanders.info">
<link rel="alternate" href="https://text.baldanders.info/index.json" type="application/json" title="text.Baldanders.info">
<meta name="google-site-verification" content="jTjBCslPtf8gwVatiY-GDgGv7pV5csa8aUOw1MRPUD4">
<link rel="me" href="https://fedibird.com/@spiegel">
<title>Java 製 Logger “Log4j” の脆弱性について [text.Baldanders.info]</title>
<meta property="og:title" content="Java 製 Logger “Log4j” の脆弱性について">
<meta name="description" content="Logback にも脆弱性（の可能性）あり。">
<meta property="og:description" content="Logback にも脆弱性（の可能性）あり。">
<meta property="og:image" content="https://text.baldanders.info/images/attention/kitten.jpg">
<meta name="author" content="Spiegel">


<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@spiegel_2007">
<meta name="twitter:creator" content="@spiegel_2007">
<link rel="me" href="https://goark.fedicity.net/@spiegel">
<meta name="keywords" content="java, security, vulnerability, logger">
<link rel='prev' href='https://text.baldanders.info/remark/2021/12/new-kindle-paperwhite/' title='Kindle Paperwhite を新調した'>
<link rel='next' href='https://text.baldanders.info/remark/2021/12/more-bits/' title='『bit』誌の電子復刻と TechMag'>

<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"@id": "https://text.baldanders.info/",
	"inLanguage": "ja",
	"name": "text.Baldanders.info",
    "url": "https://text.baldanders.info/",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"image": "https://text.baldanders.info/images/attention/site.jpg",
	"description": "帰ってきた「しっぽのさきっちょ」"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Organization",
	"@id": "https://text.baldanders.info/#org",
	"name": "Spiegel",
	"logo": {
		"@type": "ImageObject",
		"@id": "https://text.baldanders.info/#logo",
		"url": "https://text.baldanders.info/images/avatar.jpg"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Person",
	"@id": "https://text.baldanders.info/#maker",
	"name": "Spiegel",
	"url": "https://baldanders.info/profile/",
	"image": "https://text.baldanders.info/images/avatar.jpg"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Blog",
	"@id": "https://text.baldanders.info/remark/",
	"url": "https://text.baldanders.info/remark/",
	"inLanguage": "ja",
	"name": "しっぽのさきっちょ",
	"description": "帰ってきた「しっぽのさきっちょ」。とりとめのない四方山話。",
	"image": "https://text.baldanders.info/images/attention/remark.jpg",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BreadcrumbList",
	"@id": "https://text.baldanders.info/remark/2021/12/log4j-vulnerability/#breadcrumb-list",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"item": {
				"@id": "https://text.baldanders.info/"
			}
		},
		{
			"@type": "ListItem",
			"position": 2,
			"item": {
				"@id": "https://text.baldanders.info/remark/"
			}
		}
	]
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BlogPosting",
	"@id": "https://text.baldanders.info/remark/2021/12/log4j-vulnerability/",
	"url": "https://text.baldanders.info/remark/2021/12/log4j-vulnerability/",
	"mainEntityOfPage": "https://text.baldanders.info/remark/2021/12/log4j-vulnerability/",
	"inLanguage": "ja",
	"name": "Java 製 Logger “Log4j” の脆弱性について",
	"description": "Logback にも脆弱性（の可能性）あり。",
	"headline": "Logback にも脆弱性（の可能性）あり。",
	"keywords": "java, security, vulnerability, logger",
	"image": "https://text.baldanders.info/images/attention/kitten.jpg",
	"datePublished": "2021-12-11T06:22:43+00:00",
	"dateModified": "2022-05-04T05:22:29+00:00",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"license": "https://creativecommons.org/licenses/by-sa/4.0/"
}
</script>
</head>
<body>

<div id='container'>

<main>
<nav class="breadcrumb">
<a href="https://text.baldanders.info/">text.Baldanders.info</a> &raquo; <a href="/remark/">しっぽのさきっちょ</a>
</nav>
<article>
<h1>Java 製 Logger “Log4j” の脆弱性について</h1>
<nav class="tags">
	<div><a href='/tags/'>Tags</a>: #<a href="/tags/java/">java</a> #<a href="/tags/logger/">logger</a> #<a href="/tags/security/">security</a> #<a href="/tags/vulnerability/">vulnerability</a></div>
	<div class="cloud">
		<span class="share-color" title="Share this entry"><i class="fa-solid fa-share-from-square"></i></span>&nbsp;:
		&nbsp;<a href="https://getpocket.com/edit?url=https%3a%2f%2ftext.baldanders.info%2fremark%2f2021%2f12%2flog4j-vulnerability%2f&amp;title=Java%20%e8%a3%bd%20Logger%20%e2%80%9cLog4j%e2%80%9d%20%e3%81%ae%e8%84%86%e5%bc%b1%e6%80%a7%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6" target="_blank"><span class="pocket-color"><abbr title="Share Pocket"><i class="fab fa-get-pocket" aria-hidden="true"></i></abbr></span></a>
		&nbsp;<a href="http://www.facebook.com/share.php?u=https%3a%2f%2ftext.baldanders.info%2fremark%2f2021%2f12%2flog4j-vulnerability%2f" target="_blank"><span class="facebook-color"><abbr title="Share facebook"><i class="fab fa-square-facebook" aria-hidden="true"></i></abbr></span></a>
		&nbsp;<a href="http://x.com/intent/post?text=Java%20%e8%a3%bd%20Logger%20%e2%80%9cLog4j%e2%80%9d%20%e3%81%ae%e8%84%86%e5%bc%b1%e6%80%a7%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6+by+@spiegel_2007&amp;url=https%3a%2f%2ftext.baldanders.info%2fremark%2f2021%2f12%2flog4j-vulnerability%2f" target="_blank"><span class="x-twitter-color"><abbr title="Share Twitter"><i class="fa-brands fa-square-x-twitter" aria-hidden="true"></i></abbr></span></a>
		&nbsp;<a href="https://donshare.net/share.html?text=Java%20%e8%a3%bd%20Logger%20%e2%80%9cLog4j%e2%80%9d%20%e3%81%ae%e8%84%86%e5%bc%b1%e6%80%a7%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6+by+@spiegel%40goark.fedicity.net%20+https%3a%2f%2ftext.baldanders.info%2fremark%2f2021%2f12%2flog4j-vulnerability%2f" target="_blank"><span class="mastodon-color"><abbr title="Share Mastodon"><i class="fa-brands fa-mastodon" aria-hidden="true"></i></abbr></span></a>
	</div>
</nav>
<nav class="history">History in
  <a href="https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io/commits/master/remark/2021/12/log4j-vulnerability/index.html">GitHub Page</a>
</nav>

<section><div>
<div class="noextension">
<a href="https://baldanders.info/public-domain-locked/" title="Public Domain Locked... | Baldanders.info"><img src="/images/Locked-150.png" alt="no extension" width="150"></a>
</div>
<p>私の Twitter TL では 2021-12-10 あたりからちらほら見かけるようになったが Java 製の事実上の標準 logger である Apache Log4j に脆弱性があったそうで，最新版 <a href="https://github.com/apache/logging-log4j2/releases/tag/rel%2F2.15.0">2.15.0</a> のアナウンスが出ている。
ちょっと大事になりそうな気がするので，この記事で覚え書きとして残しておく。</p>
<h2><a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a></h2>
<figure lang="en">
<blockquote cite="https://logging.apache.org/log4j/2.x/security.html"><q>Apache Log4j2 &lt;=2.14.1 JNDI features used in configuration, log messages, and parameters do not protect against attacker controlled LDAP and other JNDI related endpoints. An attacker who can control log messages or log message parameters can execute arbitrary code loaded from LDAP servers when message lookup substitution is enabled. From log4j 2.15.0, this behavior has been disabled by default</q>.</blockquote>
<figcaption><div>via <q><a href="https://logging.apache.org/log4j/2.x/security.html">Log4j – Apache Log4j Security Vulnerabilities</a></q></div></figcaption>
</figure>
<p>ちょっと分かりにくいかもしれないので，以下の解説記事も参考にどうぞ。</p>
<figure>
<blockquote cite="https://ezoeryou.github.io/blog/article/2021-12-10-log4j.html"><p>今回問題となっているのはJndi Lookupだ。これはJavaのJava Naming and Directory Interfaceによる変数名の置換で、ネットワーク越しに変数に相当する値を検索することができる。その中にLDAPも含まれる。例えば<code>&quot;${jndi:ldap://someremoteclass}&quot;</code>のようになる。</p>
<p>問題は、このURLに.を含めることにより、lg4jは任意のリモートのLDAPサーバーからjava classファイルをダウンロードして読み込んでしまうのだ。</p>
<p>なので悪意あるjava classファイルとそれをホストするLDAPサーバーを用意して、ターゲットとなるJavaで動きlog4jを使っているプログラムに<code>&quot;${jndi:ldap://URL}&quot;</code>の形でログ出力されるようにすれば、任意のコード実行が可能になる。</p>
</blockquote>
<figcaption><div><q><a href="https://ezoeryou.github.io/blog/article/2021-12-10-log4j.html">log4jの脆弱性について</a></q>より</div></figcaption>
</figure>
<p>ここまで言及されれば今回の脆弱性のヤバさが分かるだろう。
サービス側にログが吐かれるだけでこの脆弱性が発火する可能性があるのだ。
これは私達が目にしている各種サービスだけではなく，たとえばバックエンドで外部の Web API サービスを利用しているのならそちらも考慮する必要がある。
あるいは，もしかしたら組込み製品でアプリケーションを Java で組んでいるかもしれない。</p>
<p>Apache Log4j はこの脆弱性の CVSS 評価値を</p>
<ul>
<li><code>CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H</code></li>
<li>深刻度: 緊急 (Score: 10)</li>
</ul>
<table>
  <thead>
      <tr>
          <th>基本評価基準</th>
          <th>評価値</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>攻撃元区分</td>
          <td>ネットワーク</td>
      </tr>
      <tr>
          <td>攻撃条件の複雑さ</td>
          <td>低</td>
      </tr>
      <tr>
          <td>必要な特権レベル</td>
          <td>不要</td>
      </tr>
      <tr>
          <td>ユーザ関与レベル</td>
          <td>不要</td>
      </tr>
      <tr>
          <td>スコープ</td>
          <td>変更あり</td>
      </tr>
      <tr>
          <td>機密性への影響</td>
          <td>高</td>
      </tr>
      <tr>
          <td>完全性への影響</td>
          <td>高</td>
      </tr>
      <tr>
          <td>可用性への影響</td>
          <td>高</td>
      </tr>
  </tbody>
</table>
<p>と見積もっている。</p>
<p>一応，サービス側の緩和措置も示されているので「すぐに対応できないよー」という場合は参考にするといいだろう。</p>
<figure lang="en">
<blockquote cite="https://logging.apache.org/log4j/2.x/security.html"><q>In releases &gt;=2.10, this behavior can be mitigated by setting either the system property <code>log4j2.formatMsgNoLookups</code> or the environment variable <code>LOG4J_FORMAT_MSG_NO_LOOKUPS</code> to <code>true</code>. For releases from 2.0-beta9 to 2.10.0, the mitigation is to remove the <code>JndiLookup</code> class from the classpath: <code>zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class</code></q>.</blockquote>
<figcaption><div>via <q><a href="https://logging.apache.org/log4j/2.x/security.html">Log4j – Apache Log4j Security Vulnerabilities</a></q></div></figcaption>
</figure>
<p>とりあえずシステム・プロパティまたは環境変数で対応って感じかねぇ。</p>
<p>アップデートは計画的に。</p>
<h2>【2021-12-15 追記】 <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-44228">CVE-2021-44228</a></h2>
<p>リリースした <a href="https://github.com/apache/logging-log4j2/releases/tag/rel%2F2.15.0">2.15.0</a> に不備があったため <a href="https://github.com/apache/logging-log4j2/releases/tag/rel%2F2.16.0">2.16.0</a> がリリースされている。</p>
<figure lang="en">
<blockquote cite="https://logging.apache.org/log4j/2.x/security.html"><q>It was found that the fix to address CVE-2021-44228 in Apache Log4j 2.15.0 was incomplete in certain non-default configurations. This could allows attackers with control over Thread Context Map (MDC) input data when the logging configuration uses a non-default Pattern Layout with either a Context Lookup (for example, <code>$${ctx:loginId}</code>) or a Thread Context Map pattern (<code>%X</code>, <code>%mdc</code>, or <code>%MDC</code>) to craft malicious input data using a JNDI Lookup pattern resulting in a denial of service (DOS) attack. Log4j 2.15.0 restricts JNDI LDAP lookups to localhost by default. Note that previous mitigations involving configuration such as to set the system property <code>log4j2.noFormatMsgLookup</code> to true do NOT mitigate this specific vulnerability</q>.</blockquote>
<figcaption><div>via <q><a href="https://logging.apache.org/log4j/2.x/security.html">Log4j – Apache Log4j Security Vulnerabilities</a></q></div></figcaption>
</figure>
<p>Apache Log4j はこの脆弱性の CVSS 評価値を</p>
<ul>
<li><code>CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:C/C:H/I:H/A:H</code><br>(<code>CVSS:3.0/AV:N/AC:H/PR:N/UI:N/S:U/C:N/I:N/A:L</code> から大幅に引き上げた模様【2021-12-18 追記】)</li>
<li>深刻度: 緊急 (Score: 9)</li>
</ul>
<table>
  <thead>
      <tr>
          <th>基本評価基準</th>
          <th>評価値</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>攻撃元区分</td>
          <td>ネットワーク</td>
      </tr>
      <tr>
          <td>攻撃条件の複雑さ</td>
          <td>高</td>
      </tr>
      <tr>
          <td>必要な特権レベル</td>
          <td>不要</td>
      </tr>
      <tr>
          <td>ユーザ関与レベル</td>
          <td>不要</td>
      </tr>
      <tr>
          <td>スコープ</td>
          <td>変更あり</td>
      </tr>
      <tr>
          <td>機密性への影響</td>
          <td>高</td>
      </tr>
      <tr>
          <td>完全性への影響</td>
          <td>高</td>
      </tr>
      <tr>
          <td>可用性への影響</td>
          <td>高</td>
      </tr>
  </tbody>
</table>
<p>と見積もっている。</p>
<p>前節で示した緩和策は使えないらしい。
2.16.0 以降に上げられないのであれば</p>
<figure lang="en">
<blockquote cite="https://logging.apache.org/log4j/2.x/security.html"><q>Otherwise, remove the <code>JndiLookup</code> class from the classpath: <code>zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class</code></q></blockquote>
<figcaption><div>via <q><a href="https://logging.apache.org/log4j/2.x/security.html">Log4j – Apache Log4j Security Vulnerabilities</a></q></div></figcaption>
</figure>
<p>と class ファイルを削除する必要がある。</p>
<h2>【2021-12-20 追記】 <a href="https://nvd.nist.gov/vuln/detail/CVE-2021-45105">CVE-2021-45105</a></h2>
<p>先日リリースされた <a href="https://github.com/apache/logging-log4j2/releases/tag/rel%2F2.16.0">2.16.0</a> には以下の脆弱性があり，これを緩和する <a href="https://github.com/apache/logging-log4j2/releases/tag/rel%2F2.17.0">2.17.0</a> がリリースされた。</p>
<figure lang="en">
<blockquote cite="https://logging.apache.org/log4j/2.x/security.html"><q>Apache Log4j2 versions 2.0-alpha1 through 2.16.0 did not protect from uncontrolled recursion from self-referential lookups. When the logging configuration uses a non-default Pattern Layout with a Context Lookup (for example, <code>$${ctx:loginId}</code>), attackers with control over Thread Context Map (MDC) input data can craft malicious input data that contains a recursive lookup, resulting in a StackOverflowError that will terminate the process. This is also known as a DOS (Denial of Service) attack</q>.</blockquote>
<figcaption><div>via <q><a href="https://logging.apache.org/log4j/2.x/security.html">Log4j – Apache Log4j Security Vulnerabilities</a></q></div></figcaption>
</figure>
<p>Apache Log4j はこの脆弱性の CVSS 評価値を</p>
<ul>
<li><code>CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H</code></li>
<li>深刻度: 重要 (Score: 7.5)</li>
</ul>
<table>
  <thead>
      <tr>
          <th>基本評価基準</th>
          <th>評価値</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>攻撃元区分</td>
          <td>ネットワーク</td>
      </tr>
      <tr>
          <td>攻撃条件の複雑さ</td>
          <td>低</td>
      </tr>
      <tr>
          <td>必要な特権レベル</td>
          <td>不要</td>
      </tr>
      <tr>
          <td>ユーザ関与レベル</td>
          <td>不要</td>
      </tr>
      <tr>
          <td>スコープ</td>
          <td>変更なし</td>
      </tr>
      <tr>
          <td>機密性への影響</td>
          <td>なし</td>
      </tr>
      <tr>
          <td>完全性への影響</td>
          <td>なし</td>
      </tr>
      <tr>
          <td>可用性への影響</td>
          <td>高</td>
      </tr>
  </tbody>
</table>
<p>と見積もっている。</p>
<p>また別の緩和手順として</p>
<figure lang="en">
<blockquote cite="https://logging.apache.org/log4j/2.x/security.html"><ul>
<li>In PatternLayout in the logging configuration, replace Context Lookups like <code>${ctx:loginId}</code> or <code>$${ctx:loginId}</code> with Thread Context Map patterns (<code>%X</code>, <code>%mdc</code>, or <code>%MDC</code>).</li>
<li>Otherwise, in the configuration, remove references to Context Lookups like <code>${ctx:loginId}</code> or <code>$${ctx:loginId}</code> where they originate from sources external to the application such as HTTP headers or user input.</li>
</ul>
</blockquote>
<figcaption><div>via <q><a href="https://logging.apache.org/log4j/2.x/security.html">Log4j – Apache Log4j Security Vulnerabilities</a></q></div></figcaption>
</figure>
<p>を挙げている。</p>
<h2>【2021-12-15 追記】 Logback にも脆弱性（の可能性）あり</h2>
<p><a href="http://logback.qos.ch/">Logback</a> バージョン 1.2.8 が<a href="http://logback.qos.ch/news.html">リリース</a>されている。
このバージョンでは <a href="https://jira.qos.ch/browse/LOGBACK-1591">LOGBACK-1591</a> に絡む対応が行われている。
ただし，これが脆弱性として発火するとしても以下の前提条件が必要となる。</p>
<figure lang="en">
<blockquote cite="http://logback.qos.ch/news.html"><ol>
<li>write access to <code>logback.xml</code></li>
<li>use of versions &lt; 1.2.8</li>
<li>reloading of poisoned configuration data, which implies application restart or <code>scan=&quot;true&quot;</code> set prior to attack</li>
</ol>
</blockquote>
<figcaption><div>via <q><a href="http://logback.qos.ch/news.html">News</a></q></div></figcaption>
</figure>
<p><a href="https://jira.qos.ch/browse/LOGBACK-1591">LOGBACK-1591</a> は現時点（2021-12-15）ではまだ確定的ではないが，予防措置として log4j と同じく JNDI lookup コードを削除することにしたようだ。</p>
<h2>ブックマーク</h2>
<ul>
<li><a href="https://github.com/apache/logging-log4j2">GitHub - apache/logging-log4j2: Apache Log4j 2 is an upgrade to Log4j that provides significant improvements over its predecessor, Log4j 1.x, and provides many of the improvements available in Logback while fixing some inherent problems in Logback&rsquo;s architecture.</a></li>
<li><a href="https://github.com/advisories/GHSA-jfh8-c2jp-5v3q">Remote code injection in Log4j · CVE-2021-44228 · GitHub Advisory Database · GitHub</a></li>
<li><a href="https://www.oracle.com/security-alerts/alert-cve-2021-44228.html">Oracle Security Alert Advisory - CVE-2021-44228</a></li>
<li><a href="https://nakedsecurity.sophos.com/2021/12/10/log4shell-java-vulnerability-how-to-safeguard-your-servers/">“Log4Shell” Java vulnerability – how to safeguard your servers – Naked Security</a></li>
<li><a href="https://www.abc.net.au/news/2021-12-11/log4shell-techs-race-to-fix-software-flaw/100692876">Log4shell software flaw threatens millions of servers as hackers scramble to exploit it - ABC News</a></li>
<li><a href="https://aws.amazon.com/security/security-bulletins/AWS-2021-005/">Apache Log4j2 Security Bulletin (CVE-2021-44228)</a></li>
<li><a href="https://github.com/Cybereason/Logout4Shell">Cybereason/Logout4Shell: Use Log4Shell vulnerability to vaccinate a victim server against Log4Shell</a></li>
<li><a href="https://isc.sans.edu/forums/diary/28120/">RCE in log4j, Log4Shell, or how things can get bad quickly</a></li>
<li><a href="https://www.ipa.go.jp/security/ciadr/vul/alert20211213.html">Apache Log4j の脆弱性対策について(CVE-2021-44228)：IPA 独立行政法人 情報処理推進機構</a>
<ul>
<li><a href="https://www.jpcert.or.jp/at/2021/at210050.html">Apache Log4jの任意のコード実行の脆弱性（CVE-2021-44228）に関する注意喚起</a></li>
</ul>
</li>
<li><a href="https://forest.watch.impress.co.jp/docs/serial/yajiuma/1373242.html">マイクラもハッキング ～「Apache Log4j」ライブラリに致命的なリモートコード実行のゼロデイ脆弱性【12月10日18:45追記】 - やじうまの杜 - 窓の杜</a></li>
</ul>
<p>Minecraft では既に影響が出ている模様：</p>
<figure style='margin:0 auto;text-align:center;'>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Critical RCE exploit discovered on all Minecraft <br> Java versions from 1.7 to 1.18, clients and servers. (Log4j2 2.0.0 - 2.14.1 vuln)<br>Fix it w:<br>- Use -Dlog4j2.formatMsgNoLookups=true<br>- Update Fabric Loader to 0.12.9<br>- Upgrade Paper server to latest 1.18 <br>- Wait for mojang patches</p>&mdash; Minecraft@Home (@minecraftathome) <a href="https://twitter.com/minecraftathome/status/1469110749431803904?ref_src=twsrc%5Etfw">December 10, 2021</a></blockquote>
</figure>
<ul>
<li>
<p><a href="https://www.cyberkendra.com/2021/12/worst-log4j-rce-zeroday-dropped-on.html">Worst Apache Log4j RCE Zero day Dropped on Internet - Cyber Kendra</a></p>
</li>
<li>
<p><a href="https://www.lunasec.io/docs/blog/log4j-zero-day/">Log4Shell: RCE 0-day exploit found in log4j2, a popular Java logging package | LunaSec</a> : Steam や iCloud も対象なのか</p>
</li>
<li>
<p><a href="https://www.docker.com/blog/apache-log4j-2-cve-2021-44228/">Apache Log4j 2 CVE-2021-44228 - Docker Blog</a> : “Docker Official Images” で今回の脆弱性の影響を受けるものがリストアップされている</p>
</li>
<li>
<p><a href="https://blog.cloudflare.com/inside-the-log4j2-vulnerability-cve-2021-44228/">Inside the Log4j2 vulnerability (CVE-2021-44228)</a></p>
</li>
<li>
<p><a href="https://blog.f-secure.com/what-you-need-to-know-about-the-log4j-vulnerability-rocking-the-internet/">What you need to know about the Log4J vulnerability rocking the internet - F-Secure Blog</a></p>
</li>
<li>
<p><a href="https://msrc-blog.microsoft.com/2021/12/11/microsofts-response-to-cve-2021-44228-apache-log4j2/">Microsoft’s Response to CVE-2021-44228 Apache Log4j 2 – Microsoft Security Response Center</a></p>
</li>
<li>
<p><a href="https://www.cisa.gov/news/2021/12/11/statement-cisa-director-easterly-log4j-vulnerability">Statement from CISA Director Easterly on “Log4j” Vulnerability | CISA</a></p>
</li>
<li>
<p><a href="https://www.wired.com/story/log4j-log4shell/">The Log4J Vulnerability Will Haunt the Internet for Years | WIRED</a></p>
<ul>
<li><a href="https://www.schneier.com/blog/archives/2021/12/on-the-log4j-vulnerability.html">On the Log4j Vulnerability - Schneier on Security</a></li>
</ul>
</li>
<li>
<p><a href="https://piyolog.hatenadiary.jp/entry/2021/12/13/045541">Log4jの深刻な脆弱性CVE-2021-44228についてまとめてみた - piyolog</a></p>
</li>
<li>
<p><a href="https://forest.watch.impress.co.jp/docs/news/1373550.html">「Docker Desktop」が「Log4j」問題に対応 ～脆弱性スキャンツールを更新 - 窓の杜</a></p>
</li>
<li>
<p><a href="https://techcrunch.com/2021/12/10/apple-icloud-twitter-and-minecraft-vulnerable-to-ubiquitous-zero-day-exploit/">iCloud、ツイッター、マインクラフトなどに使われているオープンソースのログユーティリティにゼロデイ脆弱性が見つかる  |  TechCrunch Japan</a></p>
</li>
<li>
<p><a href="https://www.publickey1.jp/blog/21/javalog4j.html">広く使われているJavaライブラリ「Log4j」に深刻な脆弱性。速やかに確認と対策を － Publickey</a></p>
</li>
<li>
<p><a href="https://www.lac.co.jp/lacwatch/alert/20211213_002820.html">【注意喚起】Log4jの脆弱性を狙う攻撃を多数検知、至急対策を！ | セキュリティ対策のラック</a></p>
</li>
<li>
<p><a href="https://wired.jp/2021/12/12/log4j-flaw-hacking-internet/">システムの重要な基盤「Log4j」の脆弱性が、世界中に“破壊的”な影響を及ぼしている | WIRED.jp</a></p>
</li>
<li>
<p><a href="https://github.com/apache/logging-log4j2/commit/27972043b76c9645476f561c5adc483dec6d3f5d">LOG4J2-3211 - Remove Messge Lookups (#623) · apache/logging-log4j2@2797204 · GitHub</a> : 2.16.0 登場。メッセージ・ルックアップ機能をコードから削除した模様</p>
</li>
<li>
<p><a href="https://irof.hateblo.jp/entry/2021/12/10/180215">Log4j 2のバージョンアップのやりかた - 日々常々</a></p>
</li>
<li>
<p><a href="https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot">Log4J2 Vulnerability and Spring Boot</a></p>
</li>
<li>
<p><a href="https://www.scutum.jp/information/waf_tech_blog/2021/12/waf-blog-081.html">Log4jで話題になったWAFの回避/難読化とは何か - WAF Tech Blog ｜ クラウド型 WAFサービス Scutum 【スキュータム】</a></p>
</li>
<li>
<p><a href="https://www.sakura.ad.jp/information/announcements/2021/12/17/1968208792/">【重要】Apache Log4j ライブラリの脆弱性における当社サービスへの影響について | さくらインターネット</a></p>
</li>
<li>
<p><a href="https://gigazine.net/news/20211216-log4j-memes/">世界中を揺るがしたJavaライブラリの脆弱性・Log4Shellのネタ画像をまとめた「log4j memes」 - GIGAZINE</a></p>
</li>
<li>
<p><a href="https://www.lunasec.io/docs/blog/log4j-zero-day-severity-of-cve-2021-45046-increased/">Log4Shell Update: Severity Upgraded 3.7 -&gt; 9.0 for Second log4j Vulnerability (CVE-2021-45046) | LunaSec</a></p>
</li>
<li>
<p><a href="https://wired.jp/2021/12/18/log4j-log4shell-vulnerability-ransomware-second-wave/">「Log4j」の脆弱性によるセキュリティ危機には、さらに深刻な“第2波”がやってくる | WIRED.jp</a> : ransomware がこの脆弱性を利用してくるのはこれから，という予想</p>
</li>
<li>
<p><a href="https://www.imagazine.co.jp/log4j-8-nttdata/">Log4jの脆弱性を検証、NTTデータ先端技術がレポートを発表　～「脆弱性の悪用が可能なことを確認」 - アイマガジン｜i Magazine｜IS magazine</a></p>
</li>
<li>
<p><a href="https://newrelic.com/jp/blog/nerdlog/security-guidance-for-log4j">Apache Log4j の脆弱性に関連する New Relic のお客様向けセキュリティ案内 | New Relic</a></p>
</li>
</ul>
<h2>参考図書</h2>
<div class="hreview">
  <div class="photo"><a href="https://www.amazon.co.jp/dp/B07CKHR8C1?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1"><img src="https://m.media-amazon.com/images/I/4143qCJap5L._SL160_.jpg" width="123" alt="photo"></a></div>
  <dl>
    <dt class="item"><a class="fn url" href="https://www.amazon.co.jp/dp/B07CKHR8C1?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1">Spring Data JPAプログラミング入門</a></dt>
    <dd>溝口賢司 (著)</dd>
    <dd>秀和システム 2017-08-03 (Release 2018-04-23)</dd>
    <dd>Kindle版</dd>
    <dd>B07CKHR8C1 (ASIN)</dd>
    <dd>評価<abbr class="rating fa-sm" title="4">&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="far fa-star"></i></abbr></dd>
  </dl>
  <p class="description">JPA のお勉強用に購入。紙のほうはプレミアが付いてるっぽいが Kindle で買えるよ。固定レイアウトだからブラウザの Kindle Cloud Reader で読めるし。真面目に基本を押さえて書いていて分かりやすい。</p>
  <p class="powered-by">reviewed by <a href='#maker' class='reviewer'>Spiegel</a> on <abbr class="dtreviewed" title="2021-08-26">2021-08-26</abbr> (powered by <a href="https://affiliate.amazon.co.jp/assoc_credentials/home">PA-APIv5</a>)</p>
</div> <!-- Spring Data JPAプログラミング入門 -->
<div class="hreview">
  <div class="photo"><a href="https://www.amazon.co.jp/dp/4621303252?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1"><img src="https://m.media-amazon.com/images/I/41WZElZb9eL._SL160_.jpg" width="128" alt="photo"></a></div>
  <dl>
    <dt class="item"><a class="fn url" href="https://www.amazon.co.jp/dp/4621303252?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1">Effective Java 第3版</a></dt>
    <dd>Joshua Bloch (著), 柴田 芳樹 (翻訳)</dd>
    <dd>丸善出版 2018-10-30</dd>
    <dd>単行本（ソフトカバー）</dd>
    <dd>4621303252 (ASIN), 9784621303252 (EAN), 4621303252 (ISBN)</dd>
    <dd>評価<abbr class="rating fa-sm" title="4">&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="far fa-star"></i></abbr></dd>
  </dl>
  <p class="description">再勉強中。 Kindle 版のほうがちょっと安いが，勤務先でも使いたかったので紙の本にした。</p>
  <p class="powered-by">reviewed by <a href='#maker' class='reviewer'>Spiegel</a> on <abbr class="dtreviewed" title="2021-03-17">2021-03-17</abbr> (powered by <a href="https://affiliate.amazon.co.jp/assoc_credentials/home">PA-APIv5</a>)</p>
</div> <!-- Effective Java 第3版 -->
<div class="hreview">
  <div class="photo"><a href="https://www.amazon.co.jp/dp/B0893LQ5KY?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1"><img src="https://m.media-amazon.com/images/I/51VWsWP87dL._SL160_.jpg" width="100" alt="photo"></a></div>
  <dl>
    <dt class="item"><a class="fn url" href="https://www.amazon.co.jp/dp/B0893LQ5KY?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1">Spring Boot 2 入門: 基礎から実演まで</a></dt>
    <dd>原田 けいと (著), 竹田 甘地 (著), Robert Segawa (著)</dd>
    <dd> 2020-05-22 (Release 2020-05-22)</dd>
    <dd>Kindle版</dd>
    <dd>B0893LQ5KY (ASIN)</dd>
    <dd>評価<abbr class="rating fa-sm" title="4">&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="far fa-star"></i></abbr></dd>
  </dl>
  <p class="description">Spring Boot を勉強することになって急遽買った本。めっさ分かりやすかった。 PDF 版が欲しいくらい（笑） Spring Boot 3.2 対応にアップデートされていた。素敵！</p>
  <p class="powered-by">reviewed by <a href='#maker' class='reviewer'>Spiegel</a> on <abbr class="dtreviewed" title="2024-03-20">2024-03-20</abbr> (powered by <a href="https://affiliate.amazon.co.jp/assoc_credentials/home">PA-APIv5</a>)</p>
</div> <!-- Spring Boot 2 入門 -->
<div class="hreview">
  <div class="photo"><a href="https://www.amazon.co.jp/dp/B09HK66P5X?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1"><img src="https://m.media-amazon.com/images/I/41xgZhdHu7L._SL160_.jpg" width="125" alt="photo"></a></div>
  <dl>
    <dt class="item"><a class="fn url" href="https://www.amazon.co.jp/dp/B09HK66P5X?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1">Java言語で学ぶデザインパターン入門第3版</a></dt>
    <dd>結城 浩 (著)</dd>
    <dd>SBクリエイティブ 2021-11-12 (Release 2021-11-13)</dd>
    <dd>Kindle版</dd>
    <dd>B09HK66P5X (ASIN)</dd>
    <dd>評価<abbr class="rating fa-sm" title="5">&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i>&nbsp;<i class="fas fa-star"></i></abbr></dd>
  </dl>
  <p class="description">なんと！ 結城浩さんのデザパタ本の第3版が出た。古典的なデザインパターン23個はそのままに，最近の Java の言語仕様に合わせてコードが一新されている。
</p>
  <p class="powered-by">reviewed by <a href='#maker' class='reviewer'>Spiegel</a> on <abbr class="dtreviewed" title="2021-11-13">2021-11-13</abbr> (powered by <a href="https://affiliate.amazon.co.jp/assoc_credentials/home">PA-APIv5</a>)</p>
</div> <!-- Java言語で学ぶデザインパターン入門第3版 -->

</div></section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/remark/2021/12/new-kindle-paperwhite/">Kindle Paperwhite を新調した</a></div>
<div class="next-page"><a href="/remark/2021/12/more-bits/">『bit』誌の電子復刻と TechMag</a> &raquo;</div>
</nav>

<aside class="feedback" id='feedback'>
<h1>Feedback</h1>
<p>GitHub に<a href="https://github.com/spiegel-im-spiegel/github-pages-env/discussions">フィードバック用のディスカッションページ</a>を用意しました。
書き込みには GitHub のアカウントが必要ですが，お気軽にご利用ください。</p>
<p>他のフィードバック手段として Mastodon などの SNS や電子メールも利用できます。電子メールを利用する際の公開鍵は<a href="https://baldanders.info/profile/">プロフィール</a>から取得できます。</p>
</aside>
<footer>


<div class="userinfo">
	<div class="userinfo-avater">
		<a href="https://baldanders.info/profile/"><img src="https://text.baldanders.info/images/avatar.jpg" width="48" height="48" alt="avatar" id="logo"></a>
	</div>
	<div class="userinfo-info" id="maker">
		Text by <a href="https://baldanders.info/profile/" rel="cc:attributionURL" property="cc:attributionName">Spiegel</a>
		in <time property='dc:dateCopyrighted'>2021-12-11</time> (revised in 2022-05-04)
		<a rel='cc:license' href="https://creativecommons.org/licenses/by-sa/4.0/"><i class="fab fa-creative-commons"></i>&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;<i class="fab fa-creative-commons-sa"></i></a>
		<ul class="social"><li><a rel="me" href="https://github.com/spiegel-im-spiegel"><span class="github-color"><abbr title="GitHub"><i class="fab fa-github"></i></abbr></span></a></li><li><a rel="me" href="https://www.flickr.com/photos/spiegel/"><span class="flickr-color"><abbr title="Flickr"><i class="fab fa-flickr"></i></abbr></span></a></li><li><a rel="me" href="https://goark.fedicity.net/@spiegel"><span class="mastodon-color"><abbr title="Mastodon"><i class="fa-brands fa-mastodon"></i></abbr></span></a></li><li><a rel="me" href="https://bsky.app/profile/baldanders.info"><span class="bluesky-color"><abbr title="Bluesky"><i class="fa-brands fa-bluesky"></i></abbr></span></a></li><li><a rel="me" href="https://www.strava.com/athletes/122077389"><span class="strava-color"><abbr title="Strava"><i class="fa-brands fa-strava"></i></abbr></span></a></li><li><a rel="me" href="https://x.com/spiegel_2007"><span class="x-twitter-color"><abbr title="X (Twitter)"><i class="fab fa-x-twitter"></i></abbr></span></a></li></ul>
	</div>
</div>

<nav>
<ul class='cloud center'>
<li><a href='/about-feeds/'>Feeds</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/site-policy/'>Policy</a></li>
<li><a href='https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io'>Repository</a></li>
<li><a href='https://validator.w3.org/nu/?doc=https%3a%2f%2ftext.baldanders.info%2fremark%2f2021%2f12%2flog4j-vulnerability%2f&amp;showoutline=yes'>Debug</a></li>
</ul>
<ul class='cloud center'>
<li><a href='https://baldanders.info/'>Home</a></li>
<li><a href='https://photo.baldanders.info/'>Photos</a></li>
<li><a href='https://slide.baldanders.info/'>Slide</a></li>
<li><a href='https://zenn.dev/spiegel'>Zenn</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='https://gohugo.io/'>Hugo 0.154.2</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-baldanders-info
">Theme of Baldanders.info</a>.</li>
</ul>
</nav>
</footer>
</div>

</body>
</html>
