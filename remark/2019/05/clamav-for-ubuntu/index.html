<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.121.0">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/">
<script defer src="/fa/js/all.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=BIZ+UDGothic:wght@400;700&family=BIZ+UDMincho&family=Inconsolata:wght@400;700&family=Noto+Color+Emoji&family=Noto+Sans:wght@400;700&family=Noto+Serif&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/local-font.css" type='text/css'>
<link rel="stylesheet" href="/css/baldanders-info-dark.css" type='text/css'>

<link rel="alternate" href="https://text.baldanders.info/index.xml" type="application/rss+xml" title="text.Baldanders.info">
<link rel="alternate" href="https://text.baldanders.info/index.json" type="application/json" title="text.Baldanders.info">
<meta name="google-site-verification" content="jTjBCslPtf8gwVatiY-GDgGv7pV5csa8aUOw1MRPUD4">
<title>Ununtu に ClamAV を導入する | text.Baldanders.info</title>
<meta property="og:title" content="Ununtu に ClamAV を導入する">
<meta name="description" content="こんなに面倒臭いとは思わなかった。もうしばらく運用してから評価してみるですよ。">
<meta property="og:description" content="こんなに面倒臭いとは思わなかった。もうしばらく運用してから評価してみるですよ。">
<meta property="og:image" content="https://text.baldanders.info/images/attention/kitten.jpg">
<meta name="author" content="Spiegel">


<meta name="twitter:card" content="summary">
<link rel="me" href="https://fedibird.com/@spiegel">
<meta name="keywords" content="security, malware, risk, management, tools, linux, ubuntu, install">
<link rel='prev' href='https://text.baldanders.info/remark/2019/05/gestaltzerfall-of-reiwa/' title='「令」のゲシュタルト崩壊' />
<link rel='next' href='https://text.baldanders.info/remark/2019/05/bookmarks-for-dotnet/' title='.NET 統合に関するブックマーク' />

<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"@id": "https://text.baldanders.info/",
	"inLanguage": "ja",
	"name": "text.Baldanders.info",
    "url": "https://text.baldanders.info/",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"image": "https://text.baldanders.info/images/attention/site.jpg",
	"description": "帰ってきた「しっぽのさきっちょ」"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Organization",
	"@id": "https://text.baldanders.info/#org",
	"name": "Spiegel",
	"logo": {
		"@type": "ImageObject",
		"@id": "https://text.baldanders.info/#logo",
		"url": "https://text.baldanders.info/images/avatar.jpg"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Person",
	"@id": "https://text.baldanders.info/#maker",
	"name": "Spiegel",
	"url": "https://baldanders.info/profile/",
	"image": "https://text.baldanders.info/images/avatar.jpg"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Blog",
	"@id": "https://text.baldanders.info/remark/",
	"url": "https://text.baldanders.info/remark/",
	"inLanguage": "ja",
	"name": "しっぽのさきっちょ",
	"description": "帰ってきた「しっぽのさきっちょ」。とりとめのない四方山話。",
	"image": "https://text.baldanders.info/images/attention/remark.jpg",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BreadcrumbList",
	"@id": "https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/#breadcrumb-list",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"item": {
				"@id": "https://text.baldanders.info/"
			}
		},
		{
			"@type": "ListItem",
			"position": 2,
			"item": {
				"@id": "https://text.baldanders.info/remark/"
			}
		}
	]
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BlogPosting",
	"@id": "https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/",
	"url": "https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/",
	"mainEntityOfPage": "https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/",
	"inLanguage": "ja",
	"name": "Ununtu に ClamAV を導入する",
	"description": "こんなに面倒臭いとは思わなかった。もうしばらく運用してから評価してみるですよ。",
	"headline": "こんなに面倒臭いとは思わなかった。もうしばらく運用してから評価してみるですよ。",
	"keywords": "security, malware, risk, management, tools, linux, ubuntu, install",
	"image": "https://text.baldanders.info/images/attention/kitten.jpg",
	"datePublished": "2019-05-06T08:39:20+00:00",
	"dateModified": "2019-07-25T13:49:55+00:00",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"license": "https://creativecommons.org/licenses/by-sa/4.0/"
}
</script>
</head>
<body>

<div id='container'>

<main>
<nav class="breadcrumb">
<a href="https://text.baldanders.info/">text.Baldanders.info</a> &raquo; <a href="/remark/">しっぽのさきっちょ</a>
</nav>
<article>
<h1>Ununtu に ClamAV を導入する</h1>
<nav class="tags">
	<div><a href='/tags/'>Tags</a>: #<a href="/tags/install/">install</a> #<a href="/tags/linux/">linux</a> #<a href="/tags/malware/">malware</a> #<a href="/tags/management/">management</a> #<a href="/tags/risk/">risk</a> #<a href="/tags/security/">security</a> #<a href="/tags/tools/">tools</a> #<a href="/tags/ubuntu/">ubuntu</a></div>
	<div class="cloud">
		<span class="share-color" title="Share this entry"><i class="fas fa-share-square"></i></span>&nbsp;:
		&nbsp;<a href="https://getpocket.com/edit?url=https%3a%2f%2ftext.baldanders.info%2fremark%2f2019%2f05%2fclamav-for-ubuntu%2f&amp;title=Ununtu%20%e3%81%ab%20ClamAV%20%e3%82%92%e5%b0%8e%e5%85%a5%e3%81%99%e3%82%8b" target="_blank"><span class="pocket-color"><i class="fab fa-get-pocket" aria-hidden="true"></i></span></a>
		&nbsp;<a href="http://www.facebook.com/share.php?u=https%3a%2f%2ftext.baldanders.info%2fremark%2f2019%2f05%2fclamav-for-ubuntu%2f" target="_blank"><span class="facebook-color"><i class="fab fa-facebook-square" aria-hidden="true"></i></span></a>
		&nbsp;<a href="http://twitter.com/share?text=Ununtu%20%e3%81%ab%20ClamAV%20%e3%82%92%e5%b0%8e%e5%85%a5%e3%81%99%e3%82%8b&amp;url=https%3a%2f%2ftext.baldanders.info%2fremark%2f2019%2f05%2fclamav-for-ubuntu%2f" target="_blank"><span class="twitter-color"><i class="fab fa-twitter-square" aria-hidden="true"></i></span></a>
		&nbsp;<a href="https://donshare.net/share.html?text=Ununtu%20%e3%81%ab%20ClamAV%20%e3%82%92%e5%b0%8e%e5%85%a5%e3%81%99%e3%82%8b+by+@spiegel%40fedibird.com+https%3a%2f%2ftext.baldanders.info%2fremark%2f2019%2f05%2fclamav-for-ubuntu%2f" target="_blank"><span class="mastodon-color"><i class="fa-brands fa-mastodon"></i></span></a>
	</div>
</nav>
<nav class="history">History in
  <a href="https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io/commits/master/remark/2019/05/clamav-for-ubuntu/index.html">GitHub Page</a>
</nav>

<section><div>
<div class="noextension">
<a href="https://baldanders.info/public-domain-locked/" title="Public Domain Locked... | Baldanders.info"><img src="/images/Locked-150.png" alt="no extension" width="150" /></a>
</div>
<p><a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> を <a href="https://www.ubuntu.com/" title="The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu">Ubuntu</a> に導入したのだが，思いのほか面倒臭かったので，覚え書きとして記しておく。</p>
<h2><a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> をインストールする</h2>
<p><a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> のインストール自体は APT (Advanced Package Tool) で簡単にできる。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ sudo apt install clamav clamav-daemon
</span></span></code></pre></div><p>なお <code>clamav-daemon</code> は <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> をサービス化するためのパッケージである。</p>
<p>現時点（2019年5月）で <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> の最新は 0.101.x なのだが APT で提供されているバージョンは 0.100.x の古いバージョンのようだ。
一応，以下の脆弱性への対応はしてあるみたいだが</p>
<ul>
<li><a href="https://blog.clamav.net/2019/03/clamav-01012-and-01003-patches-have.html">ClamAV® blog: ClamAV 0.101.2 and 0.100.3 patches have been released!</a></li>
</ul>
<p>このバージョンの古さは後々に影響を及ぼすかもしれない。
Debian には最新の<a href="https://packages.debian.org/source/unstable/clamav">ソースパッケージがある</a>ようだが，セキュリティ製品だしソースコードからビルドするのは流石に&hellip;</p>
<h2>データベースを更新する</h2>
<p>まずは手動でデータベースを更新する。</p>
<p>設定ファイル <code>/etc/clamav/freshclam.conf</code> から <code>NotifyClamd</code> の行をコメントアウトした上で <code>freshclam</code> コマンドを実行する。
コマンドラインで書くとこんな感じ。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ sudo systemctl stop clamav-freshclam
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ sudo sed -i -e &#34;s/^NotifyClamd/#NotifyClamd/g&#34; /etc/clamav/freshclam.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ sudo freshclam
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; ClamAV update process started at Sun May  5 13:36:34 2019
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; ^Your ClamAV installation is OUTDATED!
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; ^Local version: 0.100.3 Recommended version: 0.101.2
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; DON&#39;T PANIC! Read https://www.clamav.net/documents/upgrading-clamav
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; main.cvd is up to date (version: 58, sigs: 4566249, f-level: 60, builder: sigmgr)
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; daily.cvd is up to date (version: 25439, sigs: 1562310, f-level: 63, builder: raynman)
</span></span><span class="line"><span class="cl">Sun May  5 13:36:34 2019 -&gt; bytecode.cvd is up to date (version: 328, sigs: 94, f-level: 63, builder: neo)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ sudo sed -i -e &#34;s/^#NotifyClamd/NotifyClamd/g&#34; /etc/clamav/freshclam.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ sudo systemctl start clamav-freshclam
</span></span></code></pre></div><p>データベースの更新自体はうまく行ってるようだが <code>OUTDATED</code> とか言われてるよ <code>orz</code></p>
<p>&hellip;見なかったことにしよう。</p>
<p>なお <code>clamav-freshclam.service</code> の状態を確認するには以下のコマンドを起動すればよい。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ sudo systemctl status clamav-freshclam.service
</span></span></code></pre></div><h2>手動で動作確認</h2>
<p>Malware 対策ソフト用の無害なウイルス（笑）があるので，これを使って <code>clamscan</code> コマンドで動作確認する。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ curl http://www.eicar.org/download/eicar.com -O
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ clamscan --infected --remove ./eicar.com
</span></span><span class="line"><span class="cl">./eicar.com: Eicar-Test-Signature FOUND
</span></span><span class="line"><span class="cl">./eicar.com: Removed.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">----------- SCAN SUMMARY -----------
</span></span><span class="line"><span class="cl">Known viruses: 6120222
</span></span><span class="line"><span class="cl">Engine version: 0.100.3
</span></span><span class="line"><span class="cl">Scanned directories: 0
</span></span><span class="line"><span class="cl">Scanned files: 1
</span></span><span class="line"><span class="cl">Infected files: 1
</span></span><span class="line"><span class="cl">Data scanned: 0.00 MB
</span></span><span class="line"><span class="cl">Data read: 0.00 MB (ratio 0.00:1)
</span></span><span class="line"><span class="cl">Time: 20.181 sec (0 m 20 s)
</span></span></code></pre></div><p>よーし，うむうむ，よーし。</p>
<h2>Scan On-Access の設定</h2>
<p>ファイルアクセスへの常時監視を行う Scan On-Access を有効にするために <code>/etc/clamav/clamd.conf</code> ファイルを修正する。
本当は <code>ScanOnAccess</code> を <code>true</code> にするだけでいい筈なのだが<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>，以下のコマンドで</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ sudo systemctl status clamav-daemon.service
</span></span></code></pre></div><p>サービスの状態を確認すると以下のログを吐いて停止していた。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ERROR: ScanOnAccess: fanotify_init failed: Operation not permitted
</span></span><span class="line"><span class="cl">ScanOnAccess: clamd must be started by root
</span></span></code></pre></div><p><code>/etc/clamav/clamd.conf</code> ファイルの他の部分にも手を入れる必要があるようだ。
以下に変更・追記が必要な項目を挙げておく。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line hl"><span class="cl">LocalSocketGroup root
</span></span><span class="line hl"><span class="cl">User root
</span></span><span class="line hl"><span class="cl">ScanOnAccess true
</span></span><span class="line"><span class="cl">OnAccessMountPath /home/username
</span></span><span class="line"><span class="cl">OnAccessExcludePath /home/username/nocheck
</span></span><span class="line"><span class="cl"># VirusEvent /usr/local/bin/clamd-response
</span></span><span class="line"><span class="cl">OnAccessPrevention false
</span></span><span class="line"><span class="cl">OnAccessExtraScanning true
</span></span><span class="line"><span class="cl">OnAccessExcludeUID 0</span></span></code></pre></div>
<p>最初の3行が変更が必要な項目，以降が追加項目である。
<code>OnAccessMountPath</code> でスキャン対象のディレクトリを <code>OnAccessExcludePath</code> で除外対象を指定する。
どちらも複数指定できる。</p>
<h3>VirusEvent が効かない！？</h3>
<p>上の設定で <code>VirusEvent</code> をコメントアウトしているが，どうやら 0.100 では Scan On-Access を有効にしても <code>VirusEvent</code> の設定が効かないようなのだ（0.101 はどうなんだろう）。</p>
<p><code>VirusEvent</code> には malware を発見した際に起動するコマンドを指定するのだが，これが動かないってかなり致命的じゃないのか？</p>
<p>次善の策として以下のスクリプトを書いて cron で回すことにした。
Malware を検出すれば画面に通知が表示されるはずである。
cron で回してるだけなのでタイムラグが発生する。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">logfile</span><span class="o">=</span><span class="s2">&#34;/home/username/.local/log/clamd-found.log&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> -r <span class="nv">$logfile</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nv">PRV_CNT</span><span class="o">=</span><span class="sb">`</span>cat <span class="nv">$logfile</span> <span class="p">|</span> wc -l<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">  <span class="nv">PRV_CNT</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="nv">CNT</span><span class="o">=</span><span class="sb">`</span>grep ScanOnAccess /var/log/syslog <span class="p">|</span> grep FOUND <span class="p">|</span> grep -v <span class="s2">&#34;(null)&#34;</span> <span class="p">|</span> tee <span class="nv">$logfile</span> <span class="p">|</span> wc -l<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$CNT</span> !<span class="o">=</span> <span class="nv">$PRV_CNT</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nv">DATESTR</span><span class="o">=</span><span class="sb">`</span>date<span class="sb">`</span>
</span></span><span class="line"><span class="cl">  sudo -u username <span class="nv">DISPLAY</span><span class="o">=</span>:0 <span class="nv">DBUS_SESSION_BUS_ADDRESS</span><span class="o">=</span>unix:path<span class="o">=</span>/run/user/1000/bus /usr/bin/notify-send -t <span class="m">10000</span> <span class="s2">&#34;</span><span class="nv">$DATESTR</span><span class="s2"> Virus Found </span><span class="nv">$CNT</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>ダサいけどしょうがない。
ちなみに <code>username</code> の部分には cron を回すログインユーザ名を， <code>1000</code> の部分にはそのユーザ ID をセットする<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>。</p>
<h2>もう一度，動作確認</h2>
<p><code>clamav-daemon.service</code> がうまく機能するか試してみよう。</p>
<p>先ほどの無害なウイルス（笑）をダウンロードする。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ curl http://www.eicar.org/download/eicar.com -O
</span></span></code></pre></div><p>これでログ等を見て検知しているか確認する（上の通知も出れば完璧）。
確認できたらとっとと削除すること。</p>
<p>今回は <code>clamdscan</code> のほうを使ってみよう。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ clamdscan --infected --remove ./eicar.com
</span></span><span class="line"><span class="cl">/home/username/work/./eicar.com: Eicar-Test-Signature FOUND
</span></span><span class="line"><span class="cl">/home/username/work/./eicar.com: Removed.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">----------- SCAN SUMMARY -----------
</span></span><span class="line"><span class="cl">Infected files: 1
</span></span><span class="line"><span class="cl">Time: 0.365 sec (0 m 0 s)
</span></span></code></pre></div><p>圧倒的に速くなった。
まぁ，バックグラウンドにサービスがいるんだから当たり前だが（笑）</p>
<h2>Thunderbird と連携したかったが&hellip;</h2>
<p>MUA である Thunderbird と連携できるアドオンがあると聞いたのだが</p>
<ul>
<li><a href="https://addons.thunderbird.net/ja/thunderbird/addon/clamdrib-lin/">clamdrib LIN :: Thunderbird 向けアドオン</a></li>
</ul>
<p>うまくインストールできない。</p>
<p><a href="https://addons.thunderbird.net/ja/thunderbird/addon/clamdrib-lin/" title="clamdrib LIN :: Thunderbird 向けアドオン">clamdrib LIN</a> の最新バージョンは2017年のもので最近のバージョン 60 以降には対応してないっぽい（互換性チェック回避のオプションも試したがうまく行かなかった）。
諦めるしかないようだ。</p>
<p>こんなんばっかだな ＞ <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a></p>
<h2>「ウイルス対策ソフト」は必要か？</h2>
<p>なんだか知らないが「Linux にウイルス対策ソフトは必要か？」などという頭の悪い議論があるそうで，しかも「必要ない」という人の主張は「Linux ユーザは Windows や macOS に比べて規模が小さいから狙われにくい」という，これまた頭が悪いとしか言いようがないものらしい。</p>
<p>「ウイルス」という表現は古臭くて的を得ていないので，この記事では色々ひっくるめて malware (malicious software) という表現に統一させてもらうが，ぶっちゃけて言うなら使っている OS にかかわらず「<strong>ユーザレベルでは malware 対策はセキュリティ管理の中核ではない</strong>」というのが多分正しい。</p>
<p>じゃあ malware 対策は必要ないのかと言えば「さにあらず」で，しかしそういったものは外部化され不可視になっている。
今どきの言葉で言うなら “Security as a Service” とでもいうような状況である。
そしてそのプラットフォーム OS として Linux 等のセキュリティ要件はむしろ高まっていると言えるだろう。
今回 <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> を触ってみて感じたことだが，一般ユーザにとって <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> がちょっと残念な感じになっているのはサーバ用途に最適化されつつあるからではないかと思うのだ。</p>
<p>セキュリティのトレンドは「防衛」中心から「監視」中心にシフトしていて，単純に malware をバラ撒いただけではすぐに検知され対策されてしまう。
故に攻撃側も時間をかけてでも密やかに確実にターゲットを追い詰める social engineering を駆使した各種ターゲティング攻撃へとシフトしている。</p>
<p>Phishing メールやそれに含まれる malware 検知などはサービスプロバイダが（有料のものも含めて）やってくれるし， Web についても Phishing サイトやマイニング・コード等を含んだサイトはブラウザレベルでかなりいい感じにブロックできるようになりつつある<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>。
そういう意味で私にとって malware 対策ソフトは「うっかり転んだときのための少額保険」みたいなもので，それ以外ではあまり出しゃばって欲しくなかったりする。</p>
<p>実際にそれまで使ってた Windows 7 でも “Microsoft Security Essentials” で必要十分な性能だったし <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> でも同程度の性能を満たしていれば，今回はそれでよかったのだ。
それがこんなに面倒臭いとは思わなかった。</p>
<p>かといって malware 対策ソフトそのものに金銭は払いたくないし<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup>，もうしばらく運用してから評価してみるですよ。</p>
<h2>ブックマーク</h2>
<ul>
<li>
<p><a href="https://www.tecmint.com/best-antivirus-programs-for-linux/">The 8 Best Free Anti-Virus Programs for Linux</a></p>
<ul>
<li><a href="https://news.mynavi.jp/article/20170420-a074/">Linux向けアンチウイルスソフト8選 | マイナビニュース</a></li>
</ul>
</li>
<li>
<p><a href="http://clamav-jp.osdn.jp/jdoc/clamav.html">Clam Antivirusに関するメモ</a></p>
</li>
<li>
<p><a href="https://help.ubuntu.com/community/ClamAV">ClamAV - Community Help Wiki</a></p>
</li>
<li>
<p><a href="https://hnakamur.github.io/blog/2018/05/21/setup-clamav-on-ubuntu-mate-18.04-lts/">ClamAVをUbuntu MATE 18.04 LTSにセットアップ</a></p>
</li>
<li>
<p><a href="https://lab4ict.com/system/archives/934">Ubuntu 18.04 LTS DesktopでClamAVによるウィルスチェックを実行 – LAB4ICT</a></p>
</li>
<li>
<p><a href="https://wiki.archlinux.org/index.php/ClamAV">ClamAV - ArchWiki</a></p>
</li>
<li>
<p><a href="https://www.sophos.com/en-us/products/free-tools/sophos-antivirus-for-linux.aspx">Free Linux Malware Scanner | Lightweight Agent for Linux Malware Detection and Removal | Sophos</a> : <a href="https://www.clamav.net/" title="ClamavNet">ClamAV</a> がダメそうならこっちにする（笑）</p>
</li>
<li>
<p><a href="https://qiita.com/gano/items/802519add83c524e3019">Ubuntu16.04(さくらVPS)で１からcronの設定をし、pythonプログラムを定期実行する - Qiita</a></p>
</li>
</ul>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>サービスのリスタートには <code>sudo systemctl restart clamav-daemon.service</code> とすればよい。&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>ユーザ ID が分からない場合は <code>id username</code> とコマンドを打てば分かるだろう。&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>はっきり言ってフェイク・ニュースなんかより Phishing ページなどセキュリティ・リスクの高いコンテンツに対する監視の方にもっとリソースを割いてほしいのだけど。かといって中間車攻撃で暗号通信を覗き見るなんてのは論外だが。&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p>Android 端末には <a href="https://www.f-secure.com/en/home/products/freedome">F-Secure 社の FREEDOME</a> を入れている。 FREEDOME 自体は VPN ソフトだが malware 対策機能も付いていて追跡コードもある程度ブロックしてくれる優れもの。実はこれの Linux 版があれば買ってもよかったのだがなかったのだ。仮想ネットワークについては I2P を試してみるか，と思っていたりする。&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

</div></section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/remark/2019/05/gestaltzerfall-of-reiwa/">「令」のゲシュタルト崩壊</a></div>
<div class="next-page"><a href="/remark/2019/05/bookmarks-for-dotnet/">.NET 統合に関するブックマーク</a> &raquo;</div>
</nav>

<aside class="feedback" id='feedback'>
<h1>Feedback</h1>
<p>GitHub に<a href="https://github.com/spiegel-im-spiegel/github-pages-env/discussions">フィードバック用のディスカッションページ</a>を用意しました。
書き込みには GitHub のアカウントが必要ですが，お気軽にご利用ください。</p>
<p>他のフィードバック手段として Mastodon などの SNS や電子メールも利用できます。電子メールを利用する際の公開鍵は<a href="https://baldanders.info/profile/">プロフィール</a>から取得できます。</p>
</aside>
<footer>


<div class="userinfo">
	<div class="userinfo-avater">
		<a href="https://baldanders.info/profile/"><img src="https://text.baldanders.info/images/avatar.jpg" width="48" height="48" alt="avatar" id="logo"></a>
	</div>
	<div class="userinfo-info" id="maker">
		Text by <a href="https://baldanders.info/profile/" rel="cc:attributionURL" property="cc:attributionName">Spiegel</a>
		in <time property='dc:dateCopyrighted'>2019-05-06</time> (revised in 2019-07-25)
		<a rel='cc:license' href="https://creativecommons.org/licenses/by-sa/4.0/"><i class="fab fa-creative-commons"></i>&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;<i class="fab fa-creative-commons-sa"></i></a>
		<ul class="social"><li><a rel="me" href="https://github.com/spiegel-im-spiegel"><span class="github-color"><i class="fab fa-github"></i></span></a></li><li><a rel="me" href="https://www.flickr.com/photos/spiegel/"><span class="flickr-color"><i class="fab fa-flickr"></i></span></a></li><li><a rel="me" href="https://fedibird.com/@spiegel"><span class="mastodon-color"><i class="fa-brands fa-mastodon"></i></span></a></li></ul>
	</div>
</div>

<nav>
<ul class='cloud center'>
<li><a href='/about-feeds/'>Feeds</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/site-policy/'>Policy</a></li>
<li><a href='https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io'>Repository</a></li>
<li><a href='https://validator.w3.org/nu/?doc=https%3a%2f%2ftext.baldanders.info%2fremark%2f2019%2f05%2fclamav-for-ubuntu%2f&amp;showoutline=yes'>Debug</a></li>
</ul>
<ul class='cloud center'>
<li><a href='https://baldanders.info/'>Home</a></li>
<li><a href='https://photo.baldanders.info/'>Photos</a></li>
<li><a href='https://slide.baldanders.info/'>Slide</a></li>
<li><a href='https://zenn.dev/spiegel'>Zenn</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='https://gohugo.io/'>Hugo 0.121.0</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-baldanders-info
">Theme of Baldanders.info</a>.</li>
</ul>
</nav>
</footer>
</div>

</body>
</html>
