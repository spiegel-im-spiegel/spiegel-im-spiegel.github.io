<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.15-DEV" />
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link href='//fonts.googleapis.com/css?family=Noto+Serif%7cNoto+Sans%7cInconsolata%3a400,700' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/earlyaccess/notosansjapanese.css' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/cc-icons/1.2.1/css/cc-icons.min.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/text-baldanders.css">
<link rel="stylesheet" href="/fonts/ipa-aozora.css">
<link rel="stylesheet" href="/css/addon.css">
<link rel="stylesheet" href="/highlightjs/styles/github.css">
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&amp;locale=ja"></script>
<script>
  MathJax.Hub.Config({
    TeX: {
      extensions: ["autoload-all.js"],
      equationNumbers: { autoNumber: "all" }
    },
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      processEscapes: true
    },
    "HTML-CSS": {
      matchFontHeight: false,
      preferredFont: null,
      webFont: "TeX"
    },
    displayAlign: "left",
    displayIndent: "2em"
  });
</script>
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="text.Baldanders.info">

<title>インストールから Hello World まで — ゼロから始める Hugo | text.Baldanders.info</title>
<meta name="description" content="自サイトのブログ機能を Hugo で外出しにする作業を行うにあたって，いろいろ試しながら作業している。ここではその時のメモを公開する。">
<link rel='prev' href='http://text.baldanders.info/hugo/bookmark/' title='Hugo に関するブックマーク' />
<link rel='next' href='http://text.baldanders.info/hugo/section/' title='Categories, Tags そして Section' />
</head>
<body>


<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script src='//platform.twitter.com/widgets.js'></script>


<div id='container'>
<header>
<div id="sitetitle"><a href="http://text.baldanders.info/">text.Baldanders.info</a> <a href='/index.xml' title='Feed'><i class='fa fa-rss'></i></a></h1>
<p>帰ってきた「しっぽのさきっちょ」</p>
</header>


<main>
<article itemscope itemtype='http://schema.org/BlogPosting' itemref='maker'>
<h1 itemprop='name'>インストールから Hello World まで — <a href="/hugo">ゼロから始める Hugo</a></h1>
<nav class="tags"><div><a href="/tags">Tags</a>: <a href="/tags/hugo">#hugo</a> <a href="/tags/install">#install</a> <a href="/tags/helloworld">#helloworld</a></div></nav>

<section>


<p>（初出： <a href="http://qiita.com/spiegel-im-spiegel/items/eac7bf2a3c0fc19afcbf">ゼロから始める Hugo — インストールから Hello World まで - Qiita</a>）</p>

<p><a href="http://www.baldanders.info/spiegel/log2/000870.shtml">私の本家サイトのブログ機能を外出しにする作業</a>を行うにあたり，ツールとしては <a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> を使うことにしたのだが，初めて使うツールなので，いろいろ試しながら作業している。
ここではその時のメモを公開する。</p>

<h2 id="install:8a07c3dae13f18d0c06cf5f9e482b173">Hugo のインストール</h2>

<p><a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> の実行モジュールは公式サイトから取得できるのだが Go 言語環境のある方は是非 <code>go get</code> から取得することをお勧めする。
<a href="https://github.com/spf13/hugo">Hugo の repository</a> はサイトのドキュメントのビルド環境も同梱されているため色々と参考になる。</p>

<p>なお <a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> では非常に多くのパッケージを利用していて，取得の際には git の他に Mercurial が必要である（参照： 「<a href="http://qiita.com/spiegel-im-spiegel/items/a52a47942fd3946bb583">はじめての Go 言語 (on Windows) その3</a>」）。</p>

<pre><code>C:\workspace&gt;mkdir hugo

C:\workspace&gt;cd hugo

C:\workspace\hugo&gt;SET GOPATH=C:\workspace\hugo

C:\workspace\hugo&gt;go get -v github.com/spf13/hugo
github.com/spf13/hugo (download)
github.com/kardianos/osext (download)
github.com/spf13/afero (download)
github.com/spf13/cast (download)
github.com/spf13/jwalterweatherman (download)
github.com/spf13/cobra (download)
github.com/cpuguy83/go-md2man (download)
github.com/russross/blackfriday (download)
github.com/shurcooL/sanitized_anchor_name (download)
github.com/inconshreveable/mousetrap (download)
github.com/spf13/pflag (download)
github.com/spf13/fsync (download)
github.com/PuerkitoBio/purell (download)
github.com/opennota/urlesc (download)
github.com/miekg/mmark (download)
github.com/BurntSushi/toml (download)
Fetching https://gopkg.in/yaml.v2?go-get=1
Parsing meta tags from https://gopkg.in/yaml.v2?go-get=1 (status code 200)
get &quot;gopkg.in/yaml.v2&quot;: found meta tag main.metaImport{Prefix:&quot;gopkg.in/yaml.v2&quot;, VCS:&quot;git&quot;, RepoRoot:&quot;https://gopkg.in/yaml.v2&quot;} at https://gopkg.in/yaml.v2?go-get=1
gopkg.in/yaml.v2 (download)
github.com/spf13/viper (download)
github.com/kr/pretty (download)
github.com/kr/text (download)
github.com/magiconair/properties (download)
github.com/mitchellh/mapstructure (download)
Fetching https://golang.org/x/text/transform?go-get=1
Parsing meta tags from https://golang.org/x/text/transform?go-get=1 (status code 200)
get &quot;golang.org/x/text/transform&quot;: found meta tag main.metaImport{Prefix:&quot;golang.org/x/text&quot;, VCS:&quot;git&quot;, RepoRoot:&quot;https://go.googlesource.com/text&quot;} at https://golang.org/x/text/transform?go-get=1
get &quot;golang.org/x/text/transform&quot;: verifying non-authoritative meta tag
Fetching https://golang.org/x/text?go-get=1
Parsing meta tags from https://golang.org/x/text?go-get=1 (status code 200)
golang.org/x/text (download)
Fetching https://golang.org/x/text/unicode/norm?go-get=1
Parsing meta tags from https://golang.org/x/text/unicode/norm?go-get=1 (status code 200)
get &quot;golang.org/x/text/unicode/norm&quot;: found meta tag main.metaImport{Prefix:&quot;golang.org/x/text&quot;, VCS:&quot;git&quot;, RepoRoot:&quot;https://go.googlesource.com/text&quot;} at https://golang.org/x/text/unicode/norm?go-get=1
get &quot;golang.org/x/text/unicode/norm&quot;: verifying non-authoritative meta tag
bitbucket.org/pkg/inflect (download)
github.com/dchest/cssmin (download)
github.com/eknkc/amber (download)
github.com/yosssi/ace (download)
github.com/spf13/nitro (download)
github.com/gorilla/websocket (download)
Fetching https://gopkg.in/fsnotify.v1?go-get=1
Parsing meta tags from https://gopkg.in/fsnotify.v1?go-get=1 (status code 200)
get &quot;gopkg.in/fsnotify.v1&quot;: found meta tag main.metaImport{Prefix:&quot;gopkg.in/fsnotify.v1&quot;, VCS:&quot;git&quot;, RepoRoot:&quot;https://gopkg.in/fsnotify.v1&quot;} at https://gopkg.in/fsnotify.v1?go-get=1
gopkg.in/fsnotify.v1 (download)
github.com/shurcooL/sanitized_anchor_name
github.com/spf13/afero
github.com/inconshreveable/mousetrap
github.com/spf13/hugo/bufferpool
github.com/kr/text
github.com/kardianos/osext
github.com/spf13/jwalterweatherman
github.com/spf13/pflag
github.com/russross/blackfriday
github.com/opennota/urlesc
github.com/BurntSushi/toml
github.com/PuerkitoBio/purell
gopkg.in/yaml.v2
github.com/spf13/cast
github.com/kr/pretty
github.com/magiconair/properties
github.com/spf13/fsync
github.com/cpuguy83/go-md2man/md2man
github.com/spf13/hugo/hugofs
github.com/mitchellh/mapstructure
golang.org/x/text/transform
bitbucket.org/pkg/inflect
github.com/dchest/cssmin
github.com/miekg/mmark
github.com/eknkc/amber/parser
github.com/spf13/cobra
github.com/yosssi/ace
golang.org/x/text/unicode/norm
github.com/spf13/nitro
github.com/spf13/hugo/parser
github.com/spf13/viper
github.com/eknkc/amber
github.com/gorilla/websocket
github.com/spf13/hugo/utils
gopkg.in/fsnotify.v1
github.com/spf13/hugo/transform
github.com/spf13/hugo/watcher
github.com/spf13/hugo/livereload
github.com/spf13/hugo/helpers
github.com/spf13/hugo/source
github.com/spf13/hugo/target
github.com/spf13/hugo/tpl
github.com/spf13/hugo/hugolib
github.com/spf13/hugo/create
github.com/spf13/hugo/commands
github.com/spf13/hugo

C:\workspace\hugo&gt;bin\hugo.exe version
Hugo Static Site Generator v0.15-DEV BuildDate: 2015-09-05T13:45:44+09:00
</code></pre>

<p>作成した実行モジュールは，作成された場所に <code>PATH</code> を通すか， <code>PATH</code> の通った場所にコピーすればよい。</p>

<h2 id="env:8a07c3dae13f18d0c06cf5f9e482b173">作業環境の作成</h2>

<p><a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> 用の作業環境を作るには <code>hugo new site</code> コマンドを起動する。</p>

<pre><code>C:&gt;hugo new site C:\hugo-env\www

C:&gt;cd C:\hugo-env\www

C:\hugo-env\www&gt;tree /f .
C:\HUGO-ENV\WWW
│  config.toml
│
├─archetypes
├─content
├─data
├─layouts
└─static
</code></pre>

<p>ここで <code>config.toml</code> はサイト設定用のファイルである。初期値は以下のようになっている。</p>

<pre><code class="language-toml:config.toml">baseurl = &quot;http://replace-this-with-your-hugo-site.com/&quot;
languageCode = &quot;en-us&quot;
title = &quot;My New Hugo Site&quot;
</code></pre>

<p>なお， TOML 形式のファイルの読み書きは以下が参考になる。</p>

<ul>
<li><a href="http://qiita.com/b4b4r07/items/77c327742fc2256d6cbe">設定ファイル記述言語 TOML - Qiita</a></li>
</ul>

<p>この中で必須なのは baseurl のみで，これがないとビルドエラーになる（ただし <code>--baseUrl</code> オプションを付ければ回避できる）。
今回は <code>config.toml</code> を以下のようにセットする。</p>

<pre><code class="language-toml:config.toml">baseurl = &quot;http://hello.example.com/&quot;
languageCode = &quot;ja&quot;
title = &quot;Hello World!&quot;
</code></pre>

<p>では，いきなりビルドしてみよう（えー）</p>

<pre><code>C:\hugo-env\www&gt;hugo
0 draft content
0 future content
0 pages created
0 paginator pages created
0 categories created
0 tags created
in 7 ms

C:\hugo-env\www&gt;tree /f .
C:\HUGO-ENV\WWW
│  config.toml
│
├─archetypes
├─content
├─data
├─layouts
├─public
│      404.html
│      index.html
│      index.xml
│      sitemap.xml
│
└─static
</code></pre>

<p><code>public</code> フォルダとその下に4つのファイルが作成されている（ちなみに出力先は <code>-d</code> または <code>--destination</code> オプションで変更できる）。
現時点では <code>404.html</code> と <code>index.html</code> は空。</p>

<p><code>index.xml</code> は feed 用のファイルで RSS 2.0 形式で書かれている（何故か atom の語彙を使っている）。</p>

<pre><code class="language-xml:index.xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;
&lt;rss version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;link&gt;http://hello.example.com/&lt;/link&gt;
    &lt;description&gt;Recent content on Hello World!&lt;/description&gt;
    &lt;generator&gt;Hugo -- gohugo.io&lt;/generator&gt;
    &lt;language&gt;jp&lt;/language&gt;
    &lt;atom:link href=&quot;http://hello.example.com/index.xml&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&gt;

  &lt;/channel&gt;
&lt;/rss&gt;
</code></pre>

<p><code>sitemap.xml</code> は文字通りサイトマップ記述ファイル（SEO 用？）。</p>

<pre><code class="language-xml:sitemap.xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;
&lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;

  &lt;url&gt;
    &lt;loc&gt;http://hello.example.com/&lt;/loc&gt;
    &lt;priority&gt;0&lt;/priority&gt;
  &lt;/url&gt;

&lt;/urlset&gt;
</code></pre>

<h3 id="server-mode:8a07c3dae13f18d0c06cf5f9e482b173">サーバモード</h3>

<p><a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> では <code>hugo saver</code> コマンドによりサーバモードで起動する。</p>

<pre><code>C:\hugo-env\www&gt;hugo server
0 draft content
0 future content
0 pages created
0 paginator pages created
0 categories created
0 tags created
in 7 ms
Serving pages from C:\hugo-env\www\public
Web Server is available at http://127.0.0.1:1313/
Press Ctrl+C to stop
</code></pre>

<p>この状態で <code>http://127.0.0.1:1313/</code> をブラウザで開けばいいのだが，現時点では <code>index.html</code> が空なので何も表示されない。
ちなみに，この状態の <code>index.xml</code> は</p>

<pre><code class="language-xml:index.xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;
&lt;rss version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;link&gt;http://localhost:1313/&lt;/link&gt;
    &lt;description&gt;Recent content on Hello World!&lt;/description&gt;
    &lt;generator&gt;Hugo -- gohugo.io&lt;/generator&gt;
    &lt;language&gt;jp&lt;/language&gt;
    &lt;atom:link href=&quot;http://localhost:1313/index.xml&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&gt;

  &lt;/channel&gt;
&lt;/rss&gt;
</code></pre>

<p>となっている。
URL が変更されていることにお気づきだろうか。
<a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> は動作モードによって URL を自動的に書き換えてくれるのでデバッグが容易である。
ただしサーバモードの状態で本番環境に deploy しようとすると大変なことになるのでご注意を。
deploy する前には必ずビルドしよう（またはビルド結果の出力先を分ける）。</p>

<p>個人で作業する場合はこれで問題ないが，デバッグ用サーバを共有する場合には <code>http://localhost:1313/</code> では都合が悪いので <code>--bind</code> および <code>--port</code> オプションを付加する。</p>

<pre><code>C:\hugo-env\www&gt;hugo server --bind=&quot;hostname&quot; --port=8080 --watch
0 draft content
0 future content
0 pages created
0 paginator pages created
0 tags created
0 categories created
in 8 ms
Watching for changes in C:\hugo-env\www/{data,content,layouts,static}
Serving pages from C:\hugo-env\www\public
Web Server is available at http://hostname:8080/
Press Ctrl+C to stop
</code></pre>

<p>これで <code>http://hostname:8080/</code> でアクセスできるようになる。
ちなみに <code>--watch</code> オプションを付加すると，入力フォルダを監視して変更があればリコンパイルする。便利！</p>

<h2 id="template:8a07c3dae13f18d0c06cf5f9e482b173">はじめてのテンプレート</h2>

<p><code>index.html</code> を生成するにはテンプレートを用意する必要がある。
<code>index.html</code> のテンプレートは <code>layouts</code> フォルダに <code>index.html</code> というファイル名で配置する（安直！）</p>

<p>それじゃあ，早速テンプレートを組んでみる。</p>

<pre><code class="language-html:layouts/index.html">&lt;!DOCTYPE html&gt;
{{ with .Site.LanguageCode }}&lt;html lang=&quot;{{ . }}&quot;&gt;{{ else }}&lt;html&gt;{{ end }}
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;{{ .Title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;{{ .Title }}&lt;/h1&gt;
&lt;p&gt;Hello Hugo World!&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p><code>{{ }}</code> で囲まれている部分が埋め込み構文だ。
たとえば <code>{{ .Title }}</code> にはタイトルが入る。
今回はトップページなので， <code>config.toml</code> で <code>title</code> に設定した文字列が入る。</p>

<p><code>{{ with .Site.LanguageCode }} ... {{ else }} ... {{ end }}</code> はいわゆる with 構文ってやつ<sup class="footnote-ref" id="fnref:8a07c3dae13f18d0c06cf5f9e482b173:a"><a rel="footnote" href="#fn:8a07c3dae13f18d0c06cf5f9e482b173:a">1</a></sup>。
これ便利だよね。ちなみに <code>with</code> で指定する変数が存在しない場合は <code>{{ else }}</code> 以降が走る。
似た書式で <code>{{ if .Site.LanguageCode }} ... {{ else }} ... {{ end }}</code> もあるが， <code>with</code> とは変数のスコープが異なるので注意（慣れるまでは結構ハマった）。</p>

<pre><code class="language-html">{{ if .Site.LanguageCode }}&lt;html lang=&quot;{{ .Site.LanguageCode }}&quot;&gt;{{ else }}&lt;html&gt;{{ end }}
</code></pre>

<p>これをビルドした結果はこうなる。</p>

<pre><code class="language-html:public/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;p&gt;Hello Hugo World!&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>ちなみに <code>config.toml</code> で <code>baseurl</code> 以外を削除してビルドするとこうなる。</p>

<pre><code class="language-html:public/index.html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;&lt;/h1&gt;
&lt;p&gt;Hello Hugo World!&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>埋め込み構文がどのように機能しているか分かると思う。</p>

<h3 id="404:8a07c3dae13f18d0c06cf5f9e482b173">404.html をどうしよう</h3>

<p><code>404.html</code> はページが存在しない場合（404）に代わりに表示するページである。
普通 404 では Web サーバで決められたページを表示するのだが， GitHub Pages のようにサイトのトップページにある <code>404.html</code> を表示してくれる場合もある。
なら <code>404.html</code> を空っぽにしておくわけにはいかないよねぇ。</p>

<p>固定の内容なら <code>static</code> フォルダ直下に <code>404.html</code> を置く手もある（<a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> では <code>static</code> フォルダ以下のファイルはそのままコピーされるが <a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> のコントロール外となる）。
また， <code>layouts</code> フォルダ直下にテンプレートを置く手もある。たとえばこんな感じ。</p>

<pre><code class="language-html:layouts/404.html">&lt;!DOCTYPE html&gt;
{{ with .Site.LanguageCode }}&lt;html lang=&quot;{{ . }}&quot;&gt;{{ else }}&lt;html&gt;{{ end }}
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
{{ .Hugo.Generator }}
&lt;title&gt;{{ .Title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;{{ with .Site.Params.error404 }}&lt;p&gt;{{ . }}&lt;/p&gt;{{ end }}&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>これをビルドするとこんな感じになる。</p>

<pre><code class="language-html:public/404.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;meta name=&quot;generator&quot; content=&quot;Hugo 0.15-DEV&quot; /&gt;
&lt;title&gt;404 Page not found&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;&lt;p&gt;あると思った？ 残念！ 404 でした。&lt;/p&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2 id="post:8a07c3dae13f18d0c06cf5f9e482b173">記事を書く</h2>

<p>さて，いよいよ記事を書いてみる。
<a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> では今どきの流行にのっとって Markdown 形式のファイルを入力ファイルにしている。
自前でファイルを用意してもよいが，新規に作成するなら <code>hugo new</code> コマンドで作成するのがよいだろう。</p>

<pre><code>C:\hugo-env\www&gt;hugo new hello.md
C:\hugo-env\www\content\hello.md created
</code></pre>

<p>作成されたファイルを見てみると</p>

<pre><code class="language-markdown:content\hello.md">+++
date = &quot;2015-09-05T16:40:41+09:00&quot;
draft = true
title = &quot;hello&quot;

+++
</code></pre>

<p>などとなっている。</p>

<p><code>+++</code> で囲まれている部分は “front matter” と呼ばれている領域で，記事ごとの設定情報を格納する。
<code>+++</code> の場合は TOML， <code>---</code> の場合は YAML， <code>{ }</code> で挟んである場合は JSON として解釈されるようだ。</p>

<p>このファイルに記事を入力する。</p>

<pre><code class="language-markdown::content\hello.md">+++
date = &quot;2015-09-05T16:40:41+09:00&quot;
draft = false
title = &quot;Hello!&quot;
+++

ようこそ， [Hugo](http://gohugo.io/) の世界へ！
</code></pre>

<p>草稿記事の場合は <code>draft</code> は <code>true</code> のままでよいが，そうでない場合は <code>false</code> にすること。
ちなみに <code>-D</code> または <code>--buildDrafts</code> オプションを付けてビルドすると草稿版も含めて出力される。
先ほどのサーバモードと組み合わせてデバッグに使うとよいだろう。</p>

<p>草稿（<code>draft</code>）状態の解除は手動でもいいのだが，<code>hugo undraft</code> コマンドを使うてもある。</p>

<pre><code>C:\hugo-env\www&gt;hugo undraft content/hello.md
</code></pre>

<p>このコマンドを使うと <code>date</code> の値が現在時刻に更新されるので注意。</p>

<p>では，ここでもいきなりビルドしてみる（えー）</p>

<pre><code>C:\hugo-env\www&gt;hugo
0 draft content
0 future content
1 pages created
0 paginator pages created
0 tags created
0 categories created
in 42 ms

C:\hugo-env\www&gt;tree /f .
C:\HUGO-ENV\WWW
│  config.toml
│
├─archetypes
├─content
│      hello.md
│
├─data
├─layouts
│      404.html
│      index.html
│
├─public
│  │  404.html
│  │  index.html
│  │  index.xml
│  │  sitemap.xml
│  │
│  └─hello
│          index.html
│
└─static
</code></pre>

<p><a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> の標準では <code>hello.md</code> は <code>hello/index.html</code> に展開される。
これを deploy すると Web ブラウザからは <code>http://hello.example.com/hello/</code> でアクセスできることになる。
この path の展開のさせ方はいろいろ設定できるようなのだが，今回は割愛する。</p>

<p>現時点では <code>hello/index.html</code> は空。
まぁテンプレートがないから当たり前なのだが。
記事用のテンプレートは <code>layouts</code> フォルダ以下に <code>_default</code> フォルダを作成し，さらにその下に <code>single.html</code> を配置する。</p>

<p>それじゃあ，早速テンプレートを組んでみる。</p>

<pre><code class="language-html:layouts/_default/single.html">&lt;!DOCTYPE html&gt;
{{ with .Site.LanguageCode }}&lt;html lang=&quot;{{ . }}&quot;&gt;{{ else }}&lt;html&gt;{{ end }}
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;{{ .Title }} -- {{ .Site.Title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;{{ .Title }}&lt;/h1&gt;
&lt;div&gt;{{ .Content }}&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p><code>{{ .Title }}</code> には（今回は）記事のタイトルが入る。
<code>{{ .Content }}</code> は実際の記事の中身である。これでビルドすると</p>

<pre><code class="language-html:public/hello/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello! -- Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello!&lt;/h1&gt;
&lt;div&gt;&lt;p&gt;ようこそ， &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; の世界へ！&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>となる。
Feed はこんな感じ。</p>

<pre><code class="language-xml:index.xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;
&lt;rss version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;link&gt;http://hello.example.com/&lt;/link&gt;
    &lt;description&gt;Recent content on Hello World!&lt;/description&gt;
    &lt;generator&gt;Hugo -- gohugo.io&lt;/generator&gt;
    &lt;language&gt;jp&lt;/language&gt;
    &lt;lastBuildDate&gt;Sat, 05 Sep 2015 16:40:41 +0900&lt;/lastBuildDate&gt;
    &lt;atom:link href=&quot;http://hello.example.com/index.xml&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&gt;

    &lt;item&gt;
      &lt;title&gt;Hello!&lt;/title&gt;
      &lt;link&gt;http://hello.example.com/hello/&lt;/link&gt;
      &lt;pubDate&gt;Sat, 05 Sep 2015 16:40:41 +0900&lt;/pubDate&gt;

      &lt;guid&gt;http://hello.example.com/hello/&lt;/guid&gt;
      &lt;description&gt;&amp;lt;p&amp;gt;ようこそ， &amp;lt;a href=&amp;#34;http://gohugo.io/&amp;#34;&amp;gt;Hugo&amp;lt;/a&amp;gt; の世界へ！&amp;lt;/p&amp;gt;
&lt;/description&gt;
    &lt;/item&gt;

  &lt;/channel&gt;
&lt;/rss&gt;
</code></pre>

<p>ちなみに front matter をまるっと削除してビルドすると</p>

<pre><code class="language-html:public/hello/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt; -- Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;&lt;/h1&gt;
&lt;div&gt;&lt;p&gt;ようこそ， &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; の世界へ！&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<pre><code class="language-xml:index.xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;
&lt;rss version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;link&gt;http://hello.example.com/&lt;/link&gt;
    &lt;description&gt;Recent content on Hello World!&lt;/description&gt;
    &lt;generator&gt;Hugo -- gohugo.io&lt;/generator&gt;
    &lt;language&gt;jp&lt;/language&gt;
    &lt;atom:link href=&quot;http://hello.example.com/index.xml&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&gt;

    &lt;item&gt;
      &lt;title&gt;&lt;/title&gt;
      &lt;link&gt;http://hello.example.com/hello/&lt;/link&gt;
      &lt;pubDate&gt;Mon, 01 Jan 0001 00:00:00 +0000&lt;/pubDate&gt;

      &lt;guid&gt;http://hello.example.com/hello/&lt;/guid&gt;
      &lt;description&gt;&amp;lt;p&amp;gt;ようこそ， &amp;lt;a href=&amp;#34;http://gohugo.io/&amp;#34;&amp;gt;Hugo&amp;lt;/a&amp;gt; の世界へ！&amp;lt;/p&amp;gt;
&lt;/description&gt;
    &lt;/item&gt;

  &lt;/channel&gt;
&lt;/rss&gt;
</code></pre>

<p>のような感じになる。
タイトルや日付の情報が欠落するがエラーにはならないようだ。</p>

<h3 id="list:8a07c3dae13f18d0c06cf5f9e482b173">記事の一覧をつくる</h3>

<p>ついでなので <code>index.html</code> に記事の一覧を表示するようにしよう。
テンプレートはこんな感じで書く。</p>

<pre><code class="language-html:layouts/index.html">&lt;!DOCTYPE html&gt;
{{ with .Site.LanguageCode }}&lt;html lang=&quot;{{ . }}&quot;&gt;{{ else }}&lt;html&gt;{{ end }}
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;{{ .Title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;{{ .Title }}&lt;/h1&gt;

&lt;h2&gt;What's New&lt;/h2&gt;
&lt;ul style=&quot;list-style:none;&quot;&gt;
{{ range first 15 .Site.Pages }}
    &lt;li&gt;&lt;a href=&quot;{{ .Permalink }}&quot;&gt;{{ .Title }}&lt;/a&gt; (&lt;time&gt;{{ .Date.Format &quot;2006-01-02&quot; }}&lt;/time&gt;){{ if .Draft }} #Draft{{ end }}&lt;/li&gt;
{{ end }}
&lt;/ul&gt;

&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>これで最新の15記事を列挙できる。
で，ビルド結果はこんな感じ。</p>

<pre><code class="language-html:public/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello World!&lt;/h1&gt;

&lt;h2&gt;What's New&lt;/h2&gt;
&lt;ul style=&quot;list-style:none;&quot;&gt;

    &lt;li&gt;&lt;a href=&quot;http://hello.example.com/hello/&quot;&gt;Hello!&lt;/a&gt; (&lt;time&gt;2015-09-05&lt;/time&gt;)&lt;/li&gt;

&lt;/ul&gt;

&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>これで大まかなテンプレートのイメージがつかめただろうか。</p>

<h2 id="html:8a07c3dae13f18d0c06cf5f9e482b173">【おまけ】 HTML ファイルをそのまま突っ込んだらどうなるの？</h2>

<p>というわけで，上で作成した <code>hello/index.html</code> を <code>hello2.html</code> として <code>content</code> フォルダに突っ込んでみた。</p>

<pre><code>C:\hugo-env\www&gt;hugo
0 draft content
0 future content
2 pages created
0 paginator pages created
0 tags created
0 categories created
in 16 ms

C:\hugo-env\www&gt;tree /f .
C:\HUGO-ENV\WWW
│  config.toml
│
├─archetypes
├─content
│      hello.md
│      hello2.html
│
├─data
├─layouts
│  │  404.html
│  │  index.html
│  │
│  └─_default
│          single.html
│
├─public
│  │  404.html
│  │  index.html
│  │  index.xml
│  │  sitemap.xml
│  │
│  ├─hello
│  │      index.html
│  │
│  └─hello2
│          index.html
│
└─static
</code></pre>

<p>おおう。
<code>hello2/index.html</code> に変換されている。
ルートの <code>index.html</code> ファイルはどうなっているだろう。</p>

<pre><code class="language-html:public/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello World!&lt;/h1&gt;

&lt;h2&gt;What's New&lt;/h2&gt;
&lt;ul style=&quot;list-style:none;&quot;&gt;

    &lt;li&gt;&lt;a href=&quot;http://hello.example.com/hello/&quot;&gt;Hello!&lt;/a&gt; (&lt;time&gt;2015-09-05&lt;/time&gt;)&lt;/li&gt;

    &lt;li&gt;&lt;a href=&quot;http://hello.example.com/hello2/&quot;&gt;&lt;/a&gt; (&lt;time&gt;0001-01-01&lt;/time&gt;)&lt;/li&gt;

&lt;/ul&gt;

&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>おおう。
残念な結果に。
でもこれってもしかして front matter つけりゃいいのか。</p>

<pre><code class="language-markdown:content\hello2.html">+++
date = &quot;2015-09-05T18:00:00+09:00&quot;
draft = false
title = &quot;Hello! Part 2&quot;
+++

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello! Part 2 -- Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello! Part 2&lt;/h1&gt;
&lt;div&gt;&lt;p&gt;再びようこそ， &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; の世界へ！&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>んで，ビルドしてみる。</p>

<pre><code class="language-html:public/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello World!&lt;/h1&gt;

&lt;h2&gt;What's New&lt;/h2&gt;
&lt;ul style=&quot;list-style:none;&quot;&gt;

	&lt;li&gt;&lt;a href=&quot;http://hello.example.com/hello2/&quot;&gt;Hello! Part 2&lt;/a&gt; (&lt;time&gt;2015-09-05&lt;/time&gt;)&lt;/li&gt;

	&lt;li&gt;&lt;a href=&quot;http://hello.example.com/hello/&quot;&gt;Hello!&lt;/a&gt; (&lt;time&gt;2015-09-05&lt;/time&gt;)&lt;/li&gt;

&lt;/ul&gt;

&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>おおお！</p>

<pre><code class="language-html:public/hello2/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello! Part 2 -- Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello! Part 2&lt;/h1&gt;
&lt;div&gt;&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello! Part 2 -- Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello! Part 2&lt;/h1&gt;
&lt;div&gt;&lt;p&gt;再びようこそ， &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; の世界へ！&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>おおう orz なんてこったい。
つまり，元の HTML ファイルからヘッダ等の要素を抜いて  front matter を付加すれば見た目も保持できて <a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> からも Controllable な状態になるってことか？</p>

<pre><code class="language-markdown:content\hello2.html">+++
date = &quot;2015-09-05T18:00:00+09:00&quot;
draft = false
title = &quot;Hello! Part 2&quot;
+++

&lt;p&gt;再びようこそ， &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; の世界へ！&lt;/p&gt;
</code></pre>

<p>これでビルドしてみると</p>

<pre><code class="language-html:public/hello2/index.html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ja&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;
&lt;title&gt;Hello! Part 2 -- Hello World!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Hello! Part 2&lt;/h1&gt;
&lt;div&gt;&lt;p&gt;再びようこそ， &lt;a href=&quot;http://gohugo.io/&quot;&gt;Hugo&lt;/a&gt; の世界へ！&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre>

<p>ふむむむむ。
これは古い資産を <a href="http://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo</a> に組み入れるのは結構骨かもなぁ。</p>

<h2 id="bookmark:8a07c3dae13f18d0c06cf5f9e482b173">ブックマーク</h2>

<ul>
<li><a href="http://wdkk.co.jp/lab/hugo/">Hugoサイト構築 | Watanabe-DENKI Inc. 渡辺電気株式会社</a> : お勧め！</li>
</ul>

<p><a href="http://text.baldanders.info/hugo/bookmark/">Hugo に関するブックマークはこちら</a>。</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:8a07c3dae13f18d0c06cf5f9e482b173:a">言語コードの指定の仕方は「<a href="http://www.kanzaki.com/docs/html/lang.html">言語コードと国コード</a>」が参考になる。日本の場合は <code>jp</code> ではなく <code>ja</code>。
 <a class="footnote-return" href="#fnref:8a07c3dae13f18d0c06cf5f9e482b173:a"><sup>[return]</sup></a></li>
</ol>
</div>

</section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/hugo/bookmark/">Hugo に関するブックマーク</a></div>
<div class="next-page"><a href="/hugo/section/">Categories, Tags そして Section</a> &raquo;</div>
</nav>

<aside id='tech-terms'>
<style scoped>
#tech-terms h1 {
  border: solid thin gray;
  margin: 0 0 1rem 0;
  padding: 0 0.5rem 2px 2px;
}
</style>
<h1>Technical Terms</h1>
<div class="cloud" style="font-size:smaller;">
<script type="text/javascript" src="http://e-words.jp/embed.x?e=utf8"></script>
<p class="right">Powered by <a href="hhttp://e-words.jp/p/s-embed.html">e-Words</a></p>
</div>
</aside>

<aside id='feedback'>
<style scoped>
#feedback h1 {
  border: solid thin gray;
  margin: 0 0 1rem 0;
  padding: 0 0.5rem 2px 2px;
}
</style>
<h1>Feedback</h1>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'textbaldandersinfo';
    var disqus_identifier = 'http:\/\/text.baldanders.info\/hugo\/hello\/';
    var disqus_title = 'インストールから Hello World まで';
    var disqus_url = 'http:\/\/text.baldanders.info\/hugo\/hello\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>

<footer>

	<div class="userinfo">
		<div class="userinfo-avater">
			
				<a href="http://www.baldanders.info/spiegel/profile/"><img src="/images/avatar.jpg" width="48" height="48" alt="avatar"></a>
			
		</div>
		<div class="userinfo-info" id="maker" itemprop='author' itemscope itemtype='http://schema.org/Person'>
			
				Written by <a href="http://www.baldanders.info/spiegel/profile/" rel="cc:attributionURL" property="cc:attributionName" itemprop='name'>Spiegel</a> in <time property='dc:dateCopyrighted'>2015-09-11</time> (revised in <time property='dc:modified'>2015-10-02</time>).
				
	<a rel='cc:license' href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><i class="cc cc-by"></i>&nbsp;<i class="cc cc-sa"></i></a>


			
			
	<ul class="social">
		<li><a href="https://github.com/spiegel-im-spiegel" target="_blank"><i class="fa fa-github"></i></a></li>
		<li><a href="https://twitter.com/spiegel_2007" target="_blank"><i class="fa fa-twitter"></i></a></li>
		<li><a href="https://medium.com/@spiegel" target="_blank"><i class="fa fa-medium"></i></a></li>
		<li><a href="http://instagram.com/spiegel_2007" target="_blank"><i class="fa fa-instagram"></i></a></li>
		<li><a href="https://www.facebook.com/spiegel.im.spiegel" target="_blank"><i class="fa fa-facebook"></i></a></li>
		<li><a href="https://jp.linkedin.com/in/spiegelimspiegel" target="_blank"><i class="fa fa-linkedin"></i></a></li>
		
	</ul>
	<div>
		<div class="fb-share-button" data-href="http://text.baldanders.info/hugo/hello/" data-layout="button"></div>
		<a href="https://twitter.com/share" class="twitter-share-button" data-text="インストールから Hello World まで - text.Baldanders.info" data-via="spiegel_2007" data-count="none" data-dnt="true">Tweet</a>
		<a href="https://flattr.com/submit/auto?user_id=spiegel&amp;url=http%3a%2f%2ftext.baldanders.info%2fhugo%2fhello%2f&amp;title=%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab%e3%81%8b%e3%82%89%20Hello%20World%20%e3%81%be%e3%81%a7" target="_blank"><img src="//button.flattr.com/flattr-badge-large.png" alt="Flattr this" title="Flattr this"></a>
	</div>


		</div>
	</div>

<nav>
<ul class='cloud center'>
<li><a href='http://www.baldanders.info/'>Baldanders.info</a></li>
<li><a href='https://github.com/spiegel-im-spiegel/github-pages-env'>Repository</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/site-policy/'>Site Policy</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='http://gohugo.io/'>Hugo 0.15-DEV</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-text">Text</a>.</li>
</ul>
</nav>

</footer>

</div>
<script src="/highlightjs/highlight.pack.js"></script>
<script>
  hljs.configure({
    tabReplace: "    ",	
  });
  hljs.initHighlightingOnLoad();
</script>
<script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>

</body>
</html>

