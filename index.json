{
  "title": "text.Baldanders.info",
  "url": "https://text.baldanders.info/",
  "feed": "https://text.baldanders.info/index.xml",
  "description": "帰ってきた「しっぽのさきっちょ」",
  "entry": [
    {
      "title": "ダッシュとかチルダとか",
      "section": "remark",
      "description": "文字コードはホンマ面倒くさい",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/dashes-and-tildes/",
      "published": "2025-11-14T02:58:22+00:00",
      "update": "2025-11-14T09:07:26+00:00",
      "content": "エンダッシュとエムダッシュを直接入力できる？ Bluesky の TL に面白い記事が流れてたので，今回はこれを起点にしてみる。\n【朗報？】Windows、「—」と「–」が入力しやすくなる。英文を打つ人にとっては最高のアプデかも | ライフハッカー・ジャパン エンダッシュ（–）を入力したい時：Windowsキーを押しながら、ハイフン（-）を押す エムダッシュ（—）を入力したい時：Windowsキー ＋ Shiftキーを押しながら、ハイフン（-）を押す 【朗報？】Windows、「—」と「–」が入力しやすくなる。英文を打つ人にとっては最高のアプデかもより 「いや，これ， US キーボードの話じゃろ？」と思って，試しに自宅の Windows 機で試したら\n$ echo -–— | gnkf dump -u 0x002d, 0x2013, 0x2014, 0x000d, 0x000a ホンマじゃ！ ちゃんと日本語キーボードで – (EN DASH, U+2013) と — (EM DASH, U+2014) が出力された（US キーボードでどうなるかは知らない）。 試しに Ubuntu 機で同じようにやってみたが駄目だった。\nエンダッシュやエムダッシュを使うことってあんまりないんだよな。 仕事で書く文書ではほぼ使わない。 TeX や Typst では -- や --- でエンダッシュやエムダッシュに変換されるので，困った覚えはない。 ここのブログでは実体参照の \u0026amp;ndash; や \u0026amp;mdash; を使うので，これも困ることはないな。\nというわけで「へぇ」とは思ったけど，私は使う機会もなく忘れてしまいそう（笑）\nちなみに，よく使う - (U+002D) は “HYPHEN-MINUS” でダッシュ記号ではない。 さらに “HYPHEN” は ‐ (U+2010) と定義されているし “MINUS SIGN” は − (U+2212) と定義されている。 さらにさらに言うと全角のハイフンマイナスである － (U+FF0D) もある。 でも見た目で殆ど違いが分からんし，ハイフンマイナス以外はどうやって入力するのかも分からない。 どうも生成 AI は使い分けてるみたいなんだが，見た目がみんな同じなのでこれはこれで困るんだよなぁ。\n全角ダッシュの Unicode マッピング 日本語の文字コード（JIS X 0208 および JIS X 0213）にはいわゆる「全角ダッシュ」があるのだが Unicode では上述の “EM DASH” (U+2014) にマッピングされているそうな。 まぁ，これは真っ当だろう。\nしかし一時期，この全角ダッシュを U+2015 (HORIZONTAL BAR) にマッピングしていた時期があったらしい。 これは後に訂正されたようだが，古い処理系だとシフトJISの全角ダッシュ（8160H）を U+2015 に変換したりする場合もあるんだとか。\nあと和文の倍角ダッシュに U+2015 を並べて使う場合もあるみたいで，簡単な話ではないっぽい。 たとえば奥村晴彦さんが書かれた『LaTeX美文書作成入門』では，倍角ダッシュを U+2015 を使って\n\\def\\――{―\\kern-.5zw―\\kern-.5zw―} 『［改訂第9版］LaTeX美文書作成入門』4.8節より というコマンドを定義すれば文字と文字の間の隙間を潰せると紹介している。 U+2015 の文字を全角2文字分の幅で3つ重ねて繋がってるように見せるのね。 なるほど。\n波ダッシュと全角チルダ 似たような話に和文の「波ダッシュ」と「全角チルダ」がある。\n字形 コードポイント 名前 〜 U+301C WAVE DASH ～ U+FF5E FULLWIDTH TILDE このように見た目はそっくりなのだが Unicode 7.0 までは波ダッシュの字形が異なっていたらしい。 この辺は以下が参考になるだろうか。\nどうしてこうなった!? 波ダッシュをめぐる考察｜『人文×社会』の中の人 字形に関しては Unicode 8.0 で修正されているのだが， Windows の IME では今だに「から」を変換すると全角チルダのほうが候補に上がるため，波ダッシュであるべきところが全角チルダになってしまうことがあるようだ。 見た目いっしょだし，分からんよね（笑）\n文字コードはホンマ面倒くさい。\n参考 ［改訂第9版］LaTeX美文書作成入門 奥村 晴彦 (著), 黒木 裕介 (著) 技術評論社 2023-12-09 (Release 2023-12-09) 単行本（ソフトカバー） 4297138891 (ASIN), 9784297138899 (EAN), 4297138891 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 2023年末に出てるのに気が付かなかった orz 今回は版元で PDF 版を買った。\nreviewed by Spiegel on 2024-04-07 (powered by PA-APIv5)\n"
    },
    {
      "title": "Ubuntu 25.10 へのアップグレード",
      "section": "remark",
      "description": "ホンマに X.Org 関連のパッケージが削除対象になってるよ。",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/upgrade-ubuntu-25_10/",
      "published": "2025-11-13T02:24:45+00:00",
      "update": "2025-11-13T02:26:08+00:00",
      "content": "予定通り 2025-10 に Ubuntu 25.10 がリリースされ，アップグレードしろと頻繁に通知が来るのだが\nしばらく様子見していた。 でも，そろそろアップグレードしておかないとな。\nQuesting Quokka Release Notes - Release - Ubuntu Community Hub Download Ubuntu Desktop | Ubuntu とりあえずパッケージを最新状態にしておいてから\nアップグレード開始。\nサードパーティのパッケージについてのアラート。\n試しに「いいえ (N)」を押したらアップグレード自体が中止された。 ここは素直に「はい (Y)」を押して続行。\nパッケージの更新は滞りなく終わって，使わなくなったパッケージを削除するか訊いてくるのだが\nおー。 ホンマに X.Org 関連のパッケージが削除対象になってるよ。\nUbuntu 25.10 その12 - Xorg セッションの削除と Wayland セッションに一本化 - kledgeb 残しておく理由はないので「削除 (R)」を実行。\nというわけで，特にトラブルなく完了した。\n再起動後も特に問題はなさそうだ。 バージョン等を確認しておく。\n$ cat /etc/os-release PRETTY_NAME=\u0026#34;Ubuntu 25.10\u0026#34; NAME=\u0026#34;Ubuntu\u0026#34; VERSION_ID=\u0026#34;25.10\u0026#34; VERSION=\u0026#34;25.10 (Questing Quokka)\u0026#34; VERSION_CODENAME=questing ID=ubuntu ID_LIKE=debian HOME_URL=\u0026#34;https://www.ubuntu.com/\u0026#34; SUPPORT_URL=\u0026#34;https://help.ubuntu.com/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.launchpad.net/ubuntu/\u0026#34; PRIVACY_POLICY_URL=\u0026#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\u0026#34; UBUNTU_CODENAME=questing LOGO=ubuntu-logo サードパーティのパッケージも手動でアップデートする。\nDocker Engine Install Docker Engine on Ubuntu | Docker Docs PPA 版 Git Git stable releases : “Ubuntu Git Maintainers” team NodeSource 版 Node.js Node.js Distributions v24 LTS 版を選択 pgAdmin 4 Download PPA 版 KeePassXC KeePassXC : Janek Bevendorff VS Code Running Visual Studio Code on Linux 今回も楽でよかった。\nブックマーク Ubuntu 25.10 “Questing Quokka”のリリース | gihyo.jp Ubuntu 25.10 その32 - Ubuntu 25.10 がリリースされました・ディスクイメージのダウンロード - kledgeb Ubuntu 25.10 その33 - Ubuntu 25.10 の新機能と変更点・既知の問題 - kledgeb Ubuntu 25.10 その34 - Ubuntu 25.10 の注目機能 - kledgeb Ubuntu 25.10 その37 - Ubuntu 25.10 で導入されたセキュリティーの強化とまとめ - kledgeb 参考 スーパーユーザーなら知っておくべきLinuxシステムの仕組み Brian Ward (著), 柴田 芳樹 (翻訳) インプレス 2022-03-08 (Release 2022-03-08) 単行本（ソフトカバー） 4295013498 (ASIN), 9784295013495 (EAN), 4295013498 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 版元で PDF 版が買える。セキュリティ・エリアにも持ち込めるよう紙の本を買ったのだが，オンライン読書会が始まったので PDF 版も購入。Linux システムの扱い方に関するリファレンス本として優れている。最初に軽く流し読みして，必要に応じて該当項目を拾い読みしていけばいいだろう。\nreviewed by Spiegel on 2023-02-11 (powered by PA-APIv5)\nSP Silicon Power シリコンパワー USBメモリ 8GB USB3.1 / USB3.0 亜鉛合金ボディ 防水 防塵 耐衝撃 Jewel J80 SP008GBUF3J80V1TJA シリコンパワー (Release 2017-02-01) Personal Computers B01MS6RPN2 (ASIN), 4712702655278 (EAN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; ブータブル USB 作成用に購入。ひたすらデザインで決めた（笑） 以前に同じデザインの 32GB 版を買ったが，最小サイズで買い直した。現在は在庫切れ？ 状態。\nreviewed by Spiegel on 2022-07-17 (powered by PA-APIv5)\n"
    },
    {
      "title": "Fediverse シンボル提案の話",
      "section": "remark",
      "description": "Reddit の反応を見ると「猫の尻穴」とか言われてて笑ってしまった",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/fediverse-symbol/",
      "published": "2025-11-11T11:09:27+00:00",
      "update": "2025-11-12T01:50:58+00:00",
      "content": "今回も Mastodon の TL を眺めてて知ったのだが， “Fediverse” のシンボルマークとして ⁂ (アステリズム) を提案する動きがあるらしい。\n⁂ の提案については以下のページに詳しく書かれている。\nfediverse symbol ⁂ 提案の一部を引用しておく。\n⁂ is a typographical character, not an icon that needs to be inserted as an image. Unique-looking, but standardised. This means it’s very easy to copy-paste around! Its design style also automatically adapts to the font used where you insert it. via fediverse symbol ⁂ ⁂ is called an asterism. In astronomy, it refers to groups of stars in the sky, akin to constellations. We suggest that it’s a very fitting symbol for the fediverse, a galaxy of interconnected spaces which is decentralised and has an astronomically-themed name. It represents several stars coming together, connecting but each their own, without a centre. via fediverse symbol ⁂ “Fediverse” のシンボルというかロゴマークとしてはあのカラフルな五芒星が有名だが，これも決定されたものではなく proposal な状態らしい。 このシンボルについても\nThe pentagram icon is the original symbol for the fediverse, created back in 2018 by Dr. Quadragon and Eukombos. It’s a great depiction of the decentralised nature of the fediverse, and has been serving the community well. However, its design is a little too complex to be used at small sizes, as you would in text or in a button. It’s also only available in image form, not as a typographical character. via fediverse symbol ⁂ などと述べている。\n文字コードとしての ⁂ (U+2042; ASTERISM) は約物（punctuation）のひとつで * (U+002A; ASTERISK) や ⁑ (U+2041; TWO ASTERISKS ALIGNED VERTICALLY) と組み合わせて脚注のマークとして使ったりもするらしい。\n天文分野で使われる “asterism” は「星群」などと訳されているそうで，天文学の正式な用語ではないらしいのだが，おおぐま座の北斗七星やオリオン座の三つ星など，公式の88星座とは別に，（見かけ上の）星のまとまりを指す言葉として使われているとのこと。\n“Fediverse” が Federation ＋ Universe の合成語であることを考えると1， ⁂ を “Fediverse” のシンボルと見なすというのは悪くないと思う。 まぁ Reddit の反応を見ると「猫の尻穴」とか言われてて笑ってしまったが2。 私は「森」に空目してしまう（笑）\nMastodon の TL を眺めると ⁂ はそれなりに使われているっぽいので，そのうち定着するかもしれない。 多分 “Fediverse” の議論を統括するような権威的な組織ってないんだよね。 なら，公式のロゴとか決まらなさそうだな。\nFediverseブロックワードマークデザイン。 Tシャツ Under Design ウェア\u0026amp;シューズ B0C1HT8XWY (ASIN) 今のところはまだ買わずに思いとどまっている（笑）\nreviewed by Spiegel on 2025-11-11 (powered by PA-APIv5)\nFederation はもともと「連合」とか「連邦」とか組織や国家の形態を指す言葉だが， IT 分野では異なる複数のシステム・サービスが特定のプロトコルに基づいて相互に連携・通信する仕組みを指すことが多い。日本語ではそのまま「フェデレーション」とカタカナで書かれることが多いが Mastodon アプリなどでは「連合」とか訳されていて ？？？ となった思い出がある。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nそれ言うたら，最近流行りの生成 AI サービスのロゴとか思い切り尻穴じゃん！ 海外の人は尻穴好きなんかね（笑）\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"
    },
    {
      "title": "GitHub「変更不可リリース（Immutable Releases）」について",
      "section": "remark",
      "description": "私のリポジトリで採用するかどうかは分からないが，覚え書きとして記しておく。",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/github-immutable-releases/",
      "published": "2025-11-11T03:59:41+00:00",
      "update": "2025-11-11T04:00:16+00:00",
      "content": "気づくのが遅れたが，先日 GitHub が「変更不可リリース1（Immutable Releases）」機能を正式リリースしたらしい。\nImmutable releases are now generally available - GitHub Changelog 変更不可リリース - GitHub ドキュメント リリースに対する変更の防止 - GitHub ドキュメント リリースの整合性の検証 - GitHub ドキュメント GitHub、リリース後のバイナリなどアセットを変更不可にする「Immutable Release」（変更不可リリース）機能を正式リリース － Publickey 私のリポジトリでこれを採用するかどうかは分からないが，覚え書きとして記しておく。\nリポジトリに対して「変更不可リリース」を設定すると以下の機能が有効になる。\n変更できないリリースを有効にすると、次の保護が適用されます。\nGit タグは移動または削除できません。変更できないリリースが発行されると、関連付けられている Git タグは特定のコミットにロックされ、変更または削除することはできません。 リリースアセットを変更または削除することはできません:リリースにアタッチされているすべてのファイル (バイナリやアーカイブなど) は、変更または削除から保護されます。 さらに、変更不可リリースを作成すると、リリース構成証明が自動的に生成されます。これは、リリース タグ、コミット SHA、およびリリース アセットを含むリリースに関する、暗号で検証可能なレコードです。 コンシューマーはこの構成証明を使用して、使用しているリリースと成果物が、公開された GitHub リリースと完全に一致することを確認できます。\n変更不可リリース - GitHub ドキュメントより さらに\n不変リリースには、リポジトリの復活攻撃に対する保護が含まれます。 リポジトリを削除し、同じ名前の新しいリポジトリを作成した場合でも、元のリポジトリの変更できないリリースに関連付けられたタグを再利用することはできません。 変更不可リリース - GitHub ドキュメントより なんだそうだ。 リポジトリを移動したらどうなるんだろう？\n「変更不可リリース」を有効にする前のリリースバージョンにはこれらの機能は適用されない。 逆に「変更不可リリース」有効状態でリリースしたバージョンについては「変更不可リリース」設定を解除した後も機能が残り続ける。\nOnce enabled:\nAll new releases are immutable (i.e., assets are locked and tags are protected). Existing releases remain mutable unless you republish them. Disabling immutability doesn’t affect releases created while it was enabled. They remain immutable.\nvia Immutable releases are now generally available 「変更不可リリース」はリポジトリ単位で設定できる。 リポジトリの “Settings” を開き “General” 項目の “Releases” にあるチェック項目 “Enable release immutability” をチェックする。\nvia Repository Settings Organization の場合は Settings で「変更不可リリース」のポリシーを設定できる。 “Code, planning, and automation” の “Repository” → “General” 項目を開き “Releases” を “All repositories” または “Selected repositories” に設定する。\nvia Organization Settings “All repositories” を選択すると Organization 内の全リポジトリに「変更不可リリース」が適用される。 “Selected repositories” を選択すると適用するリポジトリを選択できる。\nvia Selected repositories まぁ Go のパッケージに関しては， Go のエコシステムの中で運用する限り，リポジトリのバージョンタグは実質的に immutable なんだよな。\nGo はどのようにしてサプライチェーン攻撃を低減しているか それでも GitHub のリリースページでバイナリを配布している場合は「変更不可リリース」機能は有用なので，導入を検討してもいいかもしれない。\n参考図書 初めてのGo言語 第2版 ―他言語プログラマーのためのイディオマティックGo実践ガイド Jon Bodner (著), 武舎 広幸 (翻訳) オライリー・ジャパン 2025-08-05 (Release 2025-08-05) 単行本（ソフトカバー） 4814401191 (ASIN), 9784814401192 (EAN), 4814401191 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 第2版。 Generics の説明が大幅に改訂されたらしい。練習問題も追加されている。\nreviewed by Spiegel on 2025-11-02 (powered by PA-APIv5)\nGitHub の公式ドキュメントで「変更不可リリース」「不変リリース」「変更できないリリース」など訳語が混在しているが，この記事では「変更不可リリース」としておく。これって生成 AI に翻訳させてるのかね。用語の統一くらいしておけよ。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"
    },
    {
      "title": "並行処理を待ち合わせる（WaitGroup と Barrier パターン）",
      "section": "golang",
      "description": "この記事では比較的簡単な実装である，複数の goroutine を待ち合わせる方法を紹介する。",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/golang/goroutine-synchronization-with-waitgroup-and-barrier/",
      "published": "2025-11-09T10:39:03+00:00",
      "update": "2025-11-09T10:47:53+00:00",
      "content": "Go の goroutine は起動すると外側から直接制御する方法がない。 とはいっても goroutine 間で同期を取ることは多く，そのための仕組みがいくつか提供されている。 この記事では比較的簡単な実装である，複数の goroutine を待ち合わせる方法を紹介する。\nタスクの完了を待ち合わせる まずは5つの goroutine を起動し，それぞれ某かのタスクを実行するプログラムを考える。 まずは素朴に以下のコードで1。\npackage main package main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand/v2\u0026#34; \u0026#34;time\u0026#34; ) func main() { tasks := 5 // Number of tasks for t := range tasks { go func() { fmt.Println(\u0026#34;Start Task:\u0026#34;, t+1) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t+1) }() } fmt.Println(\u0026#34;All Complete\u0026#34;) } （Go の関数は全て関数閉包（closure）として機能するため goroutine として定義した関数はループ変数 t を close over している。この for-range ブロックのループ変数 t は，ループするごとに新たにインスタンスが生成されている点に注意）\n実際には，このコードはうまく動かない。 実行するとこんな感じ：\n$ go run sample1.go All Complete 実はメイン goroutine が終了する際に他の goroutine も強制終了されてしまうため，このような結果になる。 これを安直に解決する手段として，メイン goroutine を適当な時間スリープさせる方法がある。 たとえばこんな感じ1：\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand/v2\u0026#34; \u0026#34;time\u0026#34; ) func main() { tasks := 5 // Number of tasks for t := range tasks { go func() { fmt.Println(\u0026#34;Start Task:\u0026#34;, t+1) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t+1) }() } time.Sleep(10 * time.Second) fmt.Println(\u0026#34;All Complete\u0026#34;) } これを実行すると確かに\n$ go run sample1b.go Start Task: 5 Start Task: 4 Start Task: 2 Start Task: 1 Start Task: 3 End Task: 3 End Task: 5 End Task: 4 End Task: 1 End Task: 2 All Complete などと一見うまく動いているようだが，このスリープ時間には根拠がないため（10秒もあれば全タスク完了してるやろ？），条件が変わればうまく動かなくなる可能性がある。\n複数のタスクの完了を待ち合わせるために，標準パッケージには sync.WaitGroup が用意されている。 使い方はこんな感じ：\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand/v2\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) func main() { tasks := 5 // Number of tasks wg := sync.WaitGroup{} // WaitGroup to synchronize goroutines wg.Add(tasks) // Add the number of tasks to the WaitGroup for t := range tasks { go func() { defer wg.Done() // Ensure Done is called when the goroutine completes fmt.Println(\u0026#34;Start Task:\u0026#34;, t+1) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t+1) }() } wg.Wait() // Wait for all goroutines to finish fmt.Println(\u0026#34;All Complete\u0026#34;) } これは goroutine の総数があらかじめ分かっている場合だが goroutine 数が動的に変化する場合でも使える。\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand/v2\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) func main() { wg := sync.WaitGroup{} // WaitGroup to synchronize goroutines for t := 1; ; t++ { wg.Add(1) // Add a task to the WaitGroup go func() { defer wg.Done() // Ensure Done is called when the goroutine completes fmt.Println(\u0026#34;Start Task:\u0026#34;, t) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t) }() if rand.IntN(6) \u0026gt; 4 { // Randomly decide to stop adding tasks break } } wg.Wait() // Wait for all goroutines to finish fmt.Println(\u0026#34;All Complete\u0026#34;) } ポイントは goroutine を起動する直前に wg.Add(1) を呼び出すことである。 実行結果はこんな感じ。\n$ go run sample1d.go Start Task: 3 Start Task: 1 Start Task: 2 End Task: 2 End Task: 1 End Task: 3 All Complete for ブロックのループ変数について 先ほどのサンプルコードでは for ブロック\nfor t := 1; ; t++ { ... } で宣言したループ変数 t をそのまま goroutine 内で参照しているが，古いバージョンの Go では意図しない出力になる。 これはループ変数 t が for ブロック内で単一のインスタンスになっていて，ループするごとに値が上書きされるためである。 この問題を回避するために以下のように t を shadowing する方法が推奨されていた。\nfor t := 1; ; t++ { t := t // Shadowing to capture the current value of t ... } 最近のバージョン（1.22 以降）では for ブロック内でループ変数が内部の関数（閉包）から直接参照されている場合は暗黙的に shadowing が行われる。 上述のような記述は不要になったわけだ。\nWaitGroup.Go メソッド Go 1.25 で sync.WaitGroup に Go() メソッドが追加された。 実装はこんな感じ。\n// Go calls f in a new goroutine and adds that task to the [WaitGroup]. // When f returns, the task is removed from the WaitGroup. // // The function f must not panic. // // If the WaitGroup is empty, Go must happen before a [WaitGroup.Wait]. // Typically, this simply means Go is called to start tasks before Wait is called. // If the WaitGroup is not empty, Go may happen at any time. // This means a goroutine started by Go may itself call Go. // If a WaitGroup is reused to wait for several independent sets of tasks, // new Go calls must happen after all previous Wait calls have returned. // // In the terminology of [the Go memory model], the return from f // \u0026#34;synchronizes before\u0026#34; the return of any Wait call that it unblocks. // // [the Go memory model]: https://go.dev/ref/mem func (wg *WaitGroup) Go(f func()) { wg.Add(1) go func() { defer wg.Done() f() }() } つまり，Go() メソッド内部で Add(1) と Done() が呼び出され，かつ引数の関数 f を goroutine として起動する。 これを使うと，以下のようにコードが簡潔になる。\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand/v2\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) func main() { tasks := 5 // Number of tasks wg := sync.WaitGroup{} // WaitGroup to synchronize goroutines for t := range tasks { wg.Go(func() { fmt.Println(\u0026#34;Start Task:\u0026#34;, t+1) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t+1) }) } wg.Wait() // Wait for all goroutines to finish fmt.Println(\u0026#34;All Complete\u0026#34;) } この辺も定番の慣用句（idiom）だったので，Go() メソッドの追加は嬉しい改善点と言えるだろう。\nタスクの開始を待ち合わせる 前節とは異なり，特定の条件が成立するまで各 goroutine を停止し，条件が成立したら一斉に実行を再開したい場合がある。 条件が成立するまでタスクを止めるため，この実装パターンをバリア（Barrier）と呼ぶ。\nGo の標準パッケージにはバリア・パターンを直接提供する仕組みはないが，条件変数を制御する sync.Cond を用いて比較的簡単に実装できる。\n前節のコードを元に，指定した数の goroutine の起動が揃うまで待機し，揃った時点で一斉にタスクを開始するコードを実装してみよう。 まずはバリアパターンを駆動する構造体 Barrier を定義する。\ntype Barrier struct { total int // Number of goroutines to wait for count int // Current count of arrived goroutines cond *sync.Cond // Condition variable to manage waiting and signaling } この構造体の初期化関数を以下のように定義する。\nfunc NewBarrier(total int) *Barrier { return \u0026amp;Barrier{ total: total, count: 0, cond: sync.NewCond(\u0026amp;sync.Mutex{}), } } さらに Barrier に対して Wait() メソッドを定義する。\nfunc (b *Barrier) Wait() { b.cond.L.Lock() // Acquire the lock before modifying count defer b.cond.L.Unlock() // Ensure the lock is released when done b.count++ // Increment the count of arrived goroutines if b.count \u0026gt;= b.total { b.count = 0 b.cond.Broadcast() // Wake up all waiting goroutines } else { b.cond.Wait() // Wait until the barrier is released } } Wait() メソッドが呼ばれるたびに count がインクリメントされ，count が total に達したら cond.Broadcast() メソッドで全ての待機中 goroutine を起こす。\nBarrier を使った main() 関数はこんな感じ：\nfunc main() { tasks := 5 // Number of tasks barrier := NewBarrier(tasks) // Create a barrier for the tasks for t := range tasks { go func() { time.Sleep(time.Duration(rand.IntN(3)+1) * time.Second) // Simulate preparation time fmt.Println(\u0026#34;Ready Task:\u0026#34;, t+1) barrier.Wait() // Wait at the barrier fmt.Println(\u0026#34;Start Task:\u0026#34;, t+1) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t+1) }() } time.Sleep(10 * time.Second) fmt.Println(\u0026#34;All Complete\u0026#34;) } これを実行するとこんな感じになる。\n$ go run sample2.go Ready Task: 2 Ready Task: 3 Ready Task: 1 Ready Task: 4 Ready Task: 5 Start Task: 5 Start Task: 4 Start Task: 3 Start Task: 2 Start Task: 1 End Task: 2 End Task: 1 End Task: 3 End Task: 4 End Task: 5 All Complete 各 goroutine とも Ready 状態が揃ってからタスクを開始しているのが分かる2。\nさらにこれに前節の完了待ち合わせ機能を入れたコード全体は以下の通り：\npackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand/v2\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) type Barrier struct { total int // Number of goroutines to wait for count int // Current count of arrived goroutines cond *sync.Cond // Condition variable to manage waiting and signaling } func NewBarrier(total int) *Barrier { return \u0026amp;Barrier{ total: total, count: 0, cond: sync.NewCond(\u0026amp;sync.Mutex{}), } } func (b *Barrier) Wait() { b.cond.L.Lock() // Acquire the lock before modifying count defer b.cond.L.Unlock() // Ensure the lock is released when done b.count++ // Increment the count of arrived goroutines if b.count \u0026gt;= b.total { b.count = 0 b.cond.Broadcast() // Wake up all waiting goroutines } else { b.cond.Wait() // Wait until the barrier is released } } func main() { tasks := 5 // Number of tasks barrier := NewBarrier(tasks) // Create a barrier for the tasks wg := sync.WaitGroup{} // WaitGroup to synchronize goroutines wg.Add(tasks) // Add the number of tasks to the WaitGroup for t := range tasks { go func() { defer wg.Done() // Ensure Done is called when the goroutine completes time.Sleep(time.Duration(rand.IntN(3)+1) * time.Second) // Simulate preparation time fmt.Println(\u0026#34;Ready Task:\u0026#34;, t+1) barrier.Wait() // Wait at the barrier fmt.Println(\u0026#34;Start Task:\u0026#34;, t+1) time.Sleep(time.Duration(rand.IntN(5)+1) * time.Second) // Random duration between 1 and 5 seconds fmt.Println(\u0026#34;End Task:\u0026#34;, t+1) }() } wg.Wait() // Wait for all goroutines to finish fmt.Println(\u0026#34;All Complete\u0026#34;) } 起動条件は何でもいい。 今回のように決められた数の goroutine が揃ったら即起動でもいいし，特定の時刻が来たら待機中の goroutine を起こすでもいいだろう。 Channel と組み合わせる方法もあるかも知れない。\nブックマーク Go 1.22リリース連載始まります \u0026amp; ループの変化とTinyGo 0.31 | フューチャー技術ブログ [Go 1.25] WaitGroup.Go()を使って既存コードを書き換える際の注意点 参考図書 Go言語で学ぶ並行プログラミング　他言語にも適用できる原則とベストプラクティス impress top gearシリーズ James Cutajar (著), 柴田 芳樹 (著) インプレス 2024-12-04 (Release 2024-12-04) Kindle版 B0DNYMMBBQ (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 読書会のために購入。インプレス社の本は Kindle 版より版元で PDF 版を買うのがオススメ。「並行処理」について原理的な解説から丁寧に書かれている。 Go で解説されているが Go 以外の言語でも応用できる。 reviewed by Spiegel on 2025-01-25 (powered by PA-APIv5)\nプログラミング言語Go (ADDISON-WESLEY PROFESSIONAL COMPUTING SERIES) Alan A.A. Donovan (著), Brian W. Kernighan (著), 柴田 芳樹 (翻訳) 丸善出版 2016-06-20 単行本（ソフトカバー） 4621300253 (ASIN), 9784621300251 (EAN), 4621300253 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 著者のひとりは（あの「バイブル」とも呼ばれる）通称 “K\u0026amp;R” の K のほうである。この本は Go 言語の教科書と言ってもいいだろう。と思ったら絶版状態らしい（2025-01 現在）。復刊を望む！\nreviewed by Spiegel on 2016-07-13 (powered by PA-APIv5)\nGo言語 100Tips ありがちなミスを把握し、実装を最適化する impress top gearシリーズ Teiva Harsanyi (著), 柴田 芳樹 (著) インプレス 2023-08-18 (Release 2023-08-18) Kindle版 B0CFL1DK8Q (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 版元で PDF 版を購入可能。事実上の Effective Go とも言える充実の内容。オリジナルは敢えてタイトルに “tips” という単語を入れるのを避けたのに邦題が「100 Tips」とかなっていて，原作者がお怒りとの噂（あくまで噂）\nreviewed by Spiegel on 2023-08-18 (powered by PA-APIv5)\n初めてのGo言語 第2版 ―他言語プログラマーのためのイディオマティックGo実践ガイド Jon Bodner (著), 武舎 広幸 (翻訳) オライリー・ジャパン 2025-08-05 (Release 2025-08-05) 単行本（ソフトカバー） 4814401191 (ASIN), 9784814401192 (EAN), 4814401191 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 第2版。 Generics の説明が大幅に改訂されたらしい。練習問題も追加されている。\nreviewed by Spiegel on 2025-11-02 (powered by PA-APIv5)\nfor i := range n { ... } は Go 1.22 で導入された range over int と呼ばれる構文で ，for i := 0; i \u0026lt; n; i++ { ... } と同じ意味になる。糖衣構文（syntactic sugar）の一種ですな。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n今回の記事は『Go言語で学ぶ並行プログラミング』を参考にしている。 sync.Cond の Broadcast() メソッドは待機中の全ての goroutine を起こすため，実際には起こされたタイミングで本当に条件を満たしているかどうか確認する処理が必要かもしれない。もし条件を満たしていなければ再び Wait() する。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"
    },
    {
      "title": "太陽暦採用の日と明治の改暦",
      "section": "remark",
      "description": "「維新（＝易姓革命）」なんて高コストで碌でもないし，それを美化する政治家も碌でもないと分かるエピソードのひとつだろう。",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/adoption-of-the-solar-calendar/",
      "published": "2025-11-09T01:58:32+00:00",
      "update": "2025-11-09T03:23:54+00:00",
      "content": "立冬も過ぎ，節月区切りでは冬に突入した今日この頃。 みなさま如何お過ごしでしょうか。\n今回は Mastodon の TL で見かけた以下のポストを記事の起点にしよう。\nPost by @matsbox@366.koyomi.online View on Mastodon ん？ 今日（11月9日）って「太陽暦採用の日」なのか。 なんでこんな中途半端な日に？\n調べてみると，当時の明治五年（西暦1872年）十一月九日に太陽暦採用が布告されたらしい。 この「明治の改暦」に絡む様子が国立天文台のページで紹介されている。\n暦Wiki/歴史/日本の暦/6.明治維新と太陽暦 - 国立天文台暦計算室 この後，十二月二日の翌日を太陽暦の明治6年1月1日とし，新暦に切り換わった。 この間，わずか20日ほどしかなく，混乱を極めたそうな。 そもそも翌年（明治六年）のカレンダーは既に出来上がっていたのに，それが全て無駄になったのだ。 そりゃあ大変だったろう。\nこの突然の改暦の理由についても上述のリンク先で紹介されている。\nそれでもなお改暦を断行した理由は財政の問題にあると大隈伯昔日譚に記されています (国立国会図書館)。 明治四年に政府は月給制を採用しており (国立国会図書館)、このままではうるう月のある明治六年には1か月多く給料を払う必要がありました。 しかし、太陽暦を採用すればうるう月がなくなり、その分の給料は不要となります。 おまけに、布告第374号において2日間だけの12月も支払わないこととし、合計2か月分の給料を節約したのです (国立国会図書館)。 明治維新と太陽暦より 鬼畜じゃねぇ（笑）\n現在なら「不可避の時代の流れ」と言えるだろうが，基本的に「維新（＝易姓革命）」なんて高コストで碌でもないし，それを美化する政治家も碌でもないと分かるエピソードのひとつだろう。\n1873年の暦象についても国立天文台に解説ページがあるので，ここから太陰太陽暦の決定に必要な朔（新月）と二十四節気（の中気）の情報を拾ってみる。\n朔 中気 暦月 1873年1月29日 雨水 1873年2月18日 一月 1873年2月27日 春分 (二月中気) 1873年3月20日 二月 1873年3月28日 穀雨 1873年4月20日 三月 1873年4月27日 小満 1873年5月21日 四月 1873年5月26日 夏至 (五月中気) 1873年6月21日 五月 1873年6月25日 大暑 1873年7月23日 六月 1873年7月24日 閏六月 1873年8月23日 処暑 1873年8月23日 七月 1873年9月22日 秋分 (八月中気) 1873年9月23日 八月 1873年10月21日 霜降 1873年10月23日 九月 1873年11月20日 小雪 1873年11月22日 十月 1873年12月20日 冬至 (十一月中気) 1873年12月22日 十一月 というわけで，太陰太陽暦のまま明治六年を迎えていたら閏六月が入って13ヶ月分の給料を払うことになっていたわけだ。 そういや中国は今も太陰太陽暦なのだが，今年は13ヶ月分の給料を貰っているのだろうか？\nなお閏年のルールについては，さらに遅れること明治31年（1898年）の勅令第90号にて「神武天皇即位紀元年数ノ四ヲ以テ整除シ得ヘキ年ヲ閏年トス但シ紀元年数ヨリ六百六十ヲ減シテ百ヲ以テ整除シ得ヘキモノノ中更ニ四ヲ以テ商ヲ整除シ得サル年ハ平年トス」と定められ，これがそのまま令和の現在も続いている。 まぁ，翌々年の明治33年（1900年）はグレゴリオ暦では平年なので，これに合わせる必要があったのだろう。 ホンマに間抜けな話である。\n勅令の文言を見れば分かると思うが，日本の現行暦は，厳密にはグレゴリオ暦ではない。 暦の起点が「神武天皇即位紀元年」になっているからだ。 とはいえ互換暦ではあるので，日常生活には1ミリも支障はない。\n「明治の改暦」の動機が（維新を掲げる）政府の財政事情にあったにせよ，これが天皇制および明治政府の権威を示す「正朔を奉ず」儀式として機能したことは否めない。 この辺が「明治維新」を近代化の象徴として単純に礼賛できない理由なんだよなぁ。\n余談だが「明治の改暦」にちなんで12月3日は「カレンダーの日」とされているのだが，これを定めたのはカレンダーの業界団体らしい。\nカレンダーの日（12月3日）｜意味や由来・広報PRに活用するポイントや事例を紹介 | PR TIMES MAGAZINE 実施の僅か20日前に布告され，弘暦者（頒暦者あるいは暦問屋）を含む世間を混乱のるつぼに陥れた「明治の改暦」を象徴する「12月3日」をカレンダー業界が「カレンダーの日」と定めたというのは，めっさ皮肉が効いてると思うのは私だけだろうか。\nブックマーク 「暦」日本史 （再掲載） 『猫暦』を読んだ 冬至に関する与太話 「新暦七夕」なるものは存在しない 立春も動き出す お彼岸 第五の季節：土用 春夏秋冬は「四季」ではない？ 地球が遠日点を通過する話 旧暦の閏月と旧暦2033年問題 参考図書 天文年鑑 2025年版 天文年鑑編集委員会 (編集) 誠文堂新光社 2024-12-05 (Release 2024-12-05) 単行本 4416723660 (ASIN), 9784416723661 (EAN), 4416723660 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 天文ファン必携。2025年版。これが届くと年末って感じ。\nreviewed by Spiegel on 2024-12-05 (powered by PA-APIv5)\n天体物理学 Arnab Rai Choudhuri (著), 森 正樹 (翻訳) 森北出版 2019-05-28 単行本 4627275110 (ASIN), 9784627275119 (EAN), 4627275110 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 興味本位で買うにはちょっとビビる値段なので図書館で借りて読んでいたが，やっぱり手元に置いておきたいのでエイヤで買った。まえがきによると，この手のタイプの教科書はあまりないらしい。内容は非常に堅実で分かりやすい。理系の学部生レベルなら問題なく読めるかな。\nreviewed by Spiegel on 2019-11-13 (powered by PA-APIv5)\n"
    },
    {
      "title": "出雲・斐川を彷徨う（お散歩カメラ 2025-11-08）",
      "section": "remark",
      "description": "玉湯町にスタバがあるのか / 弁慶岩，来待ストーン，道の駅… / 斐川町を彷徨う / 出雲市内を走るときは目的地を明確に",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/wandering-hikawa-izumo/",
      "published": "2025-11-08T12:22:07+00:00",
      "update": "2025-11-08T12:25:15+00:00",
      "content": "前回のお散歩カメラで出雲市斐川町あたりまでならさほど苦もなく自転車で行けることが分かったので，今回はまず道の駅湯の川を目指して，そこからあちこち回ってみようかなと緩い計画を立てる。\n玉湯町にスタバがあるのか 国道9号線は交通量が多いためできるだけ避けているのだが，玉造温泉のある玉湯町の9号線沿いにスタバがあることに気がついた。 あとで調べたらスタバのある辺りまでは（自転車通行可な）歩道が整備されているみたいなので，私でも行けそうである。\nというわけで，まずはスタバでカフェインを補給する。\nスタバ（玉湯町）でカフェインドーピング | Flickr 店内は窓が大きく取られ開放的な空間になっている。 朝のうちだったせいか客で混雑するということもなく，ゆっくりと過ごせた。 ドライブスルーもあるよ。\nドーピングもできたし，出かけようか。\n弁慶岩，来待ストーン，道の駅\u0026hellip; 国道9号線沿いを西進する。\n松江は弁慶好き | Flickr 前回の宍道湖一周でも気付いていたが，なんだ？ 弁慶岩って。\n玉湯町の「弁慶岩」 なんか弁慶が蹴っ飛ばした岩とかいう由来があるらしいが，実際には武蔵坊弁慶1 がいた時代より前からあるらしい（笑） 今度見に行ってみるか。\nJR来待駅を過ぎたあたり。\n来待ストーンはそのうち行く | Flickr 「来待ストーン」は聞いたことある。 あとで地図で確認してみたら自転車でも行けそうである。 これも今度行ってみよう。\nちなみに「大森の湯」は2020年から休業中だそうで。 もともと松江市の所有だったのだが，民間に無償譲渡したらしい。\n大森の湯・いろり茶屋の民間譲渡／松江市ホームページ 「令和8年度中のリニューアルオープン」を目指しているそうで，来年のどこかで利用できるようになるってことかな。\nいよいよ出雲市斐川町に入る。\n出雲市へ | Flickr さらに西進して湯の川温泉へ。\n日本三美人の湯 湯の川温泉 | Flickr 前に湯の川温泉で「日帰り」できる施設を軽くググってみたのだが，どうもピンと来る施設がない。 特に露天風呂は宿泊客のみ開放している感じ。 これはしばらく保留かな。\nこうして道の駅湯の川に着いたのだが\u0026hellip; 駐輪場がない orz\n駐車場スペースはたっぷり取ってあって EV 車用の充電ステーションとかもあるみたいなんだけど，自転車を駐めれるスペースが見当たらない。 というわけで，諦めた。\nとりあえず近くにある JR 荘原駅まで移動して休憩。\nJR荘原駅 | Flickr 大黒様と白兎？（JR荘原駅） | Flickr さて，これからどうしよう。\n斐川町を彷徨う とりあえず昼飯が食いたい。 道の駅湯の川で調達しようと思っていたのが，あてが外れてしまったので，国道9号線沿いをさらに西に進んで食事ができそうなところを探しつつ，ぶらぶらと走ってるうちに斐伊川にたどり着く。\n斐伊川（神立橋） | Flickr \u0026hellip;引き返すか。 昼飯はさっき見かけた十割そば塩名人にしよう。\n名人そばと塩むすび | Flickr 美味しゅうございました。\nその後も斐川町内をぶらぶらと走りつつ松江まで戻る。\n松江に帰る | Flickr 松江市に入ってからは真っ直ぐ市内まで戻る。\n休憩中（コメダ喫茶店） | Flickr お疲れ様でした，自分。\n出雲市内を走るときは目的地を明確に 実は先日，従兄夫婦に誘ってもらって斐川町にあるオムライスが有名な店に連れてってもらっていた。\n出雲のプチレストラン クルトン ふわとろオムライス | Flickr ふわとろなオムライス。 めがっさ美味かった。 \u0026hellip;じゃなくて，このときに乗せてもらった車から景色を眺めていたのだが，出雲市ってやたら美術館や博物館多くね？ あと，当然ながら史跡の類も多い。 まぁ，古代出雲の一大勢力があった土地だからなぁ。\nただ，施設間の距離が離れているため（自動車ならともかく）自転車で何となく走ってると迷ってしまいそうだ。\n今度出雲市方面に行くときは，ちゃんと目的地を決めてから行くようにしないと。 とりあえず荒神谷博物館には行ってみたい。\n色々と反省点はありつつ，ちょっとずつ行動範囲が広がるのはやっぱり楽しい。\n参考 Canon コンパクトデジタルカメラ PowerShot ZOOM 写真と動画が撮れる望遠鏡 PSZOOM キヤノン (Release 2020-12-10) エレクトロニクス B08L4WKDZ7 (ASIN), 4549292179675 (EAN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 望遠鏡型コンパクトデジカメ。メモリと充電器（要 Power Delivery）は別に用意する必要がある。使い勝手はまぁまぁ。\nreviewed by Spiegel on 2022-12-04 (powered by PA-APIv5)\nGARMIN(ガーミン)Edge Explore 2 Power サイクルコンピューター【日本正規品】 ガーミン(GARMIN) (Release 2022-09-22) スポーツ用品 B0BD7FGVR6 (ASIN), 0753759310660 (EAN), 753759310660 (UPC) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; Garmin 製のルート探索・ナビゲーション特化のサイコン。タッチパネル助かる。充電ポートは USB-C (not PD)。また別売りの変換ケーブルを使いモバイルバッテリからパワーマウント経由で給電することもできる。ライドタイプが「ロード」「屋内」「グラベル」の3種類しかない。 Live Segment 非対応。\nreviewed by Spiegel on 2024-08-11 (powered by PA-APIv5)\nアワータイムイエロー ReGLOSS (メインアーティスト) hololive RECORDS 2025-09-14 (Release 2025-09-14) MP3 ダウンロード B0FNVV83KN (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; MV がカッコよくて速攻で買った。 mora で高解像度版が買える。秋のイメージらしいがノリのいい曲。\nreviewed by Spiegel on 2025-09-14 (powered by PA-APIv5)\n落噺 (儒烏風亭らでん SOLO) ReGLOSS (メインアーティスト) cover corp. 2025-08-03 (Release 2025-08-03) MP3 ダウンロード B0FKB9Y1GL (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 「おとしばなし」と読むらしい。語るように歌い，歌うように語る。「儒烏風亭らでん」らしい秀逸な作品。 mora で高解像度版が買える。\nreviewed by Spiegel on 2025-08-03 (powered by PA-APIv5)\nたしか武藏房弁慶（弁慶法師）って吾妻鏡に名前は出てくるけど，姿およびエピソードの殆どは創作と聞いている。これも一種の神話だよな。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"
    },
    {
      "title": "住所データに関する覚え書き",
      "section": "remark",
      "description": "デジタル庁の「アドレス・ベース・レジストリ」について",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/notes-on-address-data/",
      "published": "2025-11-04T08:28:25+00:00",
      "update": "2025-11-04T08:29:45+00:00",
      "content": "Bluesky の TL で見かけた記事から。\n住所の「表記揺れ」解決で官民の負担削減、災害支援も　アドレス・ベース・レジストリが目指す「データを自動的に使える未来」 ｜デジタル庁ニュース アドレス・ベース・レジストリ｜デジタル庁 書いてる内容がイマイチよく分からなかったので，順を追って整理してみよう。\n住所は2つある 実際にやりとりされる住所には通り名とかあったり色々複雑だけど，お役所なんかでやりとりする住所には大きく2つあるらしい。\nアドレス・ベース・レジストリ｜デジタル庁より 「住居表示を実施しているアドレス」というのは住所の最後の方に「○○番○○号」とか付いてるやつ。 一方「住居表示を実施していないアドレス」というのは土地に対する住所だそうで，不動産に絡む手続きなどで使われるらしい。 なんで2つに分かれているかというと根拠となる法律が違うからで，住居表示は「住居表示に関する法律（住居表示法）」，土地の住所は「不動産登記法」に基づいているそうだ1。\n住所情報の管理主体は3つある 確かに法律は2つに分かれているけど「別に2つに分ける必要なくね？」って思うよね。 実は上述に示す住所の各要素を管理している主体は3つに分かれているらしい。\n住所の「表記揺れ」解決で官民の負担削減、災害支援も　アドレス・ベース・レジストリが目指す「データを自動的に使える未来」 ｜デジタル庁ニュースより じゃけこんな面倒臭いことになってるのか orz\n都道府県および市区町村は全国地方公共団体コードとしてコード化されている。 街区符号・住居番号・地番はそもそもコードである。\n問題は町字 (まちあざ) で，これがコード化されていなのである。\nアドレス・ベース・レジストリ というわけでアドレス・ベース・レジストリ2（Address Base Registry; ABR）が整備されたということのようだ。 ABR では町字にコードが付与されただけでなく街区符号・住居番号・地番にも改めてコード（番号）が振られている3。 各データはダウンロードページから取得できる。\nたとえば松江市役所の住所は「島根県松江市末次町86」なので\nコード種別 ID 名称 全国地方公共団体コード 322016 島根県松江市 町字コード 0083000 末次町 住居表示フラグ 住居表示なし － 住居表示-街区符号 － － 住居表示-住居番号 － － 地番 000860000000000 86 となる。 末次町は「住居表示なし」なので住居表示マスターではなく地番マスターから検索する。\nなお町字と郵便番号が対応している場合は，町字マスターに郵便番号が付与されている。 郵便番号が対応していない町字もあるので注意。 ホンマ面倒臭いよな。\nABR データの利用規約は以下を参照のこと。\nアドレス・ベース・レジストリの利用規約｜デジタル庁 最後の方に\n本利用ルールは、クリエイティブ・コモンズ・ライセンスの表示4.0国際に規定される著作権利用許諾条件。以下「CCBY」といいます。）と互換性があり、本利用ルールが適用されるコンテンツはCCBYに従うことでも利用することができます。 アドレス・ベース・レジストリの利用規約｜デジタル庁より と書かれているので ライセンス下で利用できるようだ。\n住所データの正規化 ABR データだけでは「表記揺れ」は解決できない。 何らかの正規化処理が必要になる。\n正規化ツールとして「ABR ジオコーダー（abr-geocoder）」が用意されている。\ndigital-go-jp/abr-geocoder: Address Base Registry Geocoder by digital.go.jp digital-go-jp/abr-geocoder-web: Address Base Registry Geocoder Web Client by digital.go.jp ABR ジオコーダーは API サービスまたは Web サービスを構築するためのツールキットで TypeScript で実装されているようだ。 どこかで API サービスを提供しているってわけじゃないみたい。\nabr-geocoder | ABRジオコーダー（abr-geocoder）は、アドレス・ベース・レジストリ（ABR）で整備された住所・所在地を用いたジオコーダーです。より バックエンド DB は SQLite。 ABR データを SQLite にインポートするスクリプトも同梱されている。\n正規化ルールは以下の通り：\nアドレス・ベース・レジストリの階層構造・表記に基づいた住所の正規化 都道府県省略を補完 東京都千代田区 → 東京都千代田区 千代田区 → 東京都千代田区 住居表示、地番をハイフン表記に正規化 1番3号 → 1-3 1番地3 → 1-3 全角数字を半角数字に正規化 １番３号 → 1-3 １−３ → 1-3 全角英字を半角英字に正規化 ＤＩＧＩＴＡＬビル → DIGITALビル 表記揺れ正規化 JIS 第2水準 =\u0026gt; 第1水準、旧字体 =\u0026gt; 新字体 変換 半角ｶﾅ =\u0026gt; 全角カナ 変換 漢数字、全角数字 =\u0026gt; 半角数字 変換 全角英字 =\u0026gt; 半角英字、全角数字 =\u0026gt; 半角数字 変換 揺らぎ =\u0026gt; ひらがな 変換 例 壱, 一, 1, １などの表記揺れに対応 霞ケ関, 霞ヶ関, 霞ガ関 → 霞が関 篠ﾉ井, 篠の井, 篠之井 → 篠ノ井 正規化仕様より Go でコマンドライン版で書けないかなぁ。 仕事ならやるんだけど（笑）\n【おまけ1】 Geolonia による住所正規化ツール Geolonia は ABR を使った API サービスを構築するためのツールを提供している。\ngeolonia/japanese-addresses-v2: 全国の住所データAPI さらに正規化ライブラリも提供しているようだ。\ngeolonia/normalize-japanese-addresses: オープンソースの住所正規化ライブラリ。 Geolonia では有料のサービスも提供していて実績もあるみたいなので，業務で使うなら検討してもいいかもしれない。\n【おまけ2】 CSV ファイルエディタ CSVI CSVI はテキストベースのターミナル上で動作する CSV ファイルエディタだ。\nhymkor/csvi: Terminal CSV Editor Go 製のツールで Windows および UNIX 系の OS で動作する。 シングルバイナリ構成で Windows, Linux, FreeBSD および macOS 用のバイナリが提供されている。\nUbuntu 機に入れて使っているが，ビュアーとしてもすごく快適。\ncsvi スナップショット かなり大きいファイルでもストレスなく開けるっぽいので，普段ターミナル上で作業している人にはオススメである。\nブックマーク 住所コードと郵便番号に関する覚え書き 住居表示がない場合もある。たとえば松江市役所の住所は「島根県松江市末次町86」だが，最後の「86」は街区符号でも住居番号でもなく地番である。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nアドレス・ベース・レジストリの法律上の正式名称は「公的基礎情報データベース」と呼ぶらしい。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n例外的に街区符号や地番に数字以外の文字が含まれる場合があるらしい。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"
    },
    {
      "title": "宍道湖を一周してみる（お散歩カメラ 2025-11-03）",
      "section": "remark",
      "description": "宍道湖南岸から反時計回りに周るルート",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/03-osanpo-camera/",
      "published": "2025-11-03T13:07:29+00:00",
      "update": "2025-11-03T22:46:32+00:00",
      "content": "中海の北半分を半周するという年初の目標は達成したので，今回は宍道湖を一周してみることにした。\n宍道湖の沿岸の道を一周すると（コースにもよるが）50〜60kmの道のりになる。 今年の始め頃なら「ちょっと無理かなぁ」という感じだったが，今ならできそう。\n実は宍道湖一周は夏くらいから考えていたのだが，連日猛暑日の中を一日中走り回るのはしんどいので，涼しくなってから（具体的には11月に入ってから）と思っていたのだ。 ただ，ノンストップで一周するのは（疲れるだけで）楽しくないので，まずは宍道湖南岸を通ってゴビウスを目指し，そこで休憩してから北岸を通って松江市内に戻る反時計回りのルートとした。\n宍道湖南岸からゴビウスへ向かうルートはこちら：\n宍道湖南岸→ゴビウスより ゴビウスから北岸を通って松江市内に戻るルートは以前も通ったので割愛。\nでは，さっそく行ってみようか。\nカフェインでドーピング 出掛ける前にカフェインを摂取するためコメダに入ろうとしたのだが，列ができてるよ。 喫茶店で並ぶなや，都会じゃあるまいし orz\nコメダを諦めてそのまま出発するか別の店に行くか考えていると，雨がパラパラと\u0026hellip;\n今日の宍道湖（嫁ヶ島） | Flickr 嫁ヶ島の向こう側（出雲市側）が雨でけぶってる？ ありゃりゃー\nとりあえず，JR松江駅の有料駐輪場に自転車を駐めて駅ビルへ。 スタバが比較的空いてたので，そこでカフェインを補給する。\nスタバで雨宿り中 | Flickr tenki.jp の雨雲レーダーを見ると，どうやら雨雲は南下中のようで，以後雨は大丈夫そう。 落ち着いたら出発しようか。 その前にコンビニでおむすびを買っておく（燃料補給用）。\n宍道湖南岸→ゴビウス まずは浜乃木湯町線（県道263号線）に入って西進する。 途中，布志名才ノ神遺跡に立ち寄って拝んでおく（けっこうお賽銭が供えられてた）。\n布志名才ノ神遺跡 | Flickr 浜乃木湯町線から国道9号線へ。\nおっ，ラッセル車がおる。\nラッセル車がおる（JR山陰本線） | Flickr JR来待 (きまち) 駅を通過。\nJR来待駅 | Flickr どんどん進むよ。 JR宍道駅も通過。\nJR宍道駅 | Flickr いよいよ国道9号線を離れ北上し，出雲市斐川町に入る。\n斐川町に入る | Flickr なんかカカシが並んでる。\n座ってるカカシが怖い | Flickr 特に座ってるカカシがこえーよ！ 夜に暗がりで見たらトラウマになりそう\u0026hellip;\nさらに北上して平田へ。\n雲州平田（うんすーふらた） | Flickr さらにさらに北上して斐伊川にかかる灘橋を渡る。\n斐伊川（灘橋） | Flickr 斐伊川はいわゆる天井川なのだが，ホンマ砂まみれだな。 砂がところどころ黒く見えるのは砂鉄っスね。 この砂鉄を原料に和鋼が造られるわけですな。\nおっ，築地松だ。\n築地松（ついじまつ） | Flickr あとで知ったのだが「ついじまつ築地松景観保全対策推進協議会」なんてのがあるらしい。\n築地松の起こりは定かではありませんが、郷村社会の成り立ちのころ、この地方の豪族が河川の洪水時に浸水を防ぐため、屋敷の土地の高さを数メートル高くしたうえ、屋敷周りに土居（築地）を築き、その土居を固めるため水に強い樹木や竹を植えたのが、築地松のはじまりと言われています。もともとこの出雲平野は、日本でも有数の湿地であったため水はけが悪く、畑地の作物づくりには高畝式という独特なやり方が近年まで行われてきました。そういった土地環境も築地松誕生の一因になつたともいえるでしょう。 築地松とは|ついじまつ築地松景観保全対策推進協議会ウェブサイトより そうなのか。 子供の頃は冬の北西季節風から守るために造られたと聞いたような気がする。\nようやくゴビウスに到着。\nゴビウス到着 | Flickr ゴビウスを含む敷地内に多目的棟ってのがあって，飲食もできるらしい。 実際におべんとうを広げてる家族もいた。 私も買ってきたおむすびを貪ってエネルギー補給。\nゴビウスに目ぼしいイベントは見当たらなかったので，そのまま松江市内に戻りますか。\n宍道湖北岸→松江市内 松江市内⇄ゴビウス のルートを通るのは3回目なので，寄り道しながらのんびり帰る。\n休憩中（道の駅 秋鹿なぎさ公園） | Flickr 十四夜の月が登ってきた。\n月とビル（山陰合同銀行本店ビル） | Flickr 反対側は夕日。\n今日の宍道湖（嫁ヶ島 夕景） | Flickr よし。 嫁ヶ島まで戻れた。 これで宍道湖一周達成。\n宍道湖南岸の道は意外と走りやすい 国道9号線（バイパスじゃないほう）は自転車に優しくないイメージがあったが，少なくとも玉湯川から西側は自転車通行可能な歩道が整備されていてアップダウンも少なく走りやすかった。 斐川町くらいまでなら私でも苦もなく走れそうだ。 これでまた少し行動範囲が広がったな。\n次はどこへ行こうか。\n参考 Canon コンパクトデジタルカメラ PowerShot ZOOM 写真と動画が撮れる望遠鏡 PSZOOM キヤノン (Release 2020-12-10) エレクトロニクス B08L4WKDZ7 (ASIN), 4549292179675 (EAN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 望遠鏡型コンパクトデジカメ。メモリと充電器（要 Power Delivery）は別に用意する必要がある。使い勝手はまぁまぁ。\nreviewed by Spiegel on 2022-12-04 (powered by PA-APIv5)\nGARMIN(ガーミン)Edge Explore 2 Power サイクルコンピューター【日本正規品】 ガーミン(GARMIN) (Release 2022-09-22) スポーツ用品 B0BD7FGVR6 (ASIN), 0753759310660 (EAN), 753759310660 (UPC) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; Garmin 製のルート探索・ナビゲーション特化のサイコン。タッチパネル助かる。充電ポートは USB-C (not PD)。また別売りの変換ケーブルを使いモバイルバッテリからパワーマウント経由で給電することもできる。ライドタイプが「ロード」「屋内」「グラベル」の3種類しかない。 Live Segment 非対応。\nreviewed by Spiegel on 2024-08-11 (powered by PA-APIv5)\nアワータイムイエロー ReGLOSS (メインアーティスト) hololive RECORDS 2025-09-14 (Release 2025-09-14) MP3 ダウンロード B0FNVV83KN (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; MV がカッコよくて速攻で買った。 mora で高解像度版が買える。秋のイメージらしいがノリのいい曲。\nreviewed by Spiegel on 2025-09-14 (powered by PA-APIv5)\n落噺 (儒烏風亭らでん SOLO) ReGLOSS (メインアーティスト) cover corp. 2025-08-03 (Release 2025-08-03) MP3 ダウンロード B0FKB9Y1GL (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 「おとしばなし」と読むらしい。語るように歌い，歌うように語る。「儒烏風亭らでん」らしい秀逸な作品。 mora で高解像度版が買える。\nreviewed by Spiegel on 2025-08-03 (powered by PA-APIv5)\n"
    },
    {
      "title": "豆名月（十三夜，季秋の名月？）",
      "section": "remark",
      "description": "今日の午後は天気が良さそうなので，温泉の後，お散歩へ",
      "author": "Spiegel",
      "license": "http://creativecommons.org/licenses/by-sa/4.0/",
      "url": "https://text.baldanders.info/remark/2025/11/mame-meigetsu-on-the-thirteenth-night-of-late-autumn/",
      "published": "2025-11-02T10:56:20+00:00",
      "update": "2025-11-04T09:36:31+00:00",
      "content": "11月初っ端の三連休。 いかがお過ごしでしょうか。\n松江は天気が微妙でなかなか遊びに出掛けられないのだが，今日の午後は天気が良さそうなので，とりあえず八雲温泉へ。\n八雲温泉上がりのコーヒー牛乳 | Flickr 木次乳業さん，いつもお世話になっています。\n時間が中途半端なので，中海の意東海岸まで行って帰るお散歩コース。\n中海と大山（意東海岸） | Flickr おー。 雲が多いので無理かと思ったが，大山が見えてる。\n帰り道。 ふと見上げたら月に向かって飛行機が飛んでるように見える。 慌ててシャッターを切った。\n十三夜の月と飛行機 | Flickr そういえば今日は十三夜（新月（朔）の日を一日 (ついたち) として十三日目の夜）である。 旧暦九月の十三夜の月は「豆名月」とか「栗名月」とか呼ばれている。 ちなみに先月の中秋の名月は「芋名月」などと呼ばれたりする。\n旧暦八月の十五夜の月が「中秋の名月」なんだから，旧暦九月の十三夜の月は「季秋の名月」とか呼んだりしないのだろうか。 聞いたことないけど（笑）\nちなみに今度の満月（2025-11-05）は2025年で最も地球に近い満月らしい。 俗に言う「スーパームーン1」というやつやね。 晴れるといいですねぇ。\nさらに 2025-11-07 は立冬。 伝統的季節の節月区切りでは立冬から立春までが冬になる。 なお，天文学的季節では冬至から春分までが冬らしい。\nブックマーク 春夏秋冬は「四季」ではない？ 2025年11月の星空情報（十三夜と土星／地球に近い満月／月と木星が接近／11月の月の暦） - YouTubeより 参考 Canon コンパクトデジタルカメラ PowerShot ZOOM 写真と動画が撮れる望遠鏡 PSZOOM キヤノン (Release 2020-12-10) エレクトロニクス B08L4WKDZ7 (ASIN), 4549292179675 (EAN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 望遠鏡型コンパクトデジカメ。メモリと充電器（要 Power Delivery）は別に用意する必要がある。使い勝手はまぁまぁ。\nreviewed by Spiegel on 2022-12-04 (powered by PA-APIv5)\nGARMIN(ガーミン)Edge Explore 2 Power サイクルコンピューター【日本正規品】 ガーミン(GARMIN) (Release 2022-09-22) スポーツ用品 B0BD7FGVR6 (ASIN), 0753759310660 (EAN), 753759310660 (UPC) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; Garmin 製のルート探索・ナビゲーション特化のサイコン。タッチパネル助かる。充電ポートは USB-C (not PD)。また別売りの変換ケーブルを使いモバイルバッテリからパワーマウント経由で給電することもできる。ライドタイプが「ロード」「屋内」「グラベル」の3種類しかない。 Live Segment 非対応。\nreviewed by Spiegel on 2024-08-11 (powered by PA-APIv5)\n天文年鑑 2025年版 天文年鑑編集委員会 (編集) 誠文堂新光社 2024-12-05 (Release 2024-12-05) 単行本 4416723660 (ASIN), 9784416723661 (EAN), 4416723660 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 天文ファン必携。2025年版。これが届くと年末って感じ。\nreviewed by Spiegel on 2024-12-05 (powered by PA-APIv5)\n天体物理学 Arnab Rai Choudhuri (著), 森 正樹 (翻訳) 森北出版 2019-05-28 単行本 4627275110 (ASIN), 9784627275119 (EAN), 4627275110 (ISBN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 興味本位で買うにはちょっとビビる値段なので図書館で借りて読んでいたが，やっぱり手元に置いておきたいのでエイヤで買った。まえがきによると，この手のタイプの教科書はあまりないらしい。内容は非常に堅実で分かりやすい。理系の学部生レベルなら問題なく読めるかな。\nreviewed by Spiegel on 2019-11-13 (powered by PA-APIv5)\nアワータイムイエロー ReGLOSS (メインアーティスト) hololive RECORDS 2025-09-14 (Release 2025-09-14) MP3 ダウンロード B0FNVV83KN (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; MV がカッコよくて速攻で買った。 mora で高解像度版が買える。秋のイメージらしいがノリのいい曲。\nreviewed by Spiegel on 2025-09-14 (powered by PA-APIv5)\n落噺 (儒烏風亭らでん SOLO) ReGLOSS (メインアーティスト) cover corp. 2025-08-03 (Release 2025-08-03) MP3 ダウンロード B0FKB9Y1GL (ASIN) 評価\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp; 「おとしばなし」と読むらしい。語るように歌い，歌うように語る。「儒烏風亭らでん」らしい秀逸な作品。 mora で高解像度版が買える。\nreviewed by Spiegel on 2025-08-03 (powered by PA-APIv5)\n「スーパームーン」は定義が曖昧だそうで，天文用語としては使えないらしい。まぁ，慣用句としてなら（そこで星に興味を持ってもらえるなら）アリなんだろうけど。伝統的七夕みたいに権威的な機関（IAU とかw）が定義を決めてしまえば，それであっという間に定着しそうだな。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n"
    }
  ]
}
