<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.146.4">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://text.baldanders.info/release/2019/07/first-release-books-data/">
<script defer src="/fa/js/all.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=BIZ+UDGothic:wght@400;700&family=BIZ+UDMincho&family=Inconsolata:wght@400;700&family=Noto+Color+Emoji&family=Noto+Sans:wght@400;700&family=Noto+Serif&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/local-font.css" type='text/css'>
<link rel="stylesheet" href="/css/baldanders-info-dark.css" type='text/css'>

<link rel="alternate" href="https://text.baldanders.info/index.xml" type="application/rss+xml" title="text.Baldanders.info">
<link rel="alternate" href="https://text.baldanders.info/index.json" type="application/json" title="text.Baldanders.info">
<meta name="google-site-verification" content="jTjBCslPtf8gwVatiY-GDgGv7pV5csa8aUOw1MRPUD4">
<link rel="me" href="https://fedibird.com/@spiegel">
<title>書籍データ取得ツール books-data の最初のリリース | text.Baldanders.info</title>
<meta property="og:title" content="書籍データ取得ツール books-data の最初のリリース">
<meta name="description" content="ちうわけで PA-API にも openBD にも対応する書籍情報取得ツールを作ったですよ。">
<meta property="og:description" content="ちうわけで PA-API にも openBD にも対応する書籍情報取得ツールを作ったですよ。">
<meta property="og:image" content="https://text.baldanders.info/images/attention/tools.png">
<meta name="author" content="Spiegel">


<meta name="twitter:card" content="summary">
<link rel="me" href="https://goark.fedicity.net/@spiegel">
<meta name="keywords" content="tools, book, books-data, pa-api, openbd, golang">
<link rel='prev' href='https://text.baldanders.info/release/2019/07/atom-1_39-is-released/' title='ATOM エディタ v.1.39 がリリースされたのだが...'>
<link rel='next' href='https://text.baldanders.info/release/vuln-list/' title='Ubuntu アプリケーションにおけるセキュリティ・アップデート一覧'>

<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"@id": "https://text.baldanders.info/",
	"inLanguage": "ja",
	"name": "text.Baldanders.info",
    "url": "https://text.baldanders.info/",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"image": "https://text.baldanders.info/images/attention/site.jpg",
	"description": "帰ってきた「しっぽのさきっちょ」"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Organization",
	"@id": "https://text.baldanders.info/#org",
	"name": "Spiegel",
	"logo": {
		"@type": "ImageObject",
		"@id": "https://text.baldanders.info/#logo",
		"url": "https://text.baldanders.info/images/avatar.jpg"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Person",
	"@id": "https://text.baldanders.info/#maker",
	"name": "Spiegel",
	"url": "https://baldanders.info/profile/",
	"image": "https://text.baldanders.info/images/avatar.jpg"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Blog",
	"@id": "https://text.baldanders.info/release/",
	"url": "https://text.baldanders.info/release/",
	"inLanguage": "ja",
	"name": "リリース情報",
	"description": "自作パッケージ・ツールと気になるツール・サービスのリリース情報について。",
	"image": "https://text.baldanders.info/images/attention/tools.png",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BreadcrumbList",
	"@id": "https://text.baldanders.info/release/2019/07/first-release-books-data/#breadcrumb-list",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"item": {
				"@id": "https://text.baldanders.info/"
			}
		},
		{
			"@type": "ListItem",
			"position": 2,
			"item": {
				"@id": "https://text.baldanders.info/release/"
			}
		}
	]
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BlogPosting",
	"@id": "https://text.baldanders.info/release/2019/07/first-release-books-data/",
	"url": "https://text.baldanders.info/release/2019/07/first-release-books-data/",
	"mainEntityOfPage": "https://text.baldanders.info/release/2019/07/first-release-books-data/",
	"inLanguage": "ja",
	"name": "書籍データ取得ツール books-data の最初のリリース",
	"description": "ちうわけで PA-API にも openBD にも対応する書籍情報取得ツールを作ったですよ。",
	"headline": "ちうわけで PA-API にも openBD にも対応する書籍情報取得ツールを作ったですよ。",
	"keywords": "tools, book, books-data, pa-api, openbd, golang",
	"image": "https://text.baldanders.info/images/attention/tools.png",
	"datePublished": "2019-07-27T12:46:19+00:00",
	"dateModified": "2019-07-27T20:24:04+00:00",
	"publisher": {
		"@id": "https://text.baldanders.info/#org"
	},
	"author": {
		"@id": "https://text.baldanders.info/#maker"
	},
	"license": "https://creativecommons.org/licenses/by-sa/4.0/"
}
</script>
</head>
<body>

<div id='container'>

<main>
<nav class="breadcrumb">
<a href="https://text.baldanders.info/">text.Baldanders.info</a> &raquo; <a href="/release/">リリース情報</a>
</nav>
<article>
<h1>書籍データ取得ツール books-data の最初のリリース</h1>
<nav class="tags">
	<div><a href='/tags/'>Tags</a>: #<a href="/tags/book/">book</a> #<a href="/tags/books-data/">books-data</a> #<a href="/tags/golang/">golang</a> #<a href="/tags/openbd/">openbd</a> #<a href="/tags/pa-api/">pa-api</a> #<a href="/tags/tools/">tools</a></div>
	<div class="cloud">
		<span class="share-color" title="Share this entry"><i class="fas fa-share-square"></i></span>&nbsp;:
		&nbsp;<a href="https://getpocket.com/edit?url=https%3a%2f%2ftext.baldanders.info%2frelease%2f2019%2f07%2ffirst-release-books-data%2f&amp;title=%e6%9b%b8%e7%b1%8d%e3%83%87%e3%83%bc%e3%82%bf%e5%8f%96%e5%be%97%e3%83%84%e3%83%bc%e3%83%ab%20books-data%20%e3%81%ae%e6%9c%80%e5%88%9d%e3%81%ae%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9" target="_blank"><span class="pocket-color"><abbr title="Share Pocket"><i class="fab fa-get-pocket" aria-hidden="true"></i></abbr></span></a>
		&nbsp;<a href="http://www.facebook.com/share.php?u=https%3a%2f%2ftext.baldanders.info%2frelease%2f2019%2f07%2ffirst-release-books-data%2f" target="_blank"><span class="facebook-color"><abbr title="Share facebook"><i class="fab fa-facebook-square" aria-hidden="true"></i></abbr></span></a>
		&nbsp;<a href="http://twitter.com/share?text=%e6%9b%b8%e7%b1%8d%e3%83%87%e3%83%bc%e3%82%bf%e5%8f%96%e5%be%97%e3%83%84%e3%83%bc%e3%83%ab%20books-data%20%e3%81%ae%e6%9c%80%e5%88%9d%e3%81%ae%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9&amp;url=https%3a%2f%2ftext.baldanders.info%2frelease%2f2019%2f07%2ffirst-release-books-data%2f" target="_blank"><span class="twitter-color"><abbr title="Share Twitter"><i class="fab fa-twitter-square" aria-hidden="true"></i></abbr></span></a>
		&nbsp;<a href="https://donshare.net/share.html?text=%e6%9b%b8%e7%b1%8d%e3%83%87%e3%83%bc%e3%82%bf%e5%8f%96%e5%be%97%e3%83%84%e3%83%bc%e3%83%ab%20books-data%20%e3%81%ae%e6%9c%80%e5%88%9d%e3%81%ae%e3%83%aa%e3%83%aa%e3%83%bc%e3%82%b9+by+@spiegel%40goark.fedicity.net%20+https%3a%2f%2ftext.baldanders.info%2frelease%2f2019%2f07%2ffirst-release-books-data%2f" target="_blank"><span class="mastodon-color"><abbr title="Share Mastodon"><i class="fa-brands fa-mastodon"></i></abbr></span></a>
	</div>
</nav>
<nav class="history">History in
  <a href="https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io/commits/master/release/2019/07/first-release-books-data/index.html">GitHub Page</a>
</nav>

<section><div>
<div class="noextension">
<a href="https://baldanders.info/public-domain-locked/" title="Public Domain Locked... | Baldanders.info"><img src="/images/Locked-150.png" alt="no extension" width="150"></a>
</div>
<p>いやね。
以前<a href="https://text.baldanders.info/release/2019/01/amazon-product-advertising-api/" target="_blank" title="しょうがないので Amazon アフィリエイト・リンク作成ツールを作ったですよ">公開</a>した <a href="https://affiliate.amazon.co.jp/assoc_credentials/home" target="_blank" title="Product Advertising API">PA-API</a> を使った書籍情報検索ツール <a href="https://github.com/spiegel-im-spiegel/amazon-item" target="_blank" title="spiegel-im-spiegel/amazon-item: Searching Amazon Items, Powered by PA-API">amazon-item</a> が一時的に使えなくなったのよ。
理由は30日以上売り上げがなかったため。</p>
<p>まぁ，ここはアフィリエイトが目的のブログじゃないし，いつかはこんなことになるだろうとは思っていたけど，やっぱ <a href="https://affiliate.amazon.co.jp/assoc_credentials/home" target="_blank" title="Product Advertising API">PA-API</a> に依存するのは拙いと思い代わりになるものを探してたんだけど，現状では <a href="https://openbd.jp/" target="_blank" title="openBD | 書誌情報・書影を自由に">openBD</a> くらいしか選択肢がないらしい。</p>
<p>ちうわけで <a href="https://affiliate.amazon.co.jp/assoc_credentials/home" target="_blank" title="Product Advertising API">PA-API</a> にも <a href="https://openbd.jp/" target="_blank" title="openBD | 書誌情報・書影を自由に">openBD</a> にも対応する書籍情報取得ツールを作ったですよ。</p>
<ul>
<li><a href="https://github.com/spiegel-im-spiegel/books-data" target="_blank">spiegel-im-spiegel/books-data: Search for Books Data</a></li>
<li><a href="https://github.com/spiegel-im-spiegel/books-data/releases/tag/v0.1.0" target="_blank">Release v0.1.0 · spiegel-im-spiegel/books-data</a></li>
</ul>
<p>例によって CLI のツール。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data -h
</span></span><span class="line"><span class="cl">Search for books data
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  books-data [flags]
</span></span><span class="line"><span class="cl">  books-data [command]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Available Commands:
</span></span><span class="line"><span class="cl">  help        Help about any command
</span></span><span class="line"><span class="cl">  openbd      Search for books data by openBD
</span></span><span class="line"><span class="cl">  paapi       Search for books data by PA-API
</span></span><span class="line"><span class="cl">  version     Print the version number
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Flags:
</span></span><span class="line"><span class="cl">      --debug   for debug
</span></span><span class="line"><span class="cl">  -h, --help    help for books-data
</span></span><span class="line"><span class="cl">      --pipe    Import description from Stdin
</span></span><span class="line"><span class="cl">      --raw     Output raw data from openBD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Use &#34;books-data [command] --help&#34; for more information about a command.
</span></span></code></pre></div><p><code>openbd</code> および <code>paapi</code> コマンドで取得先を切り換える。</p>
<h2><a href="https://affiliate.amazon.co.jp/assoc_credentials/home" target="_blank" title="Product Advertising API">PA-API</a> による書籍情報の取得</h2>
<p><a href="https://affiliate.amazon.co.jp/assoc_credentials/home" target="_blank" title="Product Advertising API">PA-API</a> による書籍情報の取得は以下のコマンドラインで行う。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data paapi -h
</span></span><span class="line"><span class="cl">Search for books data by PA-API
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  books-data paapi [flags] [description]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Flags:
</span></span><span class="line"><span class="cl">      --access-key string      PA-API: Access Key ID
</span></span><span class="line"><span class="cl">  -a, --asin string            Amazon ASIN code
</span></span><span class="line"><span class="cl">      --associate-tag string   PA-API: Associate Tag
</span></span><span class="line"><span class="cl">      --config string          config file (default $HOME/.paapi.yaml)
</span></span><span class="line"><span class="cl">  -h, --help                   help for paapi
</span></span><span class="line"><span class="cl">      --marketplace string     PA-API: Marketplace (default &#34;webservices.amazon.co.jp&#34;)
</span></span><span class="line"><span class="cl">  -r, --rating int             Rating of product
</span></span><span class="line"><span class="cl">      --review-date string     Date of review
</span></span><span class="line"><span class="cl">      --secret-key string      PA-API: Secret Access Key
</span></span><span class="line"><span class="cl">  -t, --template string        Template file
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Global Flags:
</span></span><span class="line"><span class="cl">      --debug   for debug
</span></span><span class="line"><span class="cl">      --pipe    Import description from Stdin
</span></span><span class="line"><span class="cl">      --raw     Output raw data from openBD
</span></span></code></pre></div><p><a href="https://affiliate.amazon.co.jp/assoc_credentials/home" target="_blank" title="Product Advertising API">PA-API</a> に必要な設定はホーム・ディレクトリの <code>.paapi.yaml</code> ファイルに記述する。
こんな感じ。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ cat ~/.paapi.yaml
</span></span><span class="line"><span class="cl">associate-tag: mytag-20
</span></span><span class="line"><span class="cl">access-key: AKIAIOSFODNN7EXAMPLE
</span></span><span class="line"><span class="cl">secret-key: 1234567890
</span></span></code></pre></div><p>これをセットした上で ASIN コードを指定して書籍情報を取得する。
結果は JSON フォーマットで出力される。
こんな感じ（一部データを端折っているのであしからず）。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data paapi -a 427406932X | jq .
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;Book&#34;: {
</span></span><span class="line"><span class="cl">    &#34;ID&#34;: &#34;427406932X&#34;,
</span></span><span class="line"><span class="cl">    &#34;Title&#34;: &#34;リーン開発の現場 カンバンによる大規模プロジェクトの運営&#34;,
</span></span><span class="line"><span class="cl">    &#34;URL&#34;: &#34;https://www.amazon.co.jp/exec/obidos/ASIN/427406932X/mytag-20&#34;,
</span></span><span class="line"><span class="cl">    &#34;Image&#34;: {
</span></span><span class="line"><span class="cl">      &#34;URL&#34;: &#34;https://images-fe.ssl-images-amazon.com/images/I/51llL1uygcL._SL160_.jpg&#34;,
</span></span><span class="line"><span class="cl">      &#34;Height&#34;: 160,
</span></span><span class="line"><span class="cl">      &#34;Width&#34;: 116
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">    &#34;ProductType&#34;: &#34;単行本（ソフトカバー）&#34;,
</span></span><span class="line"><span class="cl">    &#34;Authors&#34;: [
</span></span><span class="line"><span class="cl">      &#34;Henrik Kniberg&#34;
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;Creators&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;Name&#34;: &#34;角谷 信太郎&#34;,
</span></span><span class="line"><span class="cl">        &#34;Role&#34;: &#34;翻訳&#34;
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;Name&#34;: &#34;市谷 聡啓&#34;,
</span></span><span class="line"><span class="cl">        &#34;Role&#34;: &#34;翻訳&#34;
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;Name&#34;: &#34;藤原 大&#34;,
</span></span><span class="line"><span class="cl">        &#34;Role&#34;: &#34;翻訳&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;Publisher&#34;: &#34;オーム社&#34;,
</span></span><span class="line"><span class="cl">    &#34;Codes&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;Name&#34;: &#34;ASIN&#34;,
</span></span><span class="line"><span class="cl">        &#34;Value&#34;: &#34;427406932X&#34;
</span></span><span class="line"><span class="cl">      },
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;Name&#34;: &#34;EAN&#34;,
</span></span><span class="line"><span class="cl">        &#34;Value&#34;: &#34;9784274069321&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;PublicationDate&#34;: &#34;2013-10-26&#34;,
</span></span><span class="line"><span class="cl">    &#34;LastRelease&#34;: &#34;0001-01-01&#34;,
</span></span><span class="line"><span class="cl">    &#34;Service&#34;: {
</span></span><span class="line"><span class="cl">      &#34;Name&#34;: &#34;PA-API&#34;,
</span></span><span class="line"><span class="cl">      &#34;URL&#34;: &#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  &#34;Date&#34;: &#34;2019-07-27&#34;,
</span></span><span class="line"><span class="cl">  &#34;Rating&#34;: 0,
</span></span><span class="line"><span class="cl">  &#34;Star&#34;: [
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false
</span></span><span class="line"><span class="cl">  ]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>また適当なテンプレートファイルを指定することで任意のフォーマットで指定することも可能。
たとえば</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ cat template/template.html 
</span></span><span class="line"><span class="cl">&lt;div class=&#34;hreview&#34;&gt;{{ if .Book.Image.URL }}
</span></span><span class="line"><span class="cl">  &lt;div class=&#34;photo&#34;&gt;{{ if .Book.URL }}&lt;a class=&#34;item url&#34; href=&#34;{{ .Book.URL }}&#34;&gt;{{ end }}&lt;img src=&#34;{{ .Book.Image.URL }}&#34;{{ with .Book.Image.Width }} width=&#34;{{ . }}&#34;{{ end }} alt=&#34;photo&#34;&gt;{{ if .Book.URL }}&lt;/a&gt;{{ end }}&lt;/div&gt;{{ end }}
</span></span><span class="line"><span class="cl">  &lt;dl class=&#34;fn&#34;&gt;
</span></span><span class="line"><span class="cl">    &lt;dt&gt;{{ if .Book.URL }}&lt;a href=&#34;{{ .Book.URL }}&#34;&gt;{{ end }}{{ .Book.Title }}{{ if .Book.URL }}&lt;/a&gt;{{ end }}&lt;/dt&gt;{{ if .Book.Authors }}
</span></span><span class="line"><span class="cl">    &lt;dd&gt;{{ range $i, $v := .Book.Authors }}{{ if ne $i 0 }}, {{ end }}{{ $v }}{{ end }}&lt;/dd&gt;{{ end }}{{ if .Book.Creators }}
</span></span><span class="line"><span class="cl">    &lt;dd&gt;{{ range $i, $v := .Book.Creators }}{{ if ne $i 0 }}, {{ end }}{{ $v }}{{ end }}&lt;/dd&gt;{{ end }}
</span></span><span class="line"><span class="cl">    &lt;dd&gt;{{ .Book.Publisher }}{{ if gt .Book.PublicationDate.Year 1 }} {{ .Book.PublicationDate }}{{ end }}{{ if gt .Book.LastRelease.Year 1 }} (Release {{ .Book.LastRelease }}){{ end }}&lt;/dd&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;{{ .Book.ProductType }}&lt;/dd&gt;{{ if .Book.Codes }}
</span></span><span class="line"><span class="cl">    &lt;dd&gt;{{ range $i, $v := .Book.Codes }}{{ if ne $i 0 }}, {{ end }}{{ $v }}{{ end }}&lt;/dd&gt;{{ end }}{{ if gt .Rating 0 }}
</span></span><span class="line"><span class="cl">    &lt;dd&gt;Rating&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;{{ .Rating }}&#34;&gt;{{ range .Star }}&amp;nbsp;{{ if . }}&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;{{ else }}&lt;i class=&#34;far fa-star&#34;&gt;&lt;/i&gt;{{ end }}{{ end }}&lt;/abbr&gt;&lt;/dd&gt;{{ end }}
</span></span><span class="line"><span class="cl">  &lt;/dl&gt;
</span></span><span class="line"><span class="cl">  &lt;p class=&#34;description&#34;&gt;{{ .Description }}&lt;/p&gt;
</span></span><span class="line"><span class="cl">  &lt;p class=&#34;powered-by&#34; &gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;{{ .Date }}&#34;&gt;{{ .Date }}&lt;/abbr&gt; (powered by {{ if .Book.Service.URL }}&lt;a href=&#34;{{ .Book.Service.URL }}&#34; &gt;{{ end }}{{ .Book.Service.Name }}{{ if .Book.Service.URL }}&lt;/a&gt;{{ end }})&lt;/p&gt;
</span></span><span class="line"><span class="cl">&lt;/div&gt;
</span></span></code></pre></div><p>というテンプレートファイルを使えば</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data paapi -a 427406932X -r 4 -t template/template.html 
</span></span><span class="line"><span class="cl">&lt;div class=&#34;hreview&#34;&gt;
</span></span><span class="line"><span class="cl">  &lt;div class=&#34;photo&#34;&gt;&lt;a class=&#34;item url&#34; href=&#34;https://www.amazon.co.jp/exec/obidos/ASIN/427406932X/mytag-20&#34;&gt;&lt;img src=&#34;https://images-fe.ssl-images-amazon.com/images/I/51llL1uygcL._SL160_.jpg&#34; width=&#34;116&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
</span></span><span class="line"><span class="cl">  &lt;dl class=&#34;fn&#34;&gt;
</span></span><span class="line"><span class="cl">    &lt;dt&gt;&lt;a href=&#34;https://www.amazon.co.jp/exec/obidos/ASIN/427406932X/mytag-20&#34;&gt;リーン開発の現場 カンバンによる大規模プロジェクトの運営&lt;/a&gt;&lt;/dt&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;Henrik Kniberg&lt;/dd&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;角谷 信太郎 (翻訳), 市谷 聡啓 (翻訳), 藤原 大 (翻訳)&lt;/dd&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;オーム社 2013-10-26&lt;/dd&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;単行本（ソフトカバー）&lt;/dd&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;427406932X (ASIN), 9784274069321 (EAN)&lt;/dd&gt;
</span></span><span class="line"><span class="cl">    &lt;dd&gt;Rating&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;4&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;far fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
</span></span><span class="line"><span class="cl">  &lt;/dl&gt;
</span></span><span class="line"><span class="cl">  &lt;p class=&#34;description&#34;&gt;&lt;/p&gt;
</span></span><span class="line"><span class="cl">  &lt;p class=&#34;powered-by&#34; &gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2019-07-27&#34;&gt;2019-07-27&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34; &gt;PA-API&lt;/a&gt;)&lt;/p&gt;
</span></span><span class="line"><span class="cl">&lt;/div&gt;
</span></span></code></pre></div><p>ってな感じに整形してくれる。</p>
<h2><a href="https://openbd.jp/" target="_blank" title="openBD | 書誌情報・書影を自由に">openBD</a> による書籍情報の取得</h2>
<p><a href="https://openbd.jp/" target="_blank" title="openBD | 書誌情報・書影を自由に">openBD</a> による書籍情報の取得は以下のコマンドラインで行う。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data openbd -h
</span></span><span class="line"><span class="cl">Search for books data by openBD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  books-data openbd [flags] [description]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Flags:
</span></span><span class="line"><span class="cl">  -h, --help                 help for openbd
</span></span><span class="line"><span class="cl">  -i, --isbn string          ISBN code
</span></span><span class="line"><span class="cl">  -r, --rating int           Rating of product
</span></span><span class="line"><span class="cl">      --review-date string   Date of review
</span></span><span class="line"><span class="cl">  -t, --template string      Template file
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Global Flags:
</span></span><span class="line"><span class="cl">      --debug   for debug
</span></span><span class="line"><span class="cl">      --pipe    Import description from Stdin
</span></span><span class="line"><span class="cl">      --raw     Output raw data from openBD
</span></span></code></pre></div><p>使い方は <code>paapi</code> コマンドとほぼ同じ。
微妙にオプション名が違うのは仕様である。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data openbd -i 427406932X | jq .
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;Book&#34;: {
</span></span><span class="line"><span class="cl">    &#34;ID&#34;: &#34;9784274069321&#34;,
</span></span><span class="line"><span class="cl">    &#34;Title&#34;: &#34;リーン開発の現場 : カンバンによる大規模プロジェクトの運営&#34;,
</span></span><span class="line"><span class="cl">    &#34;Image&#34;: {
</span></span><span class="line"><span class="cl">      &#34;URL&#34;: &#34;https://cover.openbd.jp/9784274069321.jpg&#34;,
</span></span><span class="line"><span class="cl">      &#34;Height&#34;: 0,
</span></span><span class="line"><span class="cl">      &#34;Width&#34;: 0
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">    &#34;ProductType&#34;: &#34;Book&#34;,
</span></span><span class="line"><span class="cl">    &#34;Authors&#34;: [
</span></span><span class="line"><span class="cl">      &#34;Kniberg,Henrik／著 オーム社／著 オーム社開発局／著 市谷聡啓／翻訳 ほか&#34;
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;Publisher&#34;: &#34;オーム社&#34;,
</span></span><span class="line"><span class="cl">    &#34;Codes&#34;: [
</span></span><span class="line"><span class="cl">      {
</span></span><span class="line"><span class="cl">        &#34;Name&#34;: &#34;ISBN&#34;,
</span></span><span class="line"><span class="cl">        &#34;Value&#34;: &#34;9784274069321&#34;
</span></span><span class="line"><span class="cl">      }
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">    &#34;PublicationDate&#34;: &#34;2013-10-01&#34;,
</span></span><span class="line"><span class="cl">    &#34;LastRelease&#34;: &#34;0001-01-01&#34;,
</span></span><span class="line"><span class="cl">    &#34;Service&#34;: {
</span></span><span class="line"><span class="cl">      &#34;Name&#34;: &#34;openBD&#34;,
</span></span><span class="line"><span class="cl">      &#34;URL&#34;: &#34;https://openbd.jp/&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  &#34;Date&#34;: &#34;2019-07-27&#34;,
</span></span><span class="line"><span class="cl">  &#34;Rating&#34;: 0,
</span></span><span class="line"><span class="cl">  &#34;Star&#34;: [
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false,
</span></span><span class="line"><span class="cl">    false
</span></span><span class="line"><span class="cl">  ]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>ご覧の通り，圧倒的に情報量が少ない。
書籍を紹介する Web ページへのリンクもないとか，やる気のないことこの上ない。</p>
<p>たとえばテンプレートファイルを</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ cat template/template.bib.txt 
</span></span><span class="line"><span class="cl">@BOOK{Book:{{ .Book.ID }},
</span></span><span class="line"><span class="cl">    TITLE = &#34;{{ .Book.Title }}&#34;{{ if .Book.Authors }},
</span></span><span class="line"><span class="cl">    AUTHOR = &#34;{{ range $i, $v := .Book.Authors }}{{ if ne $i 0 }} and {{ end }}{{ $v }}{{ end }}{{ if .Book.Creators }}{{ range .Book.Creators }} and {{ . }}{{ end }}{{ end }}&#34;{{ end }}{{ if .Book.Publisher }},
</span></span><span class="line"><span class="cl">    PUBLISHER = {{ &#34;{&#34; }}{{ .Book.Publisher }}{{ &#34;}&#34; }}{{ end }}{{ if gt .Book.PublicationDate.Year 1 }},
</span></span><span class="line"><span class="cl">    YEAR = {{ .Book.PublicationDate.Year }}{{ end }}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>みたいにすれば</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">$ books-data openbd -i 427406932X -t template/template.bib.txt 
</span></span><span class="line"><span class="cl">@BOOK{Book:9784274069321,
</span></span><span class="line"><span class="cl">    TITLE = &#34;リーン開発の現場 : カンバンによる大規模プロジェクトの運営&#34;,
</span></span><span class="line"><span class="cl">    AUTHOR = &#34;Kniberg,Henrik／著 オーム社／著 オーム社開発局／著 市谷聡啓／翻訳 ほか&#34;,
</span></span><span class="line"><span class="cl">    PUBLISHER = {オーム社},
</span></span><span class="line"><span class="cl">    YEAR = 2013
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>てな感じに <a href="https://texwiki.texjp.org/?BibTeX%E9%96%A2%E9%80%A3%E3%83%84%E3%83%BC%E3%83%AB" target="_blank" title="BibTeX関連ツール - TeX Wiki">BiBTeX</a> 風の出力にもできるので，全く使えないこともない？</p>
<h2>今後の予定</h2>
<p><a href="https://qiita.com/ksato9700/items/626cc82c007ba8337034" target="_blank" title="青空文庫APIサーバーのご紹介 - Qiita">青空文庫APIサーバ</a>とかあるらしいので，こちらも対応していきたい。
でも<a href="https://text.baldanders.info/remark/2019/03/book-cover-for-aozora-bunko/" target="_blank" title="「青空文庫」用の書影がほしい">青空文庫は書影がない</a>んだよなぁ。</p>
<h2>ブックマーク</h2>
<ul>
<li><a href="http://blog.apitore.com/2016/08/01/amazon-product-advertising-api/" target="_blank">AmazonのProduct Advertising APIの使い方 | Apitore blog</a></li>
<li><a href="https://haniwaman.com/amazon-api-1/" target="_blank">「Amazon API」の使い方を紹介します！最安値やランキング取得できるよ①－アソシエイトID（タグ）登録編－ | HPcode</a></li>
</ul>

</div></section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/release/2019/07/atom-1_39-is-released/">ATOM エディタ v.1.39 がリリースされたのだが...</a></div>
<div class="next-page"><a href="/release/vuln-list/">Ubuntu アプリケーションにおけるセキュリティ・アップデート一覧</a> &raquo;</div>
</nav>

<aside class="feedback" id='feedback'>
<h1>Feedback</h1>
<p>GitHub に<a href="https://github.com/spiegel-im-spiegel/github-pages-env/discussions">フィードバック用のディスカッションページ</a>を用意しました。
書き込みには GitHub のアカウントが必要ですが，お気軽にご利用ください。</p>
<p>他のフィードバック手段として Mastodon などの SNS や電子メールも利用できます。電子メールを利用する際の公開鍵は<a href="https://baldanders.info/profile/">プロフィール</a>から取得できます。</p>
</aside>
<footer>


<div class="userinfo">
	<div class="userinfo-avater">
		<a href="https://baldanders.info/profile/"><img src="https://text.baldanders.info/images/avatar.jpg" width="48" height="48" alt="avatar" id="logo"></a>
	</div>
	<div class="userinfo-info" id="maker">
		Text by <a href="https://baldanders.info/profile/" rel="cc:attributionURL" property="cc:attributionName">Spiegel</a>
		in <time property='dc:dateCopyrighted'>2019-07-27</time> (revised in 2019-07-28)
		<a rel='cc:license' href="https://creativecommons.org/licenses/by-sa/4.0/"><i class="fab fa-creative-commons"></i>&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;<i class="fab fa-creative-commons-sa"></i></a>
		<ul class="social"><li><a rel="me" href="https://github.com/spiegel-im-spiegel"><span class="github-color"><abbr title="GitHub"><i class="fab fa-github"></i></abbr></span></a></li><li><a rel="me" href="https://www.flickr.com/photos/spiegel/"><span class="flickr-color"><abbr title="Flickr"><i class="fab fa-flickr"></i></abbr></span></a></li><li><a rel="me" href="https://goark.fedicity.net/@spiegel"><span class="mastodon-color"><abbr title="Mastodon"><i class="fa-brands fa-mastodon"></i></abbr></span></a></li><li><a rel="me" href="https://bsky.app/profile/baldanders.info"><span class="bluesky-color"><abbr title="Bluesky"><i class="fa-brands fa-bluesky"></i></abbr></span></a></li></ul>
	</div>
</div>

<nav>
<ul class='cloud center'>
<li><a href='/about-feeds/'>Feeds</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/site-policy/'>Policy</a></li>
<li><a href='https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io'>Repository</a></li>
<li><a href='https://validator.w3.org/nu/?doc=https%3a%2f%2ftext.baldanders.info%2frelease%2f2019%2f07%2ffirst-release-books-data%2f&amp;showoutline=yes'>Debug</a></li>
</ul>
<ul class='cloud center'>
<li><a href='https://baldanders.info/'>Home</a></li>
<li><a href='https://photo.baldanders.info/'>Photos</a></li>
<li><a href='https://slide.baldanders.info/'>Slide</a></li>
<li><a href='https://zenn.dev/spiegel'>Zenn</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='https://gohugo.io/'>Hugo 0.146.4</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-baldanders-info
">Theme of Baldanders.info</a>.</li>
</ul>
</nav>
</footer>
</div>

</body>
</html>
