<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:cc="http://web.resource.org/cc/">
	<title>text.Baldanders.info</title>
	<link rel="alternate" type="text/html" href="http://text.baldanders.info/" />
	<link rel="self" type="application/atom+xml" href="http://text.baldanders.info/index.xml" />
	<id>tag:text.Baldanders.info,2017-10-10:/</id>
	<updated>2017-10-10T18:02:56+09:00</updated>
	<subtitle>帰ってきた「しっぽのさきっちょ」</subtitle>
	<icon>http://text.baldanders.info//images/avatar.jpg</icon>
	<logo>http://text.baldanders.info//images/avatar.jpg</logo>
	<generator uri="https://gohugo.io/">Hugo 0.29</generator>

	
	<entry>
		<title>Glide から Dep への移行を検討する - golang</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/golang/consider-switching-from-glide-to-dep/" />
		<id>tag:text.Baldanders.info,2017-10-10:/golang/consider-switching-from-glide-to-dep/</id>
		<published>2017-10-10T18:02:56+09:00</published>
		<updated>2017-10-11T10:52:03+09:00</updated>
		<summary>つまり「依存関係（Vendoring）管理ツールとしては dep を推奨するけど移行できない人のために当面はサポートを続けるよ（でも将来は分からん）」という解釈でいいのだろうか。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="golang" label="golang" scheme="http://text.baldanders.info/golang" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;（この記事は &lt;a href=&#34;https://qiita.com/spiegel-im-spiegel/items/e931ad1a7565d02d179e&#34;&gt;Qiita とのマルチポスト&lt;/a&gt;です。
まぁ，向こうは草稿版だけど）&lt;/p&gt;

&lt;p&gt;久しぶりに &lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; を使おうと最新版（&lt;a href=&#34;https://github.com/Masterminds/glide/releases/tag/v0.13.0&#34; title=&#34;Release 0.13.0 · Masterminds/glide&#34;&gt;0.13.0&lt;/a&gt;）を見に行ったら “Consider switching to &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt;” とか書いてあるじゃない。&lt;/p&gt;

&lt;figure lang=&#34;en&#34;&gt;
&lt;blockquote&gt;
&lt;q&gt;Glide is used by a great number of projects and will continue to get support for some time.
But, the near future is likely in dep.
dep can handle importing Glide config files.
Please consider trying dep on your project or converting to dep.&lt;/q&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;https://github.com/Masterminds/glide/releases/tag/v0.13.0&#34;&gt;Release 0.13.0&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;まじすか。&lt;/p&gt;

&lt;p&gt;つまり「依存関係（Vendoring）管理ツールとしては &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; を推奨するけど移行できない人のために当面はサポートを続けるよ（でも将来は分からん）」という解釈でいいのだろうか。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; は &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;開発プロジェクトの公式ツールで，2017年の始めくらいに日本でも話題になったような気がするが，私は &lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; で完全に満足していたのでスルーしていた。
こんなことになるなんて。
ならもう &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; に移行するしかないぢゃん。&lt;/p&gt;

&lt;p&gt;とはいえ，いきなり本番環境に投入するのは怖いので，なにか適当なテストケースはないか，と自分のリポジトリを漁ってたら丁度いいのがあったよ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/spiegel-im-spiegel/pi&#34;&gt;spiegel-im-spiegel/pi: Estimate of Pi with Monte Carlo method.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;これって&lt;a href=&#34;http://text.baldanders.info/golang/estimate-of-pi/&#34;&gt;モンテカルロ法で遊んでた&lt;/a&gt;ときに作ったものだ。
最悪ぶっ壊れてもいいので，これ使って試してみるか。&lt;/p&gt;

&lt;h2 id=&#34;dep-の取得&#34;&gt;&lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; の取得&lt;/h2&gt;

&lt;p&gt;まず &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; の取得から始めないとだが，リポジトリ自体は &lt;code&gt;go get&lt;/code&gt; コマンドで取得できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go get -v github.com/golang/dep&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これをこのままインストールしてもいいのだが&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go install -v github.com/golang/dep/cmd/dep&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/golang/dep/releases&#34; title=&#34;Releases · golang/dep&#34;&gt;リリースページ&lt;/a&gt;にビルド済みのモジュールが置かれているので，ありがたくこれを使わせてもらおう。&lt;/p&gt;

&lt;p&gt;最新版（現時点で &lt;a href=&#34;https://github.com/golang/dep/releases/tag/v0.3.1&#34; title=&#34;Release v0.3.1 · golang/dep&#34;&gt;v0.3.1&lt;/a&gt;）には Windows 用のモジュール &lt;code&gt;dep-windows-amd64&lt;/code&gt; もある。
Windows ユーザは何のファイルかと思うかもしれないが，実はこれ実行ファイルなので， &lt;code&gt;dep.exe&lt;/code&gt; にリネームしてそのまま使える。&lt;/p&gt;

&lt;p&gt;万が一があっては困るのでモジュールの SHA256 ハッシュ値を確認しておく（こういうのこそ OpenPGP を使ってくれないものか）。
Windows ユーザで Windows 8.1 以降であれば PowerShell（4.0 以上）で &lt;a href=&#34;http://technet.microsoft.com/en-us/library/dn520872.aspx&#34;&gt;&lt;code&gt;Get-FileHash&lt;/code&gt;&lt;/a&gt; コマンドレットが使える&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:ps1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:ps1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;PS&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Users&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Get-FileHash&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;dep-windows-amd64&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;-Algorithm&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;SHA256&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Format-List&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Algorithm&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;SHA256&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Path&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Users&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;Downloads&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;dep-windows-amd64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これを &lt;code&gt;dep-windows-amd64.sha256&lt;/code&gt; に記載されている値と比較する。
改竄されてなければ同じ値になるはずである。
目視は辛いのでテキストエディタ等の検索機能を使えばいいだろう。&lt;/p&gt;

&lt;!--
Windows ユーザには（`sha256sum` といった）標準ツールがないのが痛いのだが， [7-Zip] があるなら，これを使ってハッシュ値を確認できる。

```text
$ 7z.exe h -scrcSHA256 dep-windows-amd64

7-Zip [64] 16.04 : Copyright (c) 1999-2016 Igor Pavlov : 2016-10-04

Scanning
1 file, 7696896 bytes (7517 KiB)

SHA256                                                                    Size  Name
---------------------------------------------------------------- -------------  ------------
D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A       7696896  dep-windows-amd64
---------------------------------------------------------------- -------------  ------------
D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A       7696896

Size: 7696896

SHA256 for data:              D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A

Everything is Ok
```

これを `dep-windows-amd64.sha256` に記載されている値と比較する。
改竄されてなければ同じ値になるはずである。
目視は辛いのでテキストエディタ等の検索機能を使えばいいだろう。

&lt;div class=&#34;box&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; を使っている人なら &lt;code&gt;.nyagos&lt;/code&gt; ファイルに&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;alias&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;sha1sum&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;%COMSPEC% /c &lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;%PROGRAMFILES%/7-Zip/7z.exe&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt; h -scrcSHA1 $*&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;sha256sum&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;%COMSPEC% /c &lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;%PROGRAMFILES%/7-Zip/7z.exe&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt; h -scrcSHA256 $*&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とか記述しておけば&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ sha256sum dep-windows-amd64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;で同じ結果が得られる。
改竄の有無を確認するためにファイルのハッシュ値を調べることはよくあるので準備しておくとよい。&lt;/p&gt;

&lt;/div&gt;
--&gt;

&lt;p&gt;実行モジュールの動作確認もしておく。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;dep is a tool for managing dependencies for Go projects
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Usage: dep &amp;lt;command&amp;gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Commands:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  init     Initialize a new project with manifest and lock files
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  status   Report the status of the project&amp;#39;s dependencies
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  ensure   Ensure a dependency is safely vendored in the project
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  prune    Prune the vendor tree of unused packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version  Show the dep version information
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Examples:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep init                               set up a new project
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep ensure                             install the project&amp;#39;s dependencies
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep ensure -update                     update the locked versions of all dependencies
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep ensure -add github.com/pkg/errors  add a dependency to the project
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Use &amp;#34;dep help [command]&amp;#34; for more information about a command.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep version
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;dep:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; version     : v0.3.1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; build date  : 2017-09-19
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; git hash    : 83789e2
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; go version  : go1.9
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; go compiler : gc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; platform    : windows/amd64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&#34;glide-から-dep-への移行&#34;&gt;&lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; から &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; への移行&lt;/h2&gt;

&lt;p&gt;お試し用の &lt;a href=&#34;https://github.com/spiegel-im-spiegel/pi&#34; title=&#34;spiegel-im-spiegel/pi: Estimate of Pi with Monte Carlo method.&#34;&gt;spiegel-im-spiegel/pi&lt;/a&gt; をビルド可能な適当な場所に置く。&lt;/p&gt;

&lt;p&gt;このパッケージの &lt;code&gt;glide.yaml&lt;/code&gt; はこんな感じになっている。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;package: github.com/spiegel-im-spiegel/pi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;import:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/davidminor/uint128&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;また &lt;code&gt;glide.lock&lt;/code&gt; はこんな感じ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;hash: d570123d6231810c51dd17e415673df221fb2dec7ef6ab45cd34093002a87cbb
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updated: 2016-11-16T17:28:38.2997832+09:00
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;imports:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  subpackages:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  - lcg
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 5745f1bf80414e0ad2670e85d6aece8c58031def
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 76626ae9c91c4f2a10f34cad8ce83ea42c93bb75
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 98c0ea580d2f3c5a171acf4d4f15321b72209d08
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 5929f04fb8e4a19ac29fdf658866f9441f339cd9
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;testImports: []&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;この状態で &lt;code&gt;dep init&lt;/code&gt; コマンドを実行する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep init
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Importing configuration from glide. These are only initial constraints, and are further refined during the solve process.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Detected glide configuration files...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Converting from glide.yaml and glide.lock...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying v0.3.0 (5929f04) as initial lock for imported dep github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (6b74a60) as initial lock for imported dep github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (248dadf) as initial lock for imported dep github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying master (98c0ea5) as initial lock for imported dep github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (189780b) as initial lock for imported dep github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying master (5745f1b) as initial lock for imported dep github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying v1.0 (76626ae) as initial lock for imported dep github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (5ccb023) as initial lock for imported dep github.com/spf13/pflag&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;実は &lt;a href=&#34;https://github.com/spiegel-im-spiegel/gocli&#34; title=&#34;spiegel-im-spiegel/gocli: Command line interface&#34;&gt;spiegel-im-spiegel/gocli&lt;/a&gt; パッケージの最新版は v0.4.0 だが， &lt;code&gt;glide.lock&lt;/code&gt; の内容を読み取って，ちゃんと v0.3.0 のものを取ってきているようだ。
偉いぞ！&lt;/p&gt;

&lt;p&gt;&lt;code&gt;dep init&lt;/code&gt; コマンドにより &lt;a href=&#34;https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md&#34; title=&#34;dep/Gopkg.toml.md at master · golang/dep&#34;&gt;&lt;code&gt;Gopkg.toml&lt;/code&gt;&lt;/a&gt; および &lt;code&gt;Gopkg.lock&lt;/code&gt; の2つのファイルと &lt;code&gt;vendor/&lt;/code&gt; フォルダが作成される。
このうち &lt;a href=&#34;https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md&#34; title=&#34;dep/Gopkg.toml.md at master · golang/dep&#34;&gt;&lt;code&gt;Gopkg.toml&lt;/code&gt;&lt;/a&gt; の内容は以下の通り。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/davidminor/gorand&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/pkg/errors&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/seehuhn/mt19937&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spf13/cobra&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;そして &lt;code&gt;Gopkg.lock&lt;/code&gt; の内容は以下の通りだ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/davidminor/gorand&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;lcg&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;189780b8053a44a111339a4248394fd844c1da40&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  branch = &amp;#34;master&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/davidminor/uint128&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;5745f1bf80414e0ad2670e85d6aece8c58031def&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/inconshreveable/mousetrap&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;76626ae9c91c4f2a10f34cad8ce83ea42c93bb75&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;v1.0&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/pkg/errors&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;248dadf4e9068a0b3e79f02ed0a610d935de5302&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  branch = &amp;#34;master&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/seehuhn/mt19937&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;98c0ea580d2f3c5a171acf4d4f15321b72209d08&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spf13/cobra&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;6b74a60562f5c1c920299b8f02d153e16f4897fc&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spf13/pflag&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;5ccb023bc27df288a957c5e994cd44fd19619465&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;5929f04fb8e4a19ac29fdf658866f9441f339cd9&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;v0.3.0&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[solve-meta]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  analyzer-name = &amp;#34;dep&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  analyzer-version = 1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  inputs-digest = &amp;#34;4a7cc1799d386351173ccdf8266d22ebe2971ce7ba417395a0b63ca267ea9267&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  solver-name = &amp;#34;gps-cdcl&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  solver-version = 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;glide.lock&lt;/code&gt; と &lt;code&gt;Gopkg.lock&lt;/code&gt; の内容がきちんとマッチしているのが分かると思う。
念のため &lt;code&gt;dep status&lt;/code&gt; も見ておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep status
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;PROJECT                               CONSTRAINT  VERSION        REVISION  LATEST   PKGS USED
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/gorand          *                          189780b            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/uint128         *           branch master  5745f1b   5745f1b  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/inconshreveable/mousetrap  *           v1.0           76626ae   76626ae  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/pkg/errors                 *                          248dadf            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/seehuhn/mt19937            *           branch master  98c0ea5   98c0ea5  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/cobra                *                          6b74a60            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/pflag                *                          5ccb023            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/gocli   *           v0.3.0         5929f04   ce636bb  1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ビルドもちゃんと通る。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go build -v .
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/gorand/lcg
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/gencmplx
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/qq
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/genpi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/plot
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/estmt
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/cmd
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;というわけで， &lt;code&gt;glide.yaml&lt;/code&gt; と &lt;code&gt;glide.lock&lt;/code&gt; が正しい状態で残っていれば問題なく &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; に移行できそうだ。&lt;/p&gt;

&lt;h2 id=&#34;依存関係の管理&#34;&gt;依存関係の管理&lt;/h2&gt;

&lt;p&gt;ところで，この状態で &lt;code&gt;dep ensure&lt;/code&gt; コマンドを実行すると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Gopkg.lock was already in sync with imports and Gopkg.toml
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/8) Wrote github.com/seehuhn/mt19937@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/8) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/8) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/8) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/8) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/8) Wrote github.com/spiegel-im-spiegel/gocli@v0.3.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/8) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/8) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;という感じで &lt;code&gt;Gopkg.lock&lt;/code&gt; ファイルも特に更新されないが，いったん &lt;code&gt;vendor/&lt;/code&gt; フォルダを削除して（またはリネームして）同じことをすると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Root project is &amp;#34;github.com/spiegel-im-spiegel/pi&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 19 transitively valid internal packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 12 external packages imported from 10 projects
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/22) Wrote github.com/mitchellh/mapstructure@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/22) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/22) Wrote gopkg.in/yaml.v2@v2
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/22) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/22) Wrote github.com/fsnotify/fsnotify@v1.4.2
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/22) Wrote github.com/magiconair/properties@v1.7.3
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/22) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/22) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(9/22) Wrote github.com/seehuhn/mt19937@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(10/22) Wrote github.com/pelletier/go-toml@v1.0.1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(11/22) Wrote github.com/spf13/afero@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(12/22) Wrote github.com/cpuguy83/go-md2man@v1.0.7
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(13/22) Wrote github.com/spf13/cast@v1.1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(14/22) Wrote github.com/hashicorp/hcl@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(15/22) Wrote github.com/spf13/jwalterweatherman@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(16/22) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(17/22) Wrote github.com/spf13/viper@v1.0.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(18/22) Wrote github.com/spiegel-im-spiegel/gocli@v0.3.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(19/22) Wrote github.com/russross/blackfriday@v1.5
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(20/22) Wrote golang.org/x/sys@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(21/22) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(22/22) Wrote golang.org/x/text@master&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;（途中の表示を省いている。ご容赦）&lt;/p&gt;

&lt;p&gt;と「え？ それ要らんやろ」ってなパッケージまで読み込んでくる。
うーん。
どうやら使わないサブパッケージまで依存関係を追跡してるみたい。&lt;/p&gt;

&lt;p&gt;そこで &lt;a href=&#34;https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md&#34; title=&#34;dep/Gopkg.toml.md at master · golang/dep&#34;&gt;&lt;code&gt;Gopkg.toml&lt;/code&gt;&lt;/a&gt; に以下の記述を加えて余計なパッケージを読み込ませないようにした。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;ignored = [
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/cpuguy83/go-md2man/md2man&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/russross/blackfriday&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/spf13/cobra/doc&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/spf13/cobra/cobra/cmd&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/spf13/viper&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ついでに &lt;a href=&#34;https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md&#34; title=&#34;dep/Gopkg.toml.md at master · golang/dep&#34;&gt;&lt;code&gt;Gopkg.toml&lt;/code&gt;&lt;/a&gt; で &lt;a href=&#34;https://github.com/spiegel-im-spiegel/gocli&#34; title=&#34;spiegel-im-spiegel/gocli: Command line interface&#34;&gt;spiegel-im-spiegel/gocli&lt;/a&gt; パッケージのバージョンを明記する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;0.3.0&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これでもう一度 &lt;code&gt;dep ensure&lt;/code&gt; コマンドを実行すると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Root project is &amp;#34;github.com/spiegel-im-spiegel/pi&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 19 transitively valid internal packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 8 external packages imported from 8 projects
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/8) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/8) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/8) Wrote github.com/spiegel-im-spiegel/gocli@v0.3.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/8) Wrote github.com/seehuhn/mt19937@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/8) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/8) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/8) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/8) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;となり &lt;code&gt;dep status&lt;/code&gt; コマンドの実行結果も&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep status
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;PROJECT                               CONSTRAINT  VERSION        REVISION  LATEST   PKGS USED
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/gorand          *                          189780b            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/uint128         *           branch master  5745f1b   5745f1b  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/inconshreveable/mousetrap  *           v1.0           76626ae   76626ae  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/pkg/errors                 *                          248dadf            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/seehuhn/mt19937            *           branch master  98c0ea5   98c0ea5  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/cobra                *                          6b74a60            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/pflag                *                          5ccb023            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/gocli   ^0.3.0      v0.3.0         5929f04   5929f04  1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;と元に戻った。
不要なサブパッケージを排除するのはちょっと面倒くさそうである。&lt;/p&gt;

&lt;p&gt;ちなみに &lt;a href=&#34;https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md&#34; title=&#34;dep/Gopkg.toml.md at master · golang/dep&#34;&gt;&lt;code&gt;Gopkg.toml&lt;/code&gt;&lt;/a&gt; のバージョン指定は “&lt;a href=&#34;http://semver.org/&#34; title=&#34;Semantic Versioning 2.0.0 | Semantic Versioning&#34;&gt;Semantic Versioning&lt;/a&gt;” に従っている。
具体的には “&lt;a href=&#34;http://semver.org/&#34; title=&#34;Semantic Versioning 2.0.0 | Semantic Versioning&#34;&gt;Semantic Versioning&lt;/a&gt;” の &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;実装である &lt;a href=&#34;https://github.com/Masterminds/semver&#34; title=&#34;Masterminds/semver: Work with Semantic Versions in Go&#34;&gt;Masterminds/semver&lt;/a&gt; パッケージを参照するとよい。&lt;/p&gt;

&lt;h2 id=&#34;依存関係の視覚化&#34;&gt;依存関係の視覚化&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;dep status&lt;/code&gt; コマンドには結果を DOT 言語で吐き出すオプションがあるようだ。
&lt;a href=&#34;http://www.graphviz.org/&#34; title=&#34;Graphviz | Graphviz - Graph Visualization Software&#34;&gt;Graphviz&lt;/a&gt; があれば，この出力結果を画像データに変換できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep status -dot | dot -Tpng -o pi-dependency.png&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;http://text.baldanders.info/images/pi-dependency.png&#34;&gt;&lt;img srcset=&#34;http://text.baldanders.info/images/pi-dependency.png 1428w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;pi-dependency.png&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;http://text.baldanders.info/images/pi-dependency.png&#34;&gt;pi-dependency.png&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ブラボー！&lt;/p&gt;

&lt;h2 id=&#34;リポジトリへのパスを直接指定する&#34;&gt;リポジトリへのパスを直接指定する&lt;/h2&gt;

&lt;p&gt;GitHub みたいな有名 SaaS に置いてあるパッケージなら &lt;a href=&#34;https://github.com/golang/dep/blob/master/docs/Gopkg.toml.md&#34; title=&#34;dep/Gopkg.toml.md at master · golang/dep&#34;&gt;&lt;code&gt;Gopkg.toml&lt;/code&gt;&lt;/a&gt; に&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;0.3.0&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とか書けば適切に処理してくれるけど，有名でない SaaS ディレクトリや職場 LAN のリポジトリ上のパッケージではこうはいかないこともある。
こういう場合には，以下に示す通り，直接リポジトリへの（プロトコルを含めた）パスを指定できる。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;  source = &amp;#34;git@github.com:spiegel-im-spiegel/gocli.git&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;0.3.0&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;これで &lt;code&gt;dep ensure&lt;/code&gt; すれば&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/8) Wrote github.com/spiegel-im-spiegel/gocli (from git@github.com:spiegel-im-spiegel/gocli.git)@v0.3.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/8) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/8) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/8) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/8) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/8) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/8) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/8) Wrote github.com/seehuhn/mt19937@master&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;といった感じになる。
ちゃんと指定したリポジトリからパッケージを取得してきているのが分かるだろう。&lt;/p&gt;

&lt;h2 id=&#34;go-1-9-から-glide-novendor-は必要なくなった&#34;&gt;Go 1.9 から glide novendor は必要なくなった&lt;/h2&gt;

&lt;p&gt;Vendoring で一番あつかいに困るのがテストで，たとえば安直に&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go test -v ./...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とかやると &lt;code&gt;vendor/&lt;/code&gt; フォルダ以下のパッケージまでテスト・シーケンスが走ってしまうのが困りものであった。
このため &lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; にはこれを回避する &lt;code&gt;glide novendor&lt;/code&gt; コマンドがあって&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go test -v $(glide novendor)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とすることで &lt;code&gt;vendor/&lt;/code&gt; フォルダへのテストを回避できるようになっていたのだ&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:tst1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:tst1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;ところがところがである！！&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt; 1.9 からは &lt;code&gt;./...&lt;/code&gt; の扱いが変更になり&lt;/p&gt;

&lt;figure lang=&#34;en&#34;&gt;
&lt;blockquote&gt;&lt;p&gt;“By popular request, &lt;code&gt;./...&lt;/code&gt; no longer matches packages in &lt;code&gt;vendor&lt;/code&gt; directories in tools accepting package names, such as &lt;code&gt;go test&lt;/code&gt;.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;https://golang.org/doc/go1.9#vendor-dotdotdot&#34;&gt;Go 1.9 Release Notes&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ということで &lt;code&gt;./...&lt;/code&gt; に &lt;code&gt;vendor/&lt;/code&gt; フォルダ以下が含まれないことになったのだ。
たとえば &lt;a href=&#34;https://github.com/spiegel-im-spiegel/pi&#34; title=&#34;spiegel-im-spiegel/pi: Estimate of Pi with Monte Carlo method.&#34;&gt;spiegel-im-spiegel/pi&lt;/a&gt; パケージの場合は&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go list ./...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/cmd
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/estmt
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/gencmplx
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/genpi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/plot
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/qq&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;となる。
逆に &lt;code&gt;vendor/&lt;/code&gt; フォルダも含めたいなら&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go list ./... ./vendor/...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/cmd
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/estmt
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/gencmplx
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/genpi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/plot
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/qq
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/gorand/lcg
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/gorand/pcg
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/cobra/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/cobra/cobra/cmd
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/cobra/doc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spiegel-im-spiegel/gocli&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とすればよい。
こっちのほうが遥かに扱いやすいよね。&lt;/p&gt;

&lt;p&gt;これでまたひとつ &lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; が「要らない子」になる理由が増えてしまったのだった。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.classmethod.jp/go/dep/&#34;&gt;Goオフィシャルチーム作成の依存関係管理ツール dep を試してみた ｜ Developers.IO&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://mattn.kaoriya.net/software/lang/go/20170125023240.htm&#34;&gt;Big Sky :: golang オフィシャル謹製のパッケージ依存解決ツール「dep」&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/golang/gopath-pollution/&#34;&gt;GOPATH 汚染問題&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/golang/package-visualization-tool/&#34;&gt;パッケージの依存状況の視覚化&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:ps1&#34;&gt;Windows 7 の場合は “&lt;a href=&#34;https://www.microsoft.com/ja-jp/download/details.aspx?id=40855&#34;&gt;Windows Management Framework 4.0&lt;/a&gt;” をインストールすることで PowerShell 4.0 にアップグレードできる。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:ps1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:tst1&#34;&gt;&lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; を使わない場合は &lt;code&gt;go test -v $(go list ./... | grep -v /vendor/)&lt;/code&gt; とかする。どのみち Windows のコマンドプロンプトでは無理だけど（笑）
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:tst1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>指定桁の数字列の先頭をゼロで埋める遊び - golang</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/golang/fill-in-digits/" />
		<id>tag:text.Baldanders.info,2017-10-09:/golang/fill-in-digits/</id>
		<published>2017-10-09T17:05:06+09:00</published>
		<updated>2017-10-09T19:10:04+09:00</updated>
		<summary>今回は 文字列⇔数値 変換と正規表現（のさわり）について書けたからよしとするか。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="golang" label="golang" scheme="http://text.baldanders.info/golang" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;一応予防線を張っておくけど，この記事のコードをそのまま業務に使わないように。
まんず，そがな人はおらんじゃろけど。&lt;/p&gt;

&lt;p&gt;さて，今日は体育の日だし頭の体操ということで「指定桁数の数字列の先頭をゼロで埋める遊び」をやってみる。
たとえば指定桁が4桁で，与えられる数字列が “123” なら， “0123” に整形するということである。
以下に要求をまとめよう。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;桁数は1以上の数値，数字列は長さ0以上の文字列で与えられる&lt;/li&gt;
&lt;li&gt;数字列について &lt;code&gt;0-9&lt;/code&gt; の数字のみ許可（&lt;code&gt;+&lt;/code&gt; / &lt;code&gt;-&lt;/code&gt; 等の符号は考慮しない）&lt;/li&gt;
&lt;li&gt;与えられた数字列の長さが桁数より小さい場合は先頭をゼロ “&lt;code&gt;0&lt;/code&gt;” で埋めて返す（4桁： &lt;code&gt;123&lt;/code&gt; → &lt;code&gt;0123&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;与えられた数字列の長さが桁数より大きい場合は下の桁を桁数分返す（4桁： &lt;code&gt;12345&lt;/code&gt; → &lt;code&gt;2345&lt;/code&gt;）&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;この機能を CLI (Command Line Interface) で表現することを考える。
こんな感じでどうだろう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ fillzero -h
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Usage: fillzero -n &amp;lt;number of digits&amp;gt; [digit string]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;このインタフェースを実装する &lt;code&gt;main()&lt;/code&gt; 関数はこんな感じかな。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;flag&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//Run returns error status in proess.
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//initialize flag options
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;NewFlagSet&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fillzero&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ContinueOnError&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Usage&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Fprintln&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Stderr&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Usage: fillzero -n &amp;lt;number of digits&amp;gt; [digit string]&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Int&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;n&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;number of digits&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//parse arguments
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Parse&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ErrInvalid&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;NArg&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Usage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Too many arguments.&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// get digit string
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;NArg&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Arg&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// Fill in digits...
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;:]);&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Fprintln&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Stderr&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Exit&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Exit&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これであとは &lt;code&gt;s = fillzero(*n, s)&lt;/code&gt; みたいな関数をでっち上げればいいのだが，私は天邪鬼なので別のことを考えた。
つまり「指定桁数の数字列の先頭をゼロで埋める」機能を持つ value object を作ったほうが面白いよね。&lt;/p&gt;

&lt;p&gt;たとえばこんな感じ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;s1770&#34;&gt;//Identity is digit string class
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// digit string
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// number of digits
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これに対してインスタンスを生成する &lt;code&gt;New()&lt;/code&gt; 関数と，整形済みの文字列を吐き出す &lt;a href=&#34;https://tour.golang.org/methods/17&#34; title=&#34;Stringers - A Tour of Go&#34;&gt;Stringer&lt;/a&gt; を組み込んであげればいい。
最終的にはこんな感じになる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;errors&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;flag&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;regexp&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;strings&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//regular expression object for Identity class
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;re&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;regexp&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;MustCompile&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;`^[0-9]+$`&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//Identity is digit string class
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// digit string
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// number of digits
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//IdentityNew returns Identity instance.
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;IdentityNew&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Number of digits is greater than zero.&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;re&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Copy&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;MatchString&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34; is not digit string.&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//String is Stringer method
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;:]&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Repeat&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ds&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//Run returns error status in proess.
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//initialize flag options
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;NewFlagSet&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fillzero&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ContinueOnError&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Usage&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Fprintln&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Stderr&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Usage: fillzero -n &amp;lt;number of digits&amp;gt; [digit string]&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Int&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;n&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;number of digits&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//parse arguments
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Parse&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ErrInvalid&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;NArg&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Usage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Too many arguments.&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// get digit string
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;NArg&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Arg&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;IdentityNew&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;:]);&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Fprintln&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Stderr&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Exit&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Exit&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;本来なら別パッケージにして &lt;code&gt;identity.Identity&lt;/code&gt; みたいにするのがいいんだろうけど（テストも書きやすいし），ファイルを分けたり面倒なことになるので端折っている。
また，文字列のチェックに正規表現を扱える &lt;a href=&#34;https://golang.org/pkg/regexp/&#34; title=&#34;regexp - The Go Programming Language&#34;&gt;&lt;code&gt;regexp&lt;/code&gt;&lt;/a&gt; パッケージを使った&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:r1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:r1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; が，正直に言ってこの程度の処理に正規表現パッケージを使うのが効率的かどうかは分からない（コードはすっきりするけど）。&lt;/p&gt;

&lt;p&gt;実際に動かしてみると，こんな感じになる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ fillzero -n 4
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;0000
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ fillzero -n 4 123
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;0123
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ fillzero -n 4 1234
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;1234
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ fillzero -n 4 12345
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;2345&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;要求は満たしているな。
よしよし。&lt;/p&gt;

&lt;p&gt;値と機能を value object にパッケージングすると，別の実装も考えることができる。
たとえば数字列を文字列のまま保持するのではなく数値で保持するとか。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;s1770&#34;&gt;//Identity is digit string class
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;uint64&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// identity
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;// number of digits
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//IdentityNew returns Identity instance.
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;IdentityNew&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;errors&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Number of digits is greater than zero.&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;strconv&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ParseUint&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;//String is Stringer method
&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Identity&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;strconv&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;FormatUint&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;:]&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Repeat&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;nd&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これにまるっと入れ替えても概ね同じ結果になる&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:p1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:p1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。
数字列に対して何らかの数値演算を行う機能が必要ならこちらのほうがいいかもしれない。
ちなみに &lt;code&gt;uint64&lt;/code&gt; を使ったことに特に意味はなくて，ぶっちゃけ「大は小を兼ねる」ってやつだが，このサイズで足りなければ &lt;a href=&#34;https://golang.org/pkg/math/big/&#34; title=&#34;big - The Go Programming Language&#34;&gt;&lt;code&gt;big&lt;/code&gt;&lt;/a&gt;.&lt;code&gt;Int&lt;/code&gt; を使う必要がある。&lt;/p&gt;

&lt;p&gt;って，ここまで考えたけど，やっぱ具体的な業務の中で考えないと意味ないよね（笑）
まぁ，今回は 文字列⇔数値 変換と正規表現（のさわり）について書けたからよしとするか。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developers.eure.jp/tech/golang-regexp/&#34;&gt;regexpとの付き合い方 〜 Go言語標準の正規表現ライブラリのパフォーマンスとアルゴリズム〜 | eureka tech blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://qiita.com/evalphobia/items/ab6aefdaa576217ef8fa&#34;&gt;Go言語でのString・Int間の変換速度について - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://qiita.com/dolpher/items/021583168b7c13c66536&#34;&gt;golang 数値（文字列）を指定桁数の先頭0詰めにして返す - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:r1&#34;&gt;&lt;a href=&#34;https://golang.org/pkg/regexp/&#34; title=&#34;regexp - The Go Programming Language&#34;&gt;&lt;code&gt;regexp&lt;/code&gt;&lt;/a&gt;.&lt;code&gt;Compile()&lt;/code&gt; 関数は処理コストがかかるためグローバル変数として宣言・初期化している。ちなみに &lt;a href=&#34;https://golang.org/pkg/regexp/&#34; title=&#34;regexp - The Go Programming Language&#34;&gt;&lt;code&gt;regexp&lt;/code&gt;&lt;/a&gt;.&lt;code&gt;MustCompile()&lt;/code&gt; 関数は，コンパイルに失敗すると panic を吐く。コンパイルで生成したグローバルなインスタンスを使う場合は，インスタンスをそのまま使うのではなく &lt;code&gt;Copy()&lt;/code&gt; 関数でコピーを作る習慣をつけるとよい。今回のサンプル・コードではそのまま使っても影響はないが，並行処理下ではインスタンス使用時にロックが掛かるためコピーが必須となる。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:r1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:p1&#34;&gt;厳密に言うと数字列をいきなり &lt;code&gt;strconv.ParseUint()&lt;/code&gt; 関数にかけているので数値として表現可能なものは通ってしまう。たとえば &lt;code&gt;+&lt;/code&gt; / &lt;code&gt;-&lt;/code&gt; の符号などだ。そういう意味では要求からの逸脱（deviation）があるのだが，所詮お遊びなので目をつむって欲しい。実際には数字列のチェック処理は別関数にした方がいいと思う。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:p1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>火星探査機 InSight で火星に名前を送ろう - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/10/send-your-name-to-mars/" />
		<id>tag:text.Baldanders.info,2017-10-08:/remark/2017/10/send-your-name-to-mars/</id>
		<published>2017-10-08T19:09:28+09:00</published>
		<updated>2017-10-08T19:09:28+09:00</updated>
		<summary>こういうのはお祭りだからね（笑） 来年2018年は2003年以来と言われる火星大接近の年だ。無事火星まで行って活躍していただきたいものである。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;&lt;a href=&#34;https://news.local-group.jp/20171008.html#p04&#34;&gt;「星が好きな人のための新着情報」の記事&lt;/a&gt;を見るまですっかり忘れてたですよ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jpl.nasa.gov/news/news.php?feature=6959&#34;&gt;Another Chance to Put Your Name on Mars&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://mars.nasa.gov/syn/insight&#34;&gt;Send Your Name to Mars: InSight&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;アメリカ・ヨーロッパ共同の火星探査計画 “&lt;a href=&#34;https://nasa.gov/insight&#34;&gt;InSight&lt;/a&gt;” は2012年に立ち上げられた。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://moonstation.jp/blog/marsexp/insight/us-europe-joint-mars-exploration-name-is-insight&#34;&gt;アメリカ・ヨーロッパ共同の火星探査計画の名前が「インサイト」に決定 | 月探査情報ステーション&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://moonstation.jp/blog/marsexp/nasa-select-insight-as-a-new-planetary-exploration-program&#34;&gt;NASA、新たな惑星探査計画に、火星内部を調べる「インサイト」を選定 | 月探査情報ステーション&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;もともと火星が接近する2016年に探査機を打ち上げる予定で，前年の2015年に「火星に名前を送ろう」キャンペーンも行われた。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://moonstation.jp/blog/marsexp/insight/name-to-mars-campaign-for-insight&#34;&gt;火星探査機インサイトへの名前搭載キャンペーン実施中 | 月探査情報ステーション&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;しかし打ち上げは2年後の2018年，つまり来年に延期されたのだった。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://moonstation.jp/blog/marsexp/insight/nasa-announces-delay-of-launch-of-insight&#34;&gt;NASA、来年3月の火星探査機「インサイト」の打ち上げを延期 | 月探査情報ステーション&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://moonstation.jp/blog/marsexp/insight/%e7%81%ab%e6%98%9f%e6%8e%a2%e6%9f%bb%e6%a9%9f%e3%82%a4%e3%83%b3%e3%82%b5%e3%82%a4%e3%83%88%e3%81%ae%e6%89%93%e3%81%a1%e4%b8%8a%e3%81%92%e3%81%af2018%e5%b9%b45%e6%9c%88%e3%81%a7%e5%86%8d%e8%a8%ad&#34;&gt;火星探査機インサイトの打ち上げは2018年5月で再設定 | 月探査情報ステーション&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;実は，このキャンペーンについて私は完全に聞き逃していて，それを知ったのがキャンペーン終了後だったため悔しい思いをしていた。&lt;/p&gt;

&lt;p&gt;今回は &lt;a href=&#34;https://nasa.gov/insight&#34;&gt;InSight&lt;/a&gt; の打ち上げが2018年5月に再設定されたことを受けて「火星に名前を送ろう」キャンペーンをもう一度やることになったようだ。
前回に参加した人は既に登録済みだと思うが（&lt;a href=&#34;https://mars.nasa.gov/syn/insight&#34; title=&#34;Send Your Name to Mars: InSight&#34;&gt;申し込みページ&lt;/a&gt;で確認できる），私のように機会を逃した方は最後のチャンスということで，是非。
締切は2017年11月1日。&lt;/p&gt;

&lt;p&gt;こういうのはお祭りだからね（笑）&lt;/p&gt;

&lt;p&gt;さっそく登録した。
これが私の Boarding Pass だよん。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;img srcset=&#34;http://www.baldanders.info/spiegel/profile/BoardingPass_MyNameOnInSight.png 1034w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Boarding Pass&#34;&gt;
&lt;figcaption&gt;Boarding Pass&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;来年2018年は2003年以来と言われる火星大接近の年だ。
無事火星まで行って活躍していただきたいものである。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://moonstation.jp/ja/mars/exploration/insight/index.html&#34;&gt;インサイト - 月探査情報ステーション&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>Go 1.8.4 および 1.9.1 がリリース（セキュリティ・アップデート） - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/10/go-1_8_4-and-1_9_1-are-released/" />
		<id>tag:text.Baldanders.info,2017-10-06:/remark/2017/10/go-1_8_4-and-1_9_1-are-released/</id>
		<published>2017-10-06T17:09:52+09:00</published>
		<updated>2017-10-06T17:09:52+09:00</updated>
		<summary>今回は2件のセキュリティ・アップデートがある。アップデートは計画的に。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">&lt;p&gt;&lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;コンパイラの 1.8.4 および 1.9.1 がリリースされている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://groups.google.com/forum/#!topic/golang-announce/1hZYiemnkdE&#34;&gt;[security] Go 1.8.4 and Go 1.9.1 are released&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;今回は2件のセキュリティ・アップデートがある。
ひとつは &lt;code&gt;go get&lt;/code&gt; 時の問題で&lt;/p&gt;

&lt;figure lang=&#34;en&#34;&gt;
&lt;blockquote&gt;
&lt;q&gt;By nesting a git checkout inside another version control repository, it was possible for an attacker to trick the “go get” command into executing arbitrary code. The go command now refuses to use version control checkouts found inside other version control systems, with an exception for git submodules (git inside git).&lt;/q&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;https://groups.google.com/forum/#!topic/golang-announce/1hZYiemnkdE&#34;&gt;Go 1.8.4 and Go 1.9.1 are released&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;これって CVE-2017-1000117 と似たような問題かなぁ？&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2017/08/vulnerabilities-in-scm-tools/&#34;&gt;SCM ツールの脆弱性&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;バージョン管理ツールの方は既に改修版が出てるんだけど， &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;コンパイラも対応しましたよ，ってことなんだろうか。
（git の submodule などとは別に）こういう入れ子構造のリポジトリの問題って根が深そうだなぁ。&lt;/p&gt;

&lt;p&gt;もうひとつは &lt;a href=&#34;https://golang.org/pkg/net/smtp/&#34; title=&#34;smtp - The Go Programming Language&#34;&gt;&lt;code&gt;smtp&lt;/code&gt;&lt;/a&gt; パッケージに関する問題だ。&lt;/p&gt;

&lt;figure lang=&#34;en&#34;&gt;
&lt;blockquote&gt;
&lt;q&gt;In the smtp package, PlainAuth is documented as sending credentials only over authenticated, encrypted TLS connections, but it was changed in Go 1.1 to also send credentials on non-TLS connections when the remote server advertises that PLAIN authentication is supported. The change was meant to allow use of PLAIN authentication on localhost, but it has the effect of allowing a man-in-the-middle attacker to harvest credentials. PlainAuth now requires either TLS or a localhost connection before sending credentials, regardless of what the remote server claims.&lt;/q&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;https://groups.google.com/forum/#!topic/golang-announce/1hZYiemnkdE&#34;&gt;Go 1.8.4 and Go 1.9.1 are released&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;アップデートは計画的に。&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>数式用フォントで遊ぶ - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/10/math-fonts/" />
		<id>tag:text.Baldanders.info,2017-10-05:/remark/2017/10/math-fonts/</id>
		<published>2017-10-05T06:58:54+09:00</published>
		<updated>2017-10-05T16:58:06+09:00</updated>
		<summary>数式用フォントに OpenType フォントを指定する場合は unicode-math パッケージを使う。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2017/09/install-tex-live-2017-for-windows/&#34;&gt;TeX Live 2017 インストール&lt;/a&gt;後の「$\mathrm{\TeX}$ で遊ぼう」第四弾は&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;数式用フォントで遊ぼう&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;である。&lt;/p&gt;

&lt;h2 id=&#34;既定状態での数式表示&#34;&gt;既定状態での数式表示&lt;/h2&gt;

&lt;p&gt;$\mathrm{\TeX}$ および $\mathrm{\LaTeX}$ は元々が数式表現に優れている。
これは $\mathrm{Lua\TeX}$, $\mathrm{Lua\LaTeX}$ でも同じで，たとえばプリアンブルに特に何も書かなくても（『&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34; title=&#34;Amazon | [改訂第7版]LaTeX2ε美文書作成入門 | 奥村 晴彦, 黒木 裕介 通販&#34;&gt;LaTeX2ε美文書作成入門&lt;/a&gt;』より引用）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass[fleqn]{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;``?`!`But aren&amp;#39;t Kafka&amp;#39;s \emph{Schlo{\ss}} and {\AE}sop&amp;#39;s {\OE}uvres
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;often na\&amp;#34;{\i}ve vis-\`a-vis the d{\ae}monic ph{\oe}nix&amp;#39;s
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;official r\^ole in fluffy souffl\&amp;#39;es!?&amp;#39;&amp;#39;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\[
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \left( \int_0^\infty \frac{\sin x}{\sqrt x} dx \right)^2 =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \sum_{k=0}^\infty \frac{(2k)!}{2^{2k}(k!)^2} \frac{1}{2k+1} =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \prod_{k=1}^\infty \frac{4k^2}{4k^2-1} =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \frac{\pi}{2}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;以下のような感じで適切に組んでくれる。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37446584446/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4488/37446584446_ebe4790867.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37446584446/&#34;&gt;equation (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;もう少し変わった式やシンボルを使う場合には &lt;code&gt;amsmath&lt;/code&gt; および &lt;code&gt;amssymb&lt;/code&gt; パッケージを使って（同じく『&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34; title=&#34;Amazon | [改訂第7版]LaTeX2ε美文書作成入門 | 奥村 晴彦, 黒木 裕介 通販&#34;&gt;LaTeX2ε美文書作成入門&lt;/a&gt;』より引用）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass[fleqn]{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{amsmath,amssymb} % amsmath packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\subsection*{連分数（amsmathパッケージ）}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{equation}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    b_0 + \cfrac{c_1}{b_1 +
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;          \cfrac{c_2}{b_2 +
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;          \cfrac{c_3}{b_3 +
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;          \cfrac{c_4}{b_4 + \cdots}}}}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{equation}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\subsection*{黒板文字（amssybパッケージ）}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$\mathbb{ABCDEFGHIJELMN}$
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;このように記述すれば，タイプセットの結果は&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36825338243/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4498/36825338243_1828366bd9_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36825338243/&#34;&gt;equation (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;こんな感じになる。
ちなみに本文の欧文書体は Latin Modern，数式は Computer Modern で，&lt;code&gt;amssymb&lt;/code&gt; パッケージで提供される黒板太文字は AMSFonts と呼ばれるものだ&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:ams&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:ams&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;h2 id=&#34;本文の欧文書体を-opentype-フォントに変更する&#34;&gt;本文の欧文書体を OpenType フォントに変更する&lt;/h2&gt;

&lt;p&gt;$\mathrm{Lua\LaTeX}$ で本文の書体を OpenType フォントに変更するのはとても簡単になった。
本文の和文フォントを変更する方法は&lt;a href=&#34;http://text.baldanders.info/remark/2017/10/using-source-han-fonts-by-japanese-tex/&#34; title=&#34;TeX 日本語環境で「源ノ」フォントを使ってみた&#34;&gt;前々回に紹介した&lt;/a&gt;が，たとえば欧文書体として $\mathrm{\TeX}$ Gyre をセットする場合は&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass[fleqn]{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[no-math,sourcehan]{luatexja-preset} % Japanese fonts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% Import fonts
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmainfont[Scale=MatchLowercase]{TeXGyreTermes}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setsansfont[Scale=MatchLowercase]{TeXGyreHeros}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmonofont[AutoFakeSlant,BoldItalicFeatures={FakeSlant},Scale=MatchLowercase]{Inconsolatazi4}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;のように指定する。
欧文フォントの指定には &lt;code&gt;fontspec&lt;/code&gt; パッケージが必要だが，和文フォント設定用の &lt;code&gt;luatexja-preset&lt;/code&gt; パッケージに含まれているため，改めて &lt;code&gt;fontspec&lt;/code&gt; パッケージを明示する必要はない。&lt;/p&gt;

&lt;p&gt;ちなみにタイプライタ文字には &lt;a href=&#34;http://levien.com/type/myfonts/inconsolata.html&#34;&gt;Inconsolata&lt;/a&gt; を指定している&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:tt1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:tt1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;書体を選択する場合は本文の書体と後述する数式用の書体があまりかけ離れないようバランスをとることが重要である。
『&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34; title=&#34;Amazon | [改訂第7版]LaTeX2ε美文書作成入門 | 奥村 晴彦, 黒木 裕介 通販&#34;&gt;LaTeX2ε美文書作成入門&lt;/a&gt;』には欧文書体についてかなりページを割いて解説されているので，一読することをお薦めする。&lt;/p&gt;

&lt;h2 id=&#34;数式用の書体を変更する&#34;&gt;数式用の書体を変更する&lt;/h2&gt;

&lt;h3 id=&#34;既存のパッケージを使う-concrete-euler-の場合&#34;&gt;既存のパッケージを使う（Concrete ＋ Euler の場合）&lt;/h3&gt;

&lt;p&gt;たとえば，数学好きに人気の高い Concrete ＋ Euler フォントの組み合わだが，これは既存のパッケージを使ったほうがよさそうである（&lt;a href=&#34;#opt&#34;&gt;後述&lt;/a&gt;）。
フォントの指定も従来通り。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass[fleqn]{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% Import fonts
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;%\usepackage{ccfonts,eulervm}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\[
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \left( \int_0^\infty \frac{\sin x}{\sqrt x} dx \right)^2 =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \sum_{k=0}^\infty \frac{(2k)!}{2^{2k}(k!)^2} \frac{1}{2k+1} =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \prod_{k=1}^\infty \frac{4k^2}{4k^2-1} =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \frac{\pi}{2}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37464960082/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4488/37464960082_597b2201f8.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (Concrete &amp;#43; Euler)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37464960082/&#34;&gt;equation (Concrete &amp;#43; Euler)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&#34;opentype-フォントを使う-unicode-math-パッケージ&#34;&gt;OpenType フォントを使う（unicode-math パッケージ）&lt;/h3&gt;

&lt;p&gt;数式用の書体に OpenType フォントを指定する場合は &lt;a href=&#34;https://github.com/wspr/unicode-math&#34; title=&#34;wspr/unicode-math: XeLaTeX/LuaLaTeX package for using unicode/OpenType maths fonts&#34;&gt;&lt;code&gt;unicode-math&lt;/code&gt;&lt;/a&gt; パッケージを使うのが便利だ。
たとえば &lt;a href=&#34;https://ctan.org/pkg/tex-gyre-math-pagella&#34; title=&#34;CTAN: Package tex-gyre-math-pagella&#34;&gt;$\mathrm{\TeX}$ Gyre Pagella Math&lt;/a&gt; を使う場合は以下のように指定する&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:ams1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:ams1&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass[fleqn]{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{unicode-math} % using unicode/OpenType maths fonts
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% Import fonts
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmathfont{TeXGyrePagella-Math}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\[
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \left( \int_0^\infty \frac{\sin x}{\sqrt x} dx \right)^2 =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \sum_{k=0}^\infty \frac{(2k)!}{2^{2k}(k!)^2} \frac{1}{2k+1} =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \prod_{k=1}^\infty \frac{4k^2}{4k^2-1} =
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  \frac{\pi}{2}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23644212118/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4443/23644212118_015177e851.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (TeXGyrePagella-Math)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23644212118/&#34;&gt;equation (TeXGyrePagella-Math)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;他の書体も紹介しよう。
&lt;a href=&#34;https://ctan.org/pkg/asana-math&#34; title=&#34;CTAN: Package asana-math&#34;&gt;Asana Math&lt;/a&gt; を利用する場合は，以下のように指定する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-test&#34; data-lang=&#34;test&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmathfont{Asana-Math}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23644821888/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4477/23644821888_21ddd217dc.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (Asana-Math)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23644821888/&#34;&gt;equation (Asana-Math)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/khaledhosny/euler-otf&#34; title=&#34;khaledhosny/euler-otf: An abandoned OpenType/Unicode math port of AMS Euler font&#34;&gt;Neo Euler&lt;/a&gt; を利用する場合は，&lt;a href=&#34;#elr-inst&#34;&gt;フォントを取得&lt;/a&gt;して以下のように指定する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-test&#34; data-lang=&#34;test&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmathfont{Neo Euler}[math-style=upright]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;math-style&lt;/code&gt; オプションについては&lt;a href=&#34;#opt&#34;&gt;後述&lt;/a&gt;する。
結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37239500550/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4443/37239500550_c7fe31fd8b.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (Neo Euler)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37239500550/&#34;&gt;equation (Neo Euler)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;a href=&#34;http://www.stixfonts.org/&#34; title=&#34;STIX Fonts Project Website&#34;&gt;STIX&lt;/a&gt; については &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 に収録されているものはデザインがイマイチな気がする。
なので&lt;a href=&#34;#stx2-inst&#34;&gt;バージョン2を取得&lt;/a&gt;して以下のように指定する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-test&#34; data-lang=&#34;test&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmathfont{STIX Two Math}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36788335984/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4461/36788335984_9c09a582cd.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (STIX2 Math)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36788335984/&#34;&gt;equation (STIX2 Math)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;a href=&#34;http://www.stixfonts.org/&#34; title=&#34;STIX Fonts Project Website&#34;&gt;STIX&lt;/a&gt; の fork とも言える（？） &lt;a href=&#34;https://github.com/khaledhosny/xits&#34; title=&#34;khaledhosny/xits: XITS - OpenType implementation of STIX fonts with math support&#34;&gt;XITS&lt;/a&gt; を利用する場合は，以下のように指定する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-test&#34; data-lang=&#34;test&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmathfont{XITS-Math}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37450915146/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4502/37450915146_5686199d65.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (XITS Math)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37450915146/&#34;&gt;equation (XITS Math)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;opt&#34;&gt;unicode-math パッケージのオプション&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;unicode-math&lt;/code&gt; パッケージのオプションはいくつかあるが，今回はよく使うと思われるものについて紹介する。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;math-style&lt;/code&gt;, &lt;code&gt;bold-style&lt;/code&gt;, &lt;code&gt;sans-style&lt;/code&gt; 各オプションは数式の文字や記号のスタイルを指定する。
具体的には ラテン小文字，ラテン大文字，ギリシア小文字，ギリシア大文字 それぞれに対して「立体（upright）」または「斜体（slant）」の組み合わせを指定する。&lt;/p&gt;

&lt;p&gt;数式全体（&lt;code&gt;math-style&lt;/code&gt;）のスタイル設定は以下の通り。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;&lt;code&gt;math-style&lt;/code&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;L小文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;L大文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;G小文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;G大文字&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;ISO&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;TeX&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;french&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;upright&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;code&gt;\symbf&lt;/code&gt; 指定時（&lt;code&gt;bold-style&lt;/code&gt;）のスタイル設定は以下の通り。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;&lt;code&gt;bold-style&lt;/code&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;L小文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;L大文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;G小文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;G大文字&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;ISO&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;TeX&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;upright&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;code&gt;\symsf&lt;/code&gt; 指定時（&lt;code&gt;sans-style&lt;/code&gt;）のスタイル設定は以下の通り。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;&lt;code&gt;sans-style&lt;/code&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;L小文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;L大文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;G小文字&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;G大文字&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;italic&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;斜体&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;upright&lt;/code&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;立体&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;オプションの指定方法は以下の通り。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[math-style=ISO,bold-style=ISO]{unicode-math}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;または&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{unicode-math}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\unimathsetup{%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    math-style=ISO,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bold-style=ISO%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;フォント指定時にオプションを指定することもできる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\setmathfont{Neo Euler}[math-style=upright]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3 id=&#34;neo-euler-書体について&#34;&gt;Neo Euler 書体について&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/khaledhosny/euler-otf&#34; title=&#34;khaledhosny/euler-otf: An abandoned OpenType/Unicode math port of AMS Euler font&#34;&gt;Neo Euler&lt;/a&gt; のギリシア文字には斜体がないようで， &lt;code&gt;math-style&lt;/code&gt; の値を &lt;code&gt;ISO&lt;/code&gt; または &lt;code&gt;TeX&lt;/code&gt; に設定するとギリシア文字が表示されない。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23648392388/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4459/23648392388_2c8049cc57.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;equation (Neo Euler 2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23648392388/&#34;&gt;equation (Neo Euler 2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;他にも AMSFonts にあるシンボル（先程の黒板太文字とか）が存在しなかったりするようだ。
Euler フォントに関しては，使うのであれば， OpenType ではなく既存のパッケージを使うほうが簡単だろう。&lt;/p&gt;

&lt;h2 id=&#34;elr-inst&#34;&gt;【付録1】 euler.otf ファイルのインストール&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;euler.otf&lt;/code&gt; ファイルは &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 には収録されていないため手動でインストールする必要がある。&lt;/p&gt;

&lt;p&gt;といっても簡単で，まず &lt;code&gt;{$TEXMFLOCAL}/fonts/opentype/public/&lt;/code&gt; フォルダを作成し，そこに &lt;a href=&#34;https://github.com/khaledhosny/euler-otf&#34; title=&#34;khaledhosny/euler-otf: An abandoned OpenType/Unicode math port of AMS Euler font&#34;&gt;&lt;code&gt;euler-otf&lt;/code&gt;&lt;/a&gt; リポジトリを &lt;code&gt;git clone&lt;/code&gt; すればOK。
ちなみに &lt;code&gt;$TEXMFLOCAL&lt;/code&gt; の場所は &lt;code&gt;kpsewhich&lt;/code&gt; コマンドで調べられる。
いつもの場所だね。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=TEXMFLOCAL
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;C:/texlive/texmf-local&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;コピーできたら &lt;code&gt;mktexlsr&lt;/code&gt; コマンドを実行して &lt;code&gt;ls-R&lt;/code&gt; を更新し，さらに &lt;code&gt;luaotfload-tool&lt;/code&gt; も実行すること。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ mktexlsr
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/texmf-local/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/texmf-local/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-config/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-config/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-var/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-var/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-dist/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-dist/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Done.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luaotfload-tool --update&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ちゃんとインストールできたか確認も忘れずに。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luaotfload-tool --fuzzy --find=&amp;#34;neo euler&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;luaotfload | resolve : Font &amp;#34;neo euler&amp;#34; found!
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;luaotfload | resolve : Resolved file name &amp;#34;c:/texlive/texmf-local/fonts/opentype/public/euler-otf/euler.otf&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&#34;stx2-inst&#34;&gt;【付録2】 STIX2 のインストール&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://www.stixfonts.org/&#34; title=&#34;STIX Fonts Project Website&#34;&gt;STIX&lt;/a&gt; バージョン2（zip ファイル）をダウンロード&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:sf&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:sf&#34;&gt;4&lt;/a&gt;&lt;/sup&gt; し， &lt;code&gt;Fonts/OTF/&lt;/code&gt; フォルダにある以下のファイルを &lt;code&gt;{$TEXMFLOCAL}/fonts/opentype/public/STIX2/&lt;/code&gt; フォルダにコピーする。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;STIX2Math.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STIX2Text-Bold.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STIX2Text-BoldItalic.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STIX2Text-Italic.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STIX2Text-Regular.otf&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;コピーできたら &lt;code&gt;mktexlsr&lt;/code&gt; コマンドを実行して &lt;code&gt;ls-R&lt;/code&gt; を更新し，さらに &lt;code&gt;luaotfload-tool&lt;/code&gt; も実行すること。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ mktexlsr
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/texmf-local/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/texmf-local/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-config/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-config/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-var/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-var/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-dist/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-dist/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Done.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luaotfload-tool --update&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ちゃんとインストールできたか確認も忘れずに。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luaotfload-tool --fuzzy --find=&amp;#34;stix two math&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;luaotfload | resolve : Font &amp;#34;stix two math&amp;#34; found!
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;luaotfload | resolve : Resolved file name &amp;#34;c:/texlive/texmf-local/fonts/opentype/public/stix2/stix2math.otf&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;span&gt;&lt;a href=&#34;http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/unicode-math/unicode-math.pdf&#34;&gt;Experimental Unicode mathematical typesetting: The unicode-math package&lt;sup&gt;&lt;i class=&#34;fa fa-file-pdf-o&#34;&gt;&lt;/i&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://org-technology.com/posts/lualatex-unicode-math.html&#34;&gt;LuaLaTeX で unicode-math を使う場合の書体変更コマンド | org-技術&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;books&#34;&gt;参考図書&lt;/h2&gt;

&lt;div class=&#34;hreview&#34; &gt;&lt;a class=&#34;item url&#34; href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34;&gt;&lt;img src=&#34;https://images-fe.ssl-images-amazon.com/images/I/51E5K7B53aL._SL160_.jpg&#34; alt=&#34;photo&#34; class=&#34;photo&#34;  /&gt;&lt;/a&gt;&lt;dl &gt;&lt;dt class=&#34;fn&#34;&gt;&lt;a class=&#34;item url&#34; href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34;&gt;[改訂第7版]LaTeX2ε美文書作成入門&lt;/a&gt;&lt;/dt&gt;&lt;dd&gt;奥村 晴彦 黒木 裕介 &lt;/dd&gt;&lt;dd&gt;技術評論社 2017-01-24&lt;/dd&gt;&lt;dd&gt;評価&lt;abbr class=&#34;rating&#34; title=&#34;5&#34;&gt;&lt;img src=&#34;http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif&#34; alt=&#34;&#34; /&gt;&lt;/abbr&gt; &lt;/dd&gt;&lt;/dl&gt;&lt;p class=&#34;similar&#34;&gt;&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4798118141/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4798118141.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;LaTeX2e辞典~用法・用例逆引きリファレンス (DESKTOP REFERENCE)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4535558752/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4535558752.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;公共政策入門 ミクロ経済学的アプローチ&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4320112415/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4320112415.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;Rで楽しむ統計 (Wonderful R 1)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4000298550/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4000298550.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;岩波データサイエンス Vol.5&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4797391383/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4797391383.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;数学ガールの秘密ノート/積分を見つめて (数学ガールの秘密ノートシリーズ)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4000298569/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4000298569.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;岩波データサイエンス Vol.6&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4798115363/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4798115363.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;独習 LaTeX2ε&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4785315717/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4785315717.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;具体例から学ぶ 多様体&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774193046/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4774193046.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;【改訂第3版】基礎からわかる情報リテラシー&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4768704700/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4768704700.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;はじめて学ぶリー群 ―線型代数から始めよう&#34;  /&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p class=&#34;description&#34;&gt;ついに第7版が登場。紙の本で買って常に側に置いておくのが吉。&lt;/p&gt;
&lt;p class=&#34;gtools&#34; &gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2017-09-27&#34;&gt;2017-09-27&lt;/abbr&gt; (powered by &lt;a href=&#34;http://www.goodpic.com/mt/aws/index.html&#34; &gt;G-Tools&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:ams&#34;&gt;&lt;code&gt;amsmath&lt;/code&gt; および &lt;code&gt;amssymb&lt;/code&gt; パッケージは AMS (AmericanMathenatical Society; 米国数学会) が数学論文記述用に開発した $\mathrm{\TeX}$ 用のパッケージ及び文字・記号がベースになっていて，このうちの文字・記号のコレクションが AMSFonts と呼ばれている。 AMSFonts は &lt;code&gt;amssymb&lt;/code&gt; パッケージを指定することで使用できる。また $\mathrm{\TeX}$ 用の OpenType フォントには AMSFonts を収録したものもある。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:ams&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:tt1&#34;&gt;前回の「&lt;a href=&#34;http://text.baldanders.info/remark/2017/10/writing-code-with-lualatex/&#34;&gt;LuaLaTeX でコードを書いてみる&lt;/a&gt;」を参照のこと。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:tt1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:ams1&#34;&gt;&lt;code&gt;amsmath&lt;/code&gt; パッケージを併用する場合は &lt;a href=&#34;https://github.com/wspr/unicode-math&#34; title=&#34;wspr/unicode-math: XeLaTeX/LuaLaTeX package for using unicode/OpenType maths fonts&#34;&gt;&lt;code&gt;unicode-math&lt;/code&gt;&lt;/a&gt; パッケージの前に&lt;code&gt;amsmath&lt;/code&gt; パッケージを指定しないとタイプセット時にエラーになる。なお &lt;code&gt;amssymb&lt;/code&gt; パッケージは必要ない。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:ams1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:sf&#34;&gt;ダウンロード・ページは広告だらけで且つ&lt;a href=&#34;http://gigazine.net/news/20150722-sourceforge/&#34; title=&#34;オープンソースソフトウェアの老舗サイト「SourceForge」はいかにして堕ちていったのか - GIGAZINE&#34;&gt;色々と悪名高い SourceForge&lt;/a&gt; なのでご注意を。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:sf&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>LuaLaTeX でコードを書いてみる - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/10/writing-code-with-lualatex/" />
		<id>tag:text.Baldanders.info,2017-10-04:/remark/2017/10/writing-code-with-lualatex/</id>
		<published>2017-10-04T18:19:51+09:00</published>
		<updated>2017-10-05T16:58:06+09:00</updated>
		<summary>とりあえず Go 言語による以下のコードを LuaLaTeX で書くことを考える。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;（なんか，すっかりシリーズ化しちゃったなぁ。別 section にすべきだったか？）&lt;/p&gt;

&lt;p&gt;さて，&lt;a href=&#34;http://text.baldanders.info/remark/2017/09/install-tex-live-2017-for-windows/&#34;&gt;TeX Live 2017 インストール&lt;/a&gt;後の「$\mathrm{\TeX}$ で遊ぼう」第三弾は&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;$\mathrm{Lua\LaTeX}$ でコードを書いてみる&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;である。
といっても $\mathrm{Lua\LaTeX}$ 特有の部分は少ないと思うので，後半のフォント指定以外は $\mathrm{p\LaTeX}$ とかでもいけるだろう。&lt;/p&gt;

&lt;p&gt;とりあえず &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;による以下のコードを $\mathrm{Lua\LaTeX}$ で書くことを考える。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Hello, world&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;安直に &lt;code&gt;verbatim&lt;/code&gt; 環境を使う手もあるが，世の中には &lt;a href=&#34;https://ctan.org/tex-archive/macros/latex/contrib/listings&#34; title=&#34;CTAN: /tex-archive/macros/latex/contrib/listings&#34;&gt;&lt;code&gt;listings&lt;/code&gt;&lt;/a&gt; パッケージなる便利なものがあるらしい。
これを使ってまずは&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;documentclass&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ltjsarticle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;no&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;sourcehan&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;luatexja&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;preset&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Japanese&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fonts&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstset&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;single&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;basicstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;small&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ttfamily&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;tabsize&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;section&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Go&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;言語による&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Hello&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;World&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstlisting&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Hello, world&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstlisting&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;と書いてみる。
結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37440154426/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4505/37440154426_9d1a97aa3d.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;code with LuaLaTeX (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37440154426/&#34;&gt;code with LuaLaTeX (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;悪かないけど，キーワードの強調表示くらい欲しいよね。
&lt;a href=&#34;https://ctan.org/tex-archive/macros/latex/contrib/listings&#34; title=&#34;CTAN: /tex-archive/macros/latex/contrib/listings&#34;&gt;&lt;code&gt;listings&lt;/code&gt;&lt;/a&gt; パッケージでは &lt;code&gt;language=C++&lt;/code&gt; みたいな感じに言語を指定できるらしい。
じゃあ，ってんで早速 &lt;code&gt;language=Go&lt;/code&gt; とかやってみたんだけど「知らんがな」って怒られた。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;! Package Listings Error: Couldn&amp;#39;t load requested language.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;んー。
ってことは誰か &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;用の補助パッケージを作ってくれていれば&amp;hellip; というわけで探したらありましたよ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/julienc91/listings-golang&#34;&gt;julienc91/listings-golang: Golang support for the listings package in LaTeX&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;神！！！&lt;/p&gt;

&lt;p&gt;というわけで，ここにある &lt;code&gt;listings-golang.sty&lt;/code&gt; を取ってきて作業フォルダに置けばいいんだけど，折角なら定常的に使いたいので，以下のフォルダを掘って，そこにリポジトリを git clone してしまった。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;{$TEXMFLOCAL}/tex/latex/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ちなみに &lt;code&gt;$TEXMFLOCAL&lt;/code&gt; の場所は &lt;code&gt;kpsewhich&lt;/code&gt; コマンドで調べられる。
いつもの場所だね。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=TEXMFLOCAL
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;C:/texlive/texmf-local&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;mktexlsr&lt;/code&gt; コマンドで &lt;code&gt;ls-R&lt;/code&gt; を更新するのも忘れずに。&lt;/p&gt;

&lt;p&gt;では，先程の文書を &lt;a href=&#34;https://github.com/julienc91/listings-golang&#34; title=&#34;julienc91/listings-golang: Golang support for the listings package in LaTeX&#34;&gt;&lt;code&gt;listings-golang&lt;/code&gt;&lt;/a&gt; パッケージを使って以下のように書き換える&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:glst1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:glst1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;documentclass&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ltjsarticle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;no&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;sourcehan&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;luatexja&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;preset&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Japanese&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fonts&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;graphicx&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;xcolor&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;golang&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstset&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;single&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;basicstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;small&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ttfamily&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;tabsize&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;keywordstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;red&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;},&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;stringstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;blue&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;section&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Go&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;言語による&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Hello&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;World&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstlisting&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;language&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Golang&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Hello, world&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstlisting&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37488315861/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4443/37488315861_e3ecc8b840.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;code with LuaLaTeX (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37488315861/&#34;&gt;code with LuaLaTeX (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;おっとお。
原色は派手すぎたか。
まぁ，ここでは分かりやすさ優先ってことで。&lt;/p&gt;

&lt;p&gt;実は &lt;a href=&#34;https://github.com/julienc91/listings-golang&#34; title=&#34;julienc91/listings-golang: Golang support for the listings package in LaTeX&#34;&gt;&lt;code&gt;listings-golang&lt;/code&gt;&lt;/a&gt; パッケージの中身はそれほど難しくなくて（でも自分でやれって言われたらやっぱり面倒くさいんだけど）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;%% Golang definition for listings
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;%% http://github.io/julienc91/lstlistings-golang
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;%%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\RequirePackage{listings}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\lstdefinelanguage{Golang}%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  {morekeywords=[1]{package,import,func,type,struct,return,defer,panic,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     recover,select,var,const,iota,},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morekeywords=[2]{string,uint,uint8,uint16,uint32,uint64,int,int8,int16,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     int32,int64,bool,float32,float64,complex64,complex128,byte,rune,uintptr,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     error,interface},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morekeywords=[3]{map,slice,make,new,nil,len,cap,copy,close,true,false,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     delete,append,real,imag,complex,chan,},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morekeywords=[4]{for,break,continue,range,goto,switch,case,fallthrough,if,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     else,default,},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morekeywords=[5]{Println,Printf,Error,},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   sensitive=true,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morecomment=[l]{//},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morecomment=[s]{/*}{*/},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morestring=[b]&amp;#39;,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morestring=[b]&amp;#34;,%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   morestring=[s]{`}{`},%
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;という感じでキーワードと文字列とコメントの3つの定義でできている。
このようにして &lt;a href=&#34;https://ctan.org/tex-archive/macros/latex/contrib/listings&#34; title=&#34;CTAN: /tex-archive/macros/latex/contrib/listings&#34;&gt;&lt;code&gt;listings&lt;/code&gt;&lt;/a&gt; パッケージが対応していない言語にも対応できる。&lt;/p&gt;

&lt;p&gt;最後に，やっぱタイプライタ文字なら &lt;a href=&#34;http://levien.com/type/myfonts/inconsolata.html&#34;&gt;Inconsolata&lt;/a&gt; だよね，ってことで，タイプライタ文字を以下のように変更する&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:z4&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:z4&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;documentclass&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ltjsarticle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;no&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;math&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;sourcehan&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;luatexja&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;preset&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Japanese&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fonts&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;setmonofont&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;AutoFakeSlant&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;BoldItalicFeatures&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;={&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;FakeSlant&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;},&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Scale&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;MatchLowercase&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;]{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Inconsolatazi4&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;graphicx&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;xcolor&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;usepackage&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;golang&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;%&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;listings&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstset&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;frame&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;single&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;basicstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;small&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;ttfamily&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;tabsize&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;keywordstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;red&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;},&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;stringstyle&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;color&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;blue&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;section&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Go&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;言語による&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Hello&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;World&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;begin&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstlisting&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}[&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;language&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Golang&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3eb&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Hello, world&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;lstlisting&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;ss4&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s7df&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;昔の $\mathrm{Lua\TeX}$-ja では，欧文フォントと和文フォントが干渉するので，指定の順番とかうるさかったが，エラく簡単になったものである。&lt;/p&gt;

&lt;p&gt;結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37441473856/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4451/37441473856_10ccde1a0c.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;code with LuaLaTeX (4)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37441473856/&#34;&gt;code with LuaLaTeX (4)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;数字のゼロに斜線が入っているのがお分かりだろうか。
以前は&lt;a href=&#34;http://d.hatena.ne.jp/zrbabbler/20130421/1366560678&#34; title=&#34;LaTeX の inconsolata がアレなので何とかする - マクロツイーター&#34;&gt;ゼロやバッククォート等の表示で苦労してた&lt;/a&gt;気がするが，最近のものなら問題ないようだ。&lt;/p&gt;

&lt;p&gt;ちなみに，フォント指定にある &lt;code&gt;AutoFakeSlant&lt;/code&gt; や &lt;code&gt;BoldItalicFeatures={FakeSlant}&lt;/code&gt; といった記述は斜体の定義である。
&lt;a href=&#34;http://levien.com/type/myfonts/inconsolata.html&#34;&gt;Inconsolata&lt;/a&gt; フォントには斜体やイタリック体はないので $\mathrm{Lua\LaTeX}$ 内部で擬似的な斜体を作るよう指示しているのだ。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://turgure.hatenablog.com/entry/2016/08/19/183501&#34;&gt;LaTeXでソースコードを書く - しがないプログラマ（仮）のブログ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.biwako.shiga-u.ac.jp/sensei/kumazawa/tex/listings.html&#34;&gt;listings.sty: LaTeX パッケージ&lt;/a&gt; : &lt;code&gt;\lstset&lt;/code&gt; について簡単な解説&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:glst1&#34;&gt;&lt;a href=&#34;https://github.com/julienc91/listings-golang&#34; title=&#34;julienc91/listings-golang: Golang support for the listings package in LaTeX&#34;&gt;&lt;code&gt;listings-golang&lt;/code&gt;&lt;/a&gt; パッケージは &lt;code&gt;\RequirePackage&lt;/code&gt; コマンドで &lt;a href=&#34;https://ctan.org/tex-archive/macros/latex/contrib/listings&#34; title=&#34;CTAN: /tex-archive/macros/latex/contrib/listings&#34;&gt;&lt;code&gt;listings&lt;/code&gt;&lt;/a&gt; パッケージを内部で呼び出しているため，記述上は &lt;a href=&#34;https://ctan.org/tex-archive/macros/latex/contrib/listings&#34; title=&#34;CTAN: /tex-archive/macros/latex/contrib/listings&#34;&gt;&lt;code&gt;listings&lt;/code&gt;&lt;/a&gt; パッケージを置き換えることができる。のだが，今回は README にしたがっている。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:glst1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:z4&#34;&gt;厳密に言うと，今回使うのはオリジナルの &lt;a href=&#34;http://levien.com/type/myfonts/inconsolata.html&#34;&gt;Inconsolata&lt;/a&gt; を改良した zi4 版である。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:z4&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>TeX 日本語環境で「源ノ」フォントを使ってみた - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/10/using-source-han-fonts-by-japanese-tex/" />
		<id>tag:text.Baldanders.info,2017-10-03:/remark/2017/10/using-source-han-fonts-by-japanese-tex/</id>
		<published>2017-10-03T20:10:56+09:00</published>
		<updated>2017-10-05T05:46:21+09:00</updated>
		<summary>第二弾は TeX で「源ノ」フォントを使ってみる である。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;さて，&lt;a href=&#34;http://text.baldanders.info/remark/2017/09/install-tex-live-2017-for-windows/&#34;&gt;TeX Live 2017 インストール&lt;/a&gt;後の「$\mathrm{\TeX}$ で遊ぼう」第二弾は&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;$\mathrm{\TeX}$ で「源ノ」フォントを使ってみる&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;である。&lt;/p&gt;

&lt;p&gt;「源ノ」フォントとは「&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34; title=&#34;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&#34;&gt;源ノ角ゴシック&lt;/a&gt;（Source Han Sans）」および「&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34; title=&#34;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&#34;&gt;源ノ明朝&lt;/a&gt;（Source Han Serif）」で構成される CJK 統一デザインの書体を指す。
「源ノ」フォントは Adobe と Google が共同で開発していて，かつオープンソースで公開されている。
この成果の一部は Google により NOTO プロジェクトに取り込まれている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.google.com/get/noto/&#34;&gt;Google Noto Fonts&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developers-jp.googleblog.com/2014/07/noto.html&#34;&gt;Google Developers Japan: オープンソースの美しい Noto フォントファミリーに日本語、中国語、韓国語が加わりました。&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developers-jp.googleblog.com/2017/04/noto-serif-cjk-is-here.html&#34;&gt;Google Developers Japan: Noto Serif CJK が登場！&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;いわゆる CJK 漢字圏の文字は漢字だけでも非常に数が多く ☂ や ☃ みたいな非漢字も合わせると想像するだけでも目眩がする。
開発に携われた方々には足を向けて寝られない（何処に足を向けたらいいのだろう&lt;code&gt;w&lt;/code&gt;）。
そして勿論，世の $\mathrm{\TeX}$nician たちがこれに指を咥えて見ているはずはないのだ。
なので私もその成果に便乗することにする。&lt;/p&gt;

&lt;p&gt;皆さん，ありがとう！&lt;/p&gt;

&lt;h2 id=&#34;install&#34;&gt;「源ノ」フォントのインストール&lt;/h2&gt;

&lt;p&gt;早速インストールをはじめるが，&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34; title=&#34;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&#34;&gt;源ノ角ゴシック&lt;/a&gt;および&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34; title=&#34;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&#34;&gt;源ノ明朝&lt;/a&gt;は GitHub で公開されている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34;&gt;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34;&gt;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;これらのリポジトリから最新リリース（zip または tar.gz ファイル）をダウンロードする。
1.6 から 2 GB ほどの巨大パッケージなのでダウンロードの際はご注意を。
取得したパッケージの内，今回使うのは &lt;code&gt;OTF/Japanese&lt;/code&gt; フォルダにある以下のファイルである。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34; title=&#34;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&#34;&gt;源ノ角ゴシック&lt;/a&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-ExtraLight.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-Light.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-Normal.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-Regular.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-Medium.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-Bold.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSans-Heavy.otf&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34; title=&#34;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&#34;&gt;源ノ明朝&lt;/a&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-ExtraLight.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-Light.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-Regular.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-Medium.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-SemiBold.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-Bold.otf&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SourceHanSerif-Heavy.otf&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;それぞれのファイルの違いはウェイトの違いで，軽いものから昇順に並べている。
さらに各パッケージ内の &lt;code&gt;Resources&lt;/code&gt; フォルダにある以下の CMap ファイル&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:cmap1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:cmap1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; も使用する。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34; title=&#34;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&#34;&gt;源ノ角ゴシック&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UniSourceHanSansJP-UTF16-H&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34; title=&#34;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&#34;&gt;源ノ明朝&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UniSourceHanSerifJP-UTF16-H&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;これらのファイルを，以下のフォルダを作成して放り込む&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:fnt1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:fnt1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34; title=&#34;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&#34;&gt;源ノ角ゴシック&lt;/a&gt;： &lt;code&gt;{$TEXMFLOCAL}/fonts/opentype/adobe/sourcehansansjp/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34; title=&#34;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&#34;&gt;源ノ明朝&lt;/a&gt;： &lt;code&gt;{$TEXMFLOCAL}/fonts/opentype/adobe/sourcehanserifjp/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CMap ファイル： &lt;code&gt;{$TEXMFLOCAL}/fonts/cmap/sourcehanjp/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ちなみに &lt;code&gt;$TEXMFLOCAL&lt;/code&gt; の場所は &lt;code&gt;kpsewhich&lt;/code&gt; コマンドで調べられる。
いつもの場所だね。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=TEXMFLOCAL
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;C:/texlive/texmf-local&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;コピーできたら &lt;code&gt;mktexlsr&lt;/code&gt; コマンドを実行して &lt;code&gt;ls-R&lt;/code&gt; を更新しておくことを忘れずに。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ mktexlsr
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/texmf-local/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/texmf-local/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-config/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-config/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-var/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-var/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-dist/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-dist/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Done.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これで「源ノ」フォントのインストールは完了。
一応 &lt;code&gt;kpsewhich&lt;/code&gt; コマンドでインストールできたかどうか確認しておくとよい。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;c:/texlive/texmf-local/fonts/opentype/adobe/sourcehanserifjp/SourceHanSerif-Regular.otf&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&#34;uplatex&#34;&gt;upLaTeX で「源ノ」フォントを使ってみる&lt;/h2&gt;

&lt;p&gt;では文書ファイルを用意しよう。
こんな感じでどうだろうか。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass[uplatex,a4paper]{jsarticle}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[deluxe]{otf}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\mcfamily\ltseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（明朝体・細字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\mcfamily          ☂ は夜更け過ぎに ☃ へとかわるだろう。（明朝体・中字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\mcfamily\bfseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（明朝体・太字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\gtfamily          ☂ は夜更け過ぎに ☃ へとかわるだろう。（ゴシック体・中字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\gtfamily\bfseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（ゴシック体・太字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\gtfamily\ebseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（ゴシック体・極太）}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;森鷗外と内田百閒が髙島屋に行った。
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\UTF{845B}飾区の\UTF{20BB7}野家  % 葛飾区の𠮷野家
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;タイプセット処理は $\mathrm{up\LaTeX}$ を選択した。
$\mathrm{up\LaTeX}$ で処理したあと &lt;code&gt;dvipdfmx&lt;/code&gt; コマンドで PDF に変換しないといけないんだけど，「源ノ」フォント用の map ファイルは &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 には存在しないようなので，自前で用意しないといけない。
他の書体の map ファイルを参考に自作してみた（正しいかどうかわからないが）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;% CID
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjml-h    Identity-H    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjml-v    Identity-V    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjmr-h    Identity-H    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjmr-v    Identity-V    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjmb-h    Identity-H    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjmb-v    Identity-V    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjgr-h    Identity-H    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjgr-v    Identity-V    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjgb-h    Identity-H    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjgb-v    Identity-V    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjge-h    Identity-H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjge-v    Identity-V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjmgr-h   Identity-H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-cjmgr-v   Identity-V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% Unicode 90JIS
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujml-h    UniSourceHanSerifJP-UTF16-H   SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujml-v    UniSourceHanSerifJP-UTF16-V   SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmr-h    UniSourceHanSerifJP-UTF16-H   SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmr-v    UniSourceHanSerifJP-UTF16-V   SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmb-h    UniSourceHanSerifJP-UTF16-H   SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmb-v    UniSourceHanSerifJP-UTF16-V   SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgr-h    UniSourceHanSansJP-UTF16-H    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgr-v    UniSourceHanSansJP-UTF16-V    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgb-h    UniSourceHanSansJP-UTF16-H    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgb-v    UniSourceHanSansJP-UTF16-V    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujge-h    UniSourceHanSansJP-UTF16-H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujge-v    UniSourceHanSansJP-UTF16-V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmgr-h   UniSourceHanSansJP-UTF16-H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmgr-v   UniSourceHanSansJP-UTF16-V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% Unicode JIS04
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmln-h    UniJIS2004-UTF16-H    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmln-v    UniJIS2004-UTF16-V    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmrn-h    UniJIS2004-UTF16-H    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmrn-v    UniJIS2004-UTF16-V    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmbn-h    UniJIS2004-UTF16-H    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmbn-v    UniJIS2004-UTF16-V    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgrn-h    UniJIS2004-UTF16-H    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgrn-v    UniJIS2004-UTF16-V    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgbn-h    UniJIS2004-UTF16-H    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgbn-v    UniJIS2004-UTF16-V    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgen-h    UniJIS2004-UTF16-H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujgen-v    UniJIS2004-UTF16-V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmgrn-h   UniJIS2004-UTF16-H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;otf-ujmgrn-v   UniJIS2004-UTF16-V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% TEXT, 90JIS
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminl-h   UniSourceHanSerifJP-UTF16-H SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminl-v   UniSourceHanSerifJP-UTF16-V SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminr-h   UniSourceHanSerifJP-UTF16-H SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminr-v   UniSourceHanSerifJP-UTF16-V SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminb-h   UniSourceHanSerifJP-UTF16-H SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminb-v   UniSourceHanSerifJP-UTF16-V SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothr-h  UniSourceHanSansJP-UTF16-H  SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothr-v  UniSourceHanSansJP-UTF16-V  SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothb-h  UniSourceHanSansJP-UTF16-H  SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothb-v  UniSourceHanSansJP-UTF16-V  SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgotheb-h UniSourceHanSansJP-UTF16-H  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgotheb-v UniSourceHanSansJP-UTF16-V  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphmgothr-h UniSourceHanSansJP-UTF16-H  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphmgothr-v UniSourceHanSansJP-UTF16-V  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% TEXT, JIS04
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminln-h  UniJIS2004-UTF16-H  SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminln-v  UniJIS2004-UTF16-V  SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminrn-h  UniJIS2004-UTF16-H  SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminrn-v  UniJIS2004-UTF16-V  SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminbn-h  UniJIS2004-UTF16-H  SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphminbn-v  UniJIS2004-UTF16-V  SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothrn-h UniJIS2004-UTF16-H  SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothrn-v UniJIS2004-UTF16-V  SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothbn-h UniJIS2004-UTF16-H  SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothbn-v UniJIS2004-UTF16-V  SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothebn-h    UniJIS2004-UTF16-H  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphgothebn-v    UniJIS2004-UTF16-V  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphmgothrn-h    UniJIS2004-UTF16-H  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uphmgothrn-v    UniJIS2004-UTF16-V  SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;urml    UniSourceHanSerifJP-UTF16-H SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;urmlv   UniSourceHanSerifJP-UTF16-V SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ugbm    UniSourceHanSansJP-UTF16-H  SourceHanSans-Medium.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ugbmv   UniSourceHanSansJP-UTF16-V  SourceHanSans-Medium.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uprml-h UniSourceHanSerifJP-UTF16-H SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uprml-v UniSourceHanSerifJP-UTF16-V SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;upgbm-h UniSourceHanSansJP-UTF16-H  SourceHanSans-Medium.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;upgbm-v UniSourceHanSansJP-UTF16-V  SourceHanSans-Medium.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;uprml-hq    UniJIS-UCS2-H   SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;upgbm-hq    UniJIS-UCS2-H   SourceHanSans-Medium.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% TEXT, 90JIS
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminl-h     H    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminl-v     V    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminr-h     H    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminr-v     V    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminb-h     H    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminb-v     V    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothr-h    H    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothr-v    V    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothb-h    H    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothb-v    V    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgotheb-h   H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgotheb-v   V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hmgothr-h   H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hmgothr-v   V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% TEXT, JIS04
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminln-h    H    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminln-v    V    SourceHanSerif-Light.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminrn-h    H    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminrn-v    V    SourceHanSerif-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminbn-h    H    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hminbn-v    V    SourceHanSerif-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothrn-h   H    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothrn-v   V    SourceHanSans-Regular.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothbn-h   H    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothbn-v   V    SourceHanSans-Bold.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothebn-h  H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hgothebn-v  V    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hmgothrn-h  H    SourceHanSans-Heavy.otf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;hmgothrn-v  V    SourceHanSans-Heavy.otf&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;分かりにくいとは思うが，フォントの選択は以下のように対応付けている。&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;字体とウエイト&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;フォント名&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;明朝体・細字&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;SourceHanSerif-Light.otf&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;明朝体・中字&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;SourceHanSerif-Regular.otf&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;明朝体・太字&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;SourceHanSerif-Bold.otf&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ゴシック体・中字&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;SourceHanSans-Regular.otf&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ゴシック体・太字&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;SourceHanSans-Bold.otf&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;ゴシック体・極太&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;&lt;code&gt;SourceHanSans-Heavy.otf&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;また &lt;code&gt;UniSourceHanSerifJP-UTF16-V&lt;/code&gt; や &lt;code&gt;UniSourceHanSansJP-UTF16-V&lt;/code&gt; という CMap ファイルは存在しないが，まぁ縦書きは使わないから，私。
縦書き用の CMap ファイルはネットを探したらあるかもしれない。
&lt;code&gt;UniJIS2004-UTF16-H&lt;/code&gt; や &lt;code&gt;UniJIS-UCS2-H&lt;/code&gt; は他のフォントの設定をそのまま流用してるけど，正しいのかどうかよく分からない。&lt;/p&gt;

&lt;p&gt;&lt;code&gt;dvipdfmx&lt;/code&gt; コマンドで map ファイルを直接指定する必要があるため &lt;code&gt;.latexmkrc&lt;/code&gt; ファイルを以下のように設定した。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;s1770&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$latex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;uplatex -synctex=1&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$latex_silent&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;uplatex -synctex=1 -interaction=batchmode&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$bibtex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;upbibtex&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$biber&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;biber --bblencoding=utf8 -u -U --output_safechars&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$dvipdf&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;dvipdfmx -z9 -V 4 -f sourcehanjp.map %O -o %D %S&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$makeindex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;mendex %O -o %D %S&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$max_repeat&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$pdf_mode&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# generates pdf via dvipdfmx&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$pvc_view_file_via_temporary&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ようやく準備完了。
やっとビルドできるよ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ latexmk otf-sample.tex&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36799783933/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4480/36799783933_5636b7ff13.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Output PDF by upLaTeX with Source Han Fonts (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36799783933/&#34;&gt;Output PDF by upLaTeX with Source Han Fonts (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ちなみに埋め込まれたフォントの状態は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23617581598/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4445/23617581598_dabb14dddb_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Output PDF by upLaTeX with Source Han Fonts (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23617581598/&#34;&gt;Output PDF by upLaTeX with Source Han Fonts (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;lualatex&#34;&gt;LuaLaTeX で「源ノ」フォントを使ってみる&lt;/h2&gt;

&lt;p&gt;さて，では同じことを $\mathrm{Lua\LaTeX}$-ja でやってみようと思う。&lt;/p&gt;

&lt;p&gt;さきほど&lt;a href=&#34;#install&#34;&gt;フォントファイルをインストールした&lt;/a&gt;が， $\mathrm{Lua\LaTeX}$ で使うにはそのままではダメで，以下のコマンドを実行しておく必要がある。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luaotfload-tool --update&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;上手くいったかどうかは以下のコマンドで確認できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luaotfload-tool --fuzzy --find=&amp;#34;sourcehanserif&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;luaotfload | resolve : Font &amp;#34;sourcehanserif&amp;#34; found!
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;luaotfload | resolve : Resolved file name &amp;#34;c:/texlive/texmf-local/fonts/opentype/adobe/sourcehanserifjp/sourcehanserif-regular.otf&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;では，文書ファイルを作ってみよう。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass{ltjsarticle}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[sourcehan,deluxe]{luatexja-preset}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{luatexja-otf}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\mcfamily\ltseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（明朝体・細字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\mcfamily          ☂ は夜更け過ぎに ☃ へとかわるだろう。（明朝体・中字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\mcfamily\bfseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（明朝体・太字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\gtfamily          ☂ は夜更け過ぎに ☃ へとかわるだろう。（ゴシック体・中字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\gtfamily\bfseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（ゴシック体・太字）}\par
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;{\gtfamily\ebseries ☂ は夜更け過ぎに ☃ へとかわるだろう。（ゴシック体・極太）}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;森鷗外と内田百閒が髙島屋に行った。
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\UTF{845B}飾区の\UTF{20BB7}野家  % 葛飾区の𠮷野家
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code&gt;luatexja-preset&lt;/code&gt; パッケージでは「源ノ」フォントを指定できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[sourcehan]{luatexja-preset}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;また &lt;code&gt;\UTF&lt;/code&gt; コマンドが使えるように &lt;code&gt;luatexja-otf&lt;/code&gt; パッケージを読み込んでいる。
いやぁ，すんごい楽ちん。&lt;/p&gt;

&lt;p&gt;タイプセットも前準備なしで簡単にできる（だだし，めがっさ遅い）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ lualatex otf-sample.tex&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果は以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36800606433/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4489/36800606433_53eb6f2055.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Output PDF by LuaLaTeX with Source Han Fonts (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36800606433/&#34;&gt;Output PDF by LuaLaTeX with Source Han Fonts (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;んー。
ウェイトがさっきと違う？&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36800606553/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4502/36800606553_51b818871e_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Output PDF by LuaLaTeX with Source Han Fonts (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36800606553/&#34;&gt;Output PDF by LuaLaTeX with Source Han Fonts (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;いや，同じか。
まぁいいや。
「極太」なんてまず使わんし。&lt;/p&gt;

&lt;p&gt;他に気になることと言えば， $\mathrm{up\LaTeX}$ ＋ dvipdfmx のときもそうだったんだけど，「葛（U+845B）」の字形が JIS X 0213:2004 だよね。
どちらも &lt;code&gt;jis2004&lt;/code&gt; オプションは付けてないんだが。
やはり &lt;code&gt;jis2004&lt;/code&gt; オプションは相当特殊な気がする。
これからは JIS X 0213:2004 前提で考えて，むしろ &lt;code&gt;jis2000&lt;/code&gt; オプションを作ったほうがいいんじゃないだろうか。&lt;/p&gt;

&lt;p&gt;ま，それはともかく&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;時代は $\mathrm{Lua\TeX}$ で「源ノ」フォント&lt;/strong&gt; ってことですね！&lt;/p&gt;

&lt;p&gt;ちなみに，&lt;a href=&#34;http://text.baldanders.info/remark/2017/10/lualatex-ja-on-cloud/&#34;&gt;前回&lt;/a&gt;紹介した &lt;a href=&#34;https://cloudlatex.io/&#34; title=&#34;Cloud LaTeX | Build your own LaTeX environment, in seconds&#34;&gt;Cloud LaTeX&lt;/a&gt; で同じことをしようとしたら「&lt;code&gt;sourcehan&lt;/code&gt; なんぞ知らん！」と怒られた（笑）&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/usr/local/texlive/2016/texmf-dist/tex/latex/fontspec/fontspec-luatex.sty
line 392
! LaTeX Error: Unknown option `sourcehan&#39; for package `fontspec-luatex&#39;.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;まぁしょうがないね。
&lt;a href=&#34;http://ipafont.ipa.go.jp/node26#ja&#34; title=&#34;IPAexフォント Ver.003.01(IPAexFont Ver.003.01) | IPAexフォント/IPAフォント&#34;&gt;IPAex&lt;/a&gt; が使えるのなら支障はないし。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.typekit.com/alternate/source-han-sans-jp/&#34;&gt;The Typekit Blog | Source Han Sansの紹介：オープンソースのPan-CJK書体&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://source.typekit.com/source-han-serif/jp/&#34;&gt;源ノ明朝&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://jp.techcrunch.com/2016/10/08/20161006google-and-monotype-unveil-the-noto-projects-unified-font-for-all-languages/&#34;&gt;GoogleとMonotypeが全言語対応フォントのNotoを公開 | TechCrunch Japan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://wired.jp/2017/04/08/noto-serif-cjk/&#34;&gt;日中韓に対応したグーグルの新フォント「Noto Serif CJK」は、なぜ生まれたか｜WIRED.jp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88&#34;&gt;フォント - TeX Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jb102.blogspot.jp/2017/04/11-luatex.html&#34;&gt;源ノ明朝/源ノ角ゴシックをLuaLaTeXで使用する (Windows)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://qiita.com/zr_tex8r/items/9dfeafecca2d091abd02&#34;&gt;upLaTeX文書で源ノ明朝／Noto Serif CJKを簡単に使う方法（最新のdvipdfmxとpxchfonを使用） - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://internet.watch.impress.co.jp/www/column/ogata/index.htm&#34;&gt;小形克宏の「文字の海、ビットの舟」――文字コードが私たちに問いかけるもの&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:cmap1&#34;&gt;CMap とは Unicode 等の文字集合とフォントの CID (Character IDentifier) を対応付けるマッピング情報である。 OpenType フォントのフルセットは Unicode を含む複数の文字集合の字形を包括している。たとえば JIS X 0213 では「葛（U+845B）」の字について2000年版と現行の2004年版で字形が異なるという混乱があるが（厳密には例示字体で示される字の形が異なる。異体字のことではない）， OpenType フォント（のフルセット）はそういった差異も包括し CID で識別することができる。従って CMap は文字集合やそのバージョンごとに存在することになる。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:cmap1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:fnt1&#34;&gt;&lt;code&gt;adobe&lt;/code&gt;, &lt;code&gt;sourcehansansjp&lt;/code&gt;, &lt;code&gt;sourcehanjp&lt;/code&gt; のフォルダ名には特に意味はなく，自分で管理しやすい名前にすればいいらしい。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:fnt1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>クラウドで LuaLaTeX-ja - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/10/lualatex-ja-on-cloud/" />
		<id>tag:text.Baldanders.info,2017-10-02:/remark/2017/10/lualatex-ja-on-cloud/</id>
		<published>2017-10-02T22:13:48+09:00</published>
		<updated>2017-10-03T15:47:46+09:00</updated>
		<summary>ところで『LaTeX2ε美文書作成入門』を改めて眺めていたが， Cloud LaTeX というサービスが有るらしい。pLaTeX, upLaTeX だけじゃなく LuaLaTeX にも対応しているようだ。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2017/09/install-tex-live-2017-for-windows/&#34;&gt;TeX Live 2017 のインストール&lt;/a&gt;が終わったので，早速 $\mathrm{Lua\TeX}$-ja で遊ぼう。
今回の目標は&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;$\mathrm{Lua\TeX}$-ja を使い PDF/A フォーマットで出力する。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;である。&lt;/p&gt;

&lt;p&gt;$\mathrm{Lua\TeX}$ は2016年にバージョン1.0がリリースされたらしい。
めでたい！ &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 に収録されている $\mathrm{Lua\TeX}$ のバージョンは以下の通り。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ luatex -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;This is LuaTeX, Version 1.0.4 (TeX Live 2017/W32TeX)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Execute  &amp;#39;luatex --credits&amp;#39;  for credits and version details.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;There is NO warranty. Redistribution of this software is covered by
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;the terms of the GNU General Public License, version 2 or (at your option)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;any later version. For more information about these matters, see the file
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;named COPYING and the LuaTeX source.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;LuaTeX is Copyright 2017 Taco Hoekwater and the LuaTeX Team.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;では，さっそく文書ファイルを用意する。
（「&lt;a href=&#34;https://ja.osdn.net/projects/luatex-ja/wiki/LuaTeX-ja%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9&#34; title=&#34;LuaTeX-jaの使い方 - LuaTeX-ja Wiki - LuaTeX-ja - OSDN&#34;&gt;LuaTeX-jaの使い方&lt;/a&gt;」のコードを流用）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\section{はじめてのLua\TeX-ja}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ちゃんと日本語が出るかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\subsection{出たかな？}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;長い文章を入力するとちゃんと右端のところで折り返されるかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;大丈夫そうな気がするけど．ちょっと不安だけど何事も挑戦だよね．
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;プリアンブルの記述が減ったなぁ。
これをタイプセットしてみる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ lualatex hello.tex&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;$\mathrm{Lua\TeX}$ では直接 PDF を吐く。
出力結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37448584791/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4513/37448584791_9b74093e59.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;LuaLaTeX-ja (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37448584791/&#34;&gt;LuaLaTeX-ja (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;余談だが PDF ビュアはオープンソース製品を使おう。
個人的には &lt;a href=&#34;https://wiki.gnome.org/Apps/Evince&#34; title=&#34;Apps/Evince - GNOME Wiki!&#34;&gt;Evince&lt;/a&gt; がおすすめ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://pdfreaders.org/&#34;&gt;Get a Free Software PDF reader!&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.gnome.org/Apps/Evince&#34;&gt;Apps/Evince - GNOME Wiki!&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?Evince&#34;&gt;Evince - TeX Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;で，出力した PDF のプロパティを &lt;a href=&#34;https://wiki.gnome.org/Apps/Evince&#34; title=&#34;Apps/Evince - GNOME Wiki!&#34;&gt;Evince&lt;/a&gt; で見るとこんな感じになる。&lt;/p&gt;

&lt;p&gt;&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23596684168/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4438/23596684168_c877fd563c_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;&#34;&gt;&lt;/a&gt;&lt;/figure&gt;
&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23596684238/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4373/23596684238_c2f77f7534_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;&#34;&gt;&lt;/a&gt;&lt;/figure&gt;&lt;/p&gt;

&lt;p&gt;フォーマットは PDF 1.5。
&lt;a href=&#34;http://ipafont.ipa.go.jp/node26#ja&#34; title=&#34;IPAexフォント Ver.003.01(IPAexFont Ver.003.01) | IPAexフォント/IPAフォント&#34;&gt;IPAex&lt;/a&gt; フォントが埋め込み済みである。
最近の $\mathrm{Lua\TeX}$-ja は既定で &lt;a href=&#34;http://ipafont.ipa.go.jp/node26#ja&#34; title=&#34;IPAexフォント Ver.003.01(IPAexFont Ver.003.01) | IPAexフォント/IPAフォント&#34;&gt;IPAex&lt;/a&gt; フォントを使うようになっているらしい。
フォントの埋め込みを禁止するには以下の記述をプリアンブルに加える。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[noembed]{luatexja-preset}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;出力フォーマットが PDF 1.5 なので，これを PDF/A に変更する。
PDF/A に対応するには &lt;code&gt;hyperref&lt;/code&gt; パッケージを使う。&lt;/p&gt;

&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{hyperxmp} % XMP support with hyperref
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;hl&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[pdfencoding=auto,pdfa]{hyperref} % PDF/A compatible
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\hypersetup{% hyperref options (and metadata)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdflang={jp},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdftitle={はじめての LuaTeX-ja},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfsubject={ちゃんとLuaTeX-jaで日本語が出るかな？},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfauthor={Spiegel},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfkeywords={LuaTeX-ja, PDF/A},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcopyright={Written by Spiegel on 2017, and licensed under CC-BY.},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdflicenseurl={http://creativecommons.org/licenses/by/4.0/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontacturl={http://www.baldanders.info/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactcity={Hiroshima},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactcountry={Japan},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactregion={JA},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcaptionwriter={Spiegel},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    baseurl={http://text.baldanders.info/remark/2015/luatex-ja/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    draft=false,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarks=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarksnumbered=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarksopen=false,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    colorlinks=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    linkcolor=red,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    citecolor=green,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    filecolor=magenta,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    urlcolor=cyan
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\section{はじめてのLua\TeX-ja}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ちゃんと日本語が出るかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\subsection{出たかな？}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;長い文章を入力するとちゃんと右端のところで折り返されるかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;大丈夫そうな気がするけど．ちょっと不安だけど何事も挑戦だよね．
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code&gt;hyperxmp&lt;/code&gt; パッケージは &lt;code&gt;hyperref&lt;/code&gt; パッケージに対して XMP（Extensible Metadata Platform）拡張を行う。
これでタイプセットした結果について，先ほどと同じようにプロパティを確認する。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23596684308/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4342/23596684308_4f3600d2b7_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;LuaLaTeX-ja (4)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23596684308/&#34;&gt;LuaLaTeX-ja (4)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;フォーマットが PDF/A-1b になっていることが確認できる。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37418815792/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4433/37418815792_8de8637bdb_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;LuaLaTeX-ja (5)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37418815792/&#34;&gt;LuaLaTeX-ja (5)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ライセンス情報もちゃんと付与されてるな。&lt;/p&gt;

&lt;p&gt;ところで『&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34; title=&#34;Amazon | [改訂第7版]LaTeX2ε美文書作成入門 | 奥村 晴彦, 黒木 裕介 通販&#34;&gt;LaTeX2ε美文書作成入門&lt;/a&gt;』を改めて眺めていたが， &lt;a href=&#34;https://cloudlatex.io/&#34; title=&#34;Cloud LaTeX | Build your own LaTeX environment, in seconds&#34;&gt;Cloud LaTeX&lt;/a&gt; というサービスがあるらしい。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://cloudlatex.io/&#34;&gt;Cloud LaTeX | Build your own LaTeX environment, in seconds&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;$\mathrm{p\LaTeX}$, $\mathrm{up\LaTeX}$ だけじゃなく $\mathrm{Lua\LaTeX}$ にも対応しているみたい。
早速サインアップしてみた。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37192503250/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4441/37192503250_58c2c8c1d7.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Sign-up Cloud LaTeX&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37192503250/&#34;&gt;Sign-up Cloud LaTeX&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Facebook アカウントと Twitter アカウントが使えるようだ。
まぁ，昔はともかく，&lt;a href=&#34;http://www.itmedia.co.jp/news/articles/1710/01/news035.html&#34; title=&#34;「仕事にも支障が」　Twitterを凍結され、日本法人を訪れて抗議したエンジニアに聞く - ITmedia NEWS&#34;&gt;今の Twitter アカウントには一貫性も永続性もない&lt;/a&gt;ので認証に使うのは避けたほうがいいだろう（笑）&lt;/p&gt;

&lt;p&gt;サインアップ後の初期画面はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275654/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4419/36739275654_f2c069d976.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Cloud LaTeX (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275654/&#34;&gt;Cloud LaTeX (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;容量は 1 GB，プロジェクトは999個まで作成できるようだ。
バージョン管理みたいなのはできなさそうだが Dropbox と連携が可能だ。
あらかじめいくつかのテンプレートが登録されている。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37419240592/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4411/37419240592_545c19302a.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Templete in Cloud LaTeX&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37419240592/&#34;&gt;Templete in Cloud LaTeX&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;学生や研究者向けのテンプレートがほとんどだが，履歴書のテンプレートもあったりする。&lt;/p&gt;

&lt;p&gt;それでは，新しく空のプロジェクトを作ってみよう。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37448667041/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4500/37448667041_f279e0e649.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Cloud LaTeX (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37448667041/&#34;&gt;Cloud LaTeX (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275764/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4348/36739275764_bcc40cb274.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Cloud LaTeX (3)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275764/&#34;&gt;Cloud LaTeX (3)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;プロジェクトに入って先程の文書の内容を入力する。
さらにプロジェクトの設定で処理系を選択する。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275864/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4433/36739275864_0420af8d49_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Cloud LaTeX (4)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275864/&#34;&gt;Cloud LaTeX (4)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ここでは lualatex を選択する。
この状態で「コンパイル」した結果が以下の通り。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275814/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4436/36739275814_59bcea74d8.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Cloud LaTeX (5)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36739275814/&#34;&gt;Cloud LaTeX (5)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;見た目は OK かな。
生成した PDF をダウンロードしてプロパティを見てみる。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37448667361/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4431/37448667361_24bf5b262e_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Cloud LaTeX (6)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37448667361/&#34;&gt;Cloud LaTeX (6)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;おっ。
バージョン0.95なのか。&lt;/p&gt;

&lt;p&gt;というわけで， &lt;a href=&#34;https://cloudlatex.io/&#34; title=&#34;Cloud LaTeX | Build your own LaTeX environment, in seconds&#34;&gt;Cloud LaTeX&lt;/a&gt; でも同じものが生成できることを確認した。
ちなみに lualatex は（他の処理系に比べて）めっさ遅いので「自動コンパイル」を有効にする場合には注意が必要である。&lt;/p&gt;

&lt;p&gt;作成した文書ファイルは zip ファイルのダウンロードまたは Dropbox との連携で取得できる。
なお， zip ファイルでも Dropbox 連携でも，対象となるファイルは文書関連ファイルのみでコンパイル途中で生成されるファイルや処理結果の PDF は対象にならない。&lt;/p&gt;

&lt;p&gt;また他ユーザとの共有は考慮されていないようだ。
せめて GitHub のプライベートリポジトリと連携できると面白いと思うのだが。
でも容量が 1 GB しかないから git 等を使ったバージョン管理は無理かな。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2015/luatex-ja/&#34;&gt;LuaTeX-ja に関する覚え書き&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>そうだ， TeX Live 2017 (for Windows) をインストールしよう！ - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/09/install-tex-live-2017-for-windows/" />
		<id>tag:text.Baldanders.info,2017-10-01:/remark/2017/09/install-tex-live-2017-for-windows/</id>
		<published>2017-10-01T17:06:19+09:00</published>
		<updated>2017-10-02T17:35:32+09:00</updated>
		<summary>久しぶりに TeX をいじってみようかな，と思い立ったり。私の環境は TeX Live 2014 のままだったので，この機会にいったん環境を削除して TeX Live 2017 を入れ直すことにした。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;（あれ？ 前にも似たようなタイトルで記事を書いたような&amp;hellip;）&lt;/p&gt;

&lt;p&gt;最近 &lt;a href=&#34;http://text.baldanders.info/tags/tex/&#34;&gt;$\mathrm{\TeX}$ 絡みの記事を書いてる関係&lt;/a&gt;で『&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34; title=&#34;Amazon | [改訂第7版]LaTeX2ε美文書作成入門 | 奥村 晴彦, 黒木 裕介 通販&#34;&gt;LaTeX2ε美文書作成入門&lt;/a&gt;』を読み返しているのだが，久しぶりに $\mathrm{\TeX}$ をいじってみようかな，と思い立ったり。
私の環境は &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2014 のままだったので，この機会にいったん環境を削除して &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 を入れ直すことにした。&lt;/p&gt;

&lt;h2 id=&#34;tex-live-のインストール&#34;&gt;TeX Live のインストール&lt;/h2&gt;

&lt;p&gt;Windows の場合は，以下の場所からインストーラ &lt;code&gt;install-tl-windows.exe&lt;/code&gt; を取得する。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tug.org/texlive/acquire-netinstall.html&#34;&gt;Installing TeX Live over the Internet - TeX Users Group&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;figure lang=&#34;en&#34;&gt;
&lt;blockquote&gt;
&lt;q&gt;For typical needs, we recommend starting the TeX Live installation by downloading &lt;a href=&#34;http://mirror.ctan.org/systems/texlive/tlnet/install-tl-windows.exe&#34;&gt;install-tl-windows.exe&lt;/a&gt; for Windows (15mb), or &lt;a href=&#34;http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz&#34;&gt;install-tl-unx.tar.gz&lt;/a&gt; (4mb) for everything else.&lt;/q&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;http://www.tug.org/texlive/acquire-netinstall.html&#34;&gt;Installing TeX Live over the Internet&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;そのままインストーラを実行すればいいのだが，私の環境では Explorer からの起動では途中で処理が失敗してしまった。
私のようにうまくいかない場合は，コマンドプロンプト（&lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; でもオッケ）から起動すれば上手くいく。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ install-tl-windows.exe&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;インストーラを起動して最初の画面がこれ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550763638/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4495/23550763638_69e23884f3_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550763638/&#34;&gt;Install TeX Live 2017 (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;特に理由がなければ “Simple install (big)” を選択すればいいようだ。
まぁ simple と言いつつ&lt;strong&gt;全部&lt;/strong&gt;入ってしまうんだけど（笑）&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:tljp1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:tljp1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;ちなみに &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; の内容はかなり巨大で，全てをインストールするとなると相当な時間がかかる。
インストールが終わるまで待っているのは時間の浪費なので，他の作業のついでにバックグラウンドで行うようにするのがいいだろう。&lt;/p&gt;

&lt;p&gt;“Next” ボタンを押して次の画面へ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355502656/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4386/37355502656_9aa4243436_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355502656/&#34;&gt;Install TeX Live 2017 (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;さらに “Install” ボタンを押して次の画面へ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355502726/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4349/37355502726_7907d3266d_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (3)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355502726/&#34;&gt;Install TeX Live 2017 (3)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;この画面でファイルを展開し，以下の画面を起動する。
この画面が本当のインストーラである。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550763878/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4419/23550763878_eed5744a31.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (4)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550763878/&#34;&gt;Install TeX Live 2017 (4)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;既定では「既定リポジトリを変更」のチェックが外れているが，リポジトリを手動で選択できるようチェックを入れる。&lt;/p&gt;

&lt;p&gt;「次へ」ボタンを押して次の画面へ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550763928/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4426/23550763928_fae06af303.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (5)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550763928/&#34;&gt;Install TeX Live 2017 (5)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;この画面でリポジトリを選択する。
日本国内であれば “Japan” のリポジトリのどれかを選択すればいいだろう。&lt;/p&gt;

&lt;p&gt;「次へ」ボタンを押して次の画面へ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550764378/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4499/23550764378_fbf4f57091.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (6a)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23550764378/&#34;&gt;Install TeX Live 2017 (6a)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;この画面でインストール先のフォルダを決定する。
既定は &lt;code&gt;C:\texlive\2017&lt;/code&gt; フォルダだが，変更するなら「変更」ボタンを押して以下のプロンプトでインストール先のフォルダを変更できる。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503256/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4441/37355503256_3fe5943b3a_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (6b)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503256/&#34;&gt;Install TeX Live 2017 (6b)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;インストール先を決定したら「次へ」ボタンを押して次の画面へ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503416/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4445/37355503416_a63a2dbf2f.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (7)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503416/&#34;&gt;Install TeX Live 2017 (7)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;この画面では各種オプションを指定する。
分からなければ規定値のままでも特に問題はない。&lt;/p&gt;

&lt;p&gt;「次へ」ボタンを押して次の画面へ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503286/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4451/37355503286_ac02d01b46.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (8)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503286/&#34;&gt;Install TeX Live 2017 (8)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;これまでの指定内容で問題なければ「導入」ボタンを押してインストール処理を開始する。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503336/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4355/37355503336_2ddc73822f.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (9a)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503336/&#34;&gt;Install TeX Live 2017 (9a)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;上述したようにインストール処理が完了するまでにかなりの時間がかかる。
私の場合は5時間以上もかかった。
休日だったからよかったものの，インストールを開始してから朝食の準備を始めて，掃除・洗濯を終わらせて昼食を食べてもまだ終わらなかったほどだ（笑）&lt;/p&gt;

&lt;p&gt;処理が完了すると以下の表示になる。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503396/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4503/37355503396_6b5430d4fe.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Install TeX Live 2017 (9b)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/37355503396/&#34;&gt;Install TeX Live 2017 (9b)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;これで画面下にある「終了」ボタンを押して画面を閉じればインストール完了である。&lt;/p&gt;

&lt;p&gt;正常にインストールすれば環境変数 &lt;code&gt;PATH&lt;/code&gt; にインストール先フォルダが追加される。
たとえば ，インストール先が &lt;code&gt;C:\texlive\2017&lt;/code&gt; なら &lt;code&gt;C:\texlive\2017\bin\win32&lt;/code&gt; が &lt;code&gt;PATH&lt;/code&gt; に追加される&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:pth1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:pth1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;この状態で &lt;code&gt;uplatex&lt;/code&gt; コマンドを起動して動作確認をする。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ uplatex.exe -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;e-upTeX 3.14159265-p3.7.1-u1.22-161114-2.6 (utf8.uptex) (TeX Live 2017/W32TeX)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;kpathsea version 6.2.3
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ptexenc version 1.3.5
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Copyright 2017 D.E. Knuth.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;There is NO warranty.  Redistribution of this software is
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;covered by the terms of both the e-upTeX copyright and
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;the Lesser GNU General Public License.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;For more information about these matters, see the file
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;named COPYING and the e-upTeX source.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Primary author of e-upTeX: Peter Breitenlohner.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これで無問題。&lt;/p&gt;

&lt;h3 id=&#34;64ビット版&#34;&gt;64ビット版&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; の実行モジュールには64ビット版が存在するようだ。
インストーラが別途用意されているのではなく， zip ファイル（&lt;code&gt;tl-win64.zip&lt;/code&gt;）が配布サイトにひっそりと置かれている。
日本国内の ring サーバでは以下の場所にある。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://core.ring.gr.jp/pub/text/TeX/ptex-win32/current/TLW64/&#34;&gt;http://core.ring.gr.jp/pub/text/TeX/ptex-win32/current/TLW64/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://ftp.ring.gr.jp/pub/text/TeX/ptex-win32/current/TLW64/&#34;&gt;http://ftp.ring.gr.jp/pub/text/TeX/ptex-win32/current/TLW64/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://ftp.dnsbalance.ring.gr.jp/pub/text/TeX/ptex-win32/current/TLW64/&#34;&gt;http://ftp.dnsbalance.ring.gr.jp/pub/text/TeX/ptex-win32/current/TLW64/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;取得した zip の中身をインストール先フォルダの直下に展開すればよい。
インストール先フォルダが &lt;code&gt;C:\texlive\2017&lt;/code&gt; なら &lt;code&gt;C:\texlive\2017\bin\win64&lt;/code&gt; フォルダに展開されるはずである。
この &lt;code&gt;C:\texlive\2017\bin\win64&lt;/code&gt; フォルダへ &lt;code&gt;PATH&lt;/code&gt; を通せばいいのだが，自動ではやってくれないので，手動で環境変数 &lt;code&gt;PATH&lt;/code&gt; を設定する。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://next.matrix.jp/config-path-win7.html&#34;&gt;Windows 環境変数 Path の設定方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.k-cube.co.jp/wakaba/server/environ.html&#34;&gt;環境変数の設定方法&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;32ビット版のインストールが正しく終了していれば &lt;code&gt;PATH&lt;/code&gt; に32ビット版モジュールへのパス &lt;code&gt;C:\texlive\2017\bin\win32&lt;/code&gt; がセットされているはずだが，この値を変更するのではなく，32ビット版と64ビット版の両方に &lt;code&gt;PATH&lt;/code&gt; が通るようにする（全てのモジュールが64ビット版に置き換えられてるわけではないらしい）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;SET PATH=...C:\texlive\2017\bin\win64;C:\texlive\2017\bin\win32;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ここまで完了したら以下のコマンドを&lt;strong&gt;必ず&lt;/strong&gt;実行して最新状態にしておく。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ fmtutil-sys --all&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;では，32版と同じように &lt;code&gt;uplatex&lt;/code&gt; コマンドを起動して動作確認をしてみよう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ uplatex.exe -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;e-upTeX 3.14159265-p3.7.2-u1.22-170924-2.6 (utf8.uptex) (TeX Live 2017/W32TeX)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;kpathsea version 6.2.3
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ptexenc version 1.3.5
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Copyright 2017 D.E. Knuth.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;There is NO warranty.  Redistribution of this software is
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;covered by the terms of both the e-upTeX copyright and
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;the Lesser GNU General Public License.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;For more information about these matters, see the file
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;named COPYING and the e-upTeX source.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Primary author of e-upTeX: Peter Breitenlohner.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;あれ？ 微妙にバージョンが違わね？ まぁこっちが新しいならいいか。&lt;/p&gt;

&lt;h2 id=&#34;tlmgr-によるアップデート&#34;&gt;tlmgr によるアップデート&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; は多数のパッケージで構成され，かつ常にメンテナンスされている。
&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; の各パッケージを更新するには &lt;code&gt;tlmgr&lt;/code&gt; コマンド&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:tlmgr1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:tlmgr1&#34;&gt;3&lt;/a&gt;&lt;/sup&gt; を使う。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tug.org/texlive/tlmgr.html&#34;&gt;tlmgr - TeX Live - TeX Users Group&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tug.org/texlive/doc/tlmgr.html&#34;&gt;full documentation for tlmgr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?tlmgr&#34;&gt;tlmgr - TeX Wiki&lt;/a&gt; : 日本語による簡単な解説&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;tlmgr&lt;/code&gt; コマンドでインストールしたパッケージを更新するには &lt;code&gt;tlmgr update&lt;/code&gt; コマンドを起動する。
以下は全パッケージを更新する場合。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ tlmgr update --self --all
tlmgr.pl: package repository ftp://ftp.kddilabs.jp/CTAN/systems/texlive/tlnet (verified)
tlmgr.pl: saving backups to C:/texlive/2017/tlpkg/backups
[1/9, ??:??/??:??] update: animate [3112k] (45378 -&amp;gt; 45431) ... done
[2/9, 00:30/02:12] update: etoc [1225k] (45380 -&amp;gt; 45429) ... done
[3/9, 00:41/02:09] update: luatexko [255k] (44141 -&amp;gt; 45434) ... done
[4/9, 00:48/02:23] update: media9 [6692k] (45129 -&amp;gt; 45432) ... done
[5/9, 01:16/01:32] update: ocgx2 [14k] (45337 -&amp;gt; 45430) ... done
[6/9, 01:21/01:38] update: xetexko [282k] (43173 -&amp;gt; 45435) ... done
[7/9, 01:25/01:40] update: xltabular [71k] (45412 -&amp;gt; 45433) ... done
[8/9, 01:28/01:43] auto-install: amscls-doc (45436) [2080k] ... done
[9/9, 01:39/01:39] update: collection-langenglish [1k] (45076 -&amp;gt; 45436) ... done
running mktexlsr ...
done running mktexlsr.
running mtxrun --generate ...
done running mtxrun --generate.
tlmgr.pl: package log updated: C:/texlive/2017/texmf-var/web2c/tlmgr.log
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ちなみに &lt;code&gt;tlmgr&lt;/code&gt; コマンド自身を手動で更新するには以下のインストーラをダウンロードして実行する。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://mirror.ctan.org/systems/texlive/tlnet/update-tlmgr-latest.exe&#34;&gt;update-tlmgr-latest.exe &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;インストールされているパッケージの情報を確認するには &lt;code&gt;tlmgr info&lt;/code&gt; コマンドを使う。
たとえば $\mathrm{Lua\TeX}$-ja なら以下の通り。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ tlmgr info luatexja
package:     luatexja
category:    Package
shortdesc:   Typeset Japanese with Lua(La)TeX
longdesc:    The package offers support for typesetting Japanese documents with LuaTeX. Either of the Plain and LaTeX2e formats may be used with the package.
installed:   Yes
revision:    45216
sizes:       src: 477k, doc: 3889k, run: 1725k
relocatable: No
cat-version: 20170904.0
cat-date:    2017-09-04 14:48:49 +0200
cat-license: bsd
cat-topics:  japanese luatex class
collection:  collection-langjapanese
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;texmf-cnf-について&#34;&gt;texmf.cnf について&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; の設定は &lt;code&gt;texmf.cnf&lt;/code&gt; ファイルに記述されている。
&lt;code&gt;texmf.cnf&lt;/code&gt; の場所を確認するには &lt;code&gt;kpsewhich&lt;/code&gt; コマンドを使う。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -all texmf.cnf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;c:/texlive/2017/texmf.cnf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;c:/texlive/2017/texmf-dist/web2c/texmf.cnf&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; の設定を変更するにはこれらのファイルを変更すればいいんだけど，ファイルの中身を見るに，怖くてあまり触りたくない。
そこで &lt;code&gt;texmf-local/web2c&lt;/code&gt; フォルダを作ってそこに空の &lt;code&gt;texmf.cnf&lt;/code&gt; ファイルを放り込む。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$pwd
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;C:\texlive\2017
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ cd ..
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ mkdir texmf-local
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ cd texmf-local
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ mkdir web2c
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ cd web2c
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ echo&amp;gt;texmf.cnf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -all texmf.cnf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;c:/texlive/texmf-local/web2c/texmf.cnf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;c:/texlive/2017/texmf.cnf
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;c:/texlive/2017/texmf-dist/web2c/texmf.cnf&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;texmf-local/web2c/texmf.cnf&lt;/code&gt; はインストール先フォルダのひとつ上のフォルダに作られる点に注意。
このファイルは自前で作ったファイルなので好きに弄っていいわけだ。
ちなみに &lt;code&gt;texmf.cnf&lt;/code&gt; の設定内容の優先順位は &lt;code&gt;kpsewhich&lt;/code&gt; コマンド実行結果の表示順のとおり&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:pth2&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:pth2&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;。
つまり &lt;code&gt;c:/texlive/2017/texmf-dist/web2c/texmf.cnf&lt;/code&gt; の内容を書き換えたければ，書き換えたい部分を &lt;code&gt;c:/texlive/texmf-local/web2c/texmf.cnf&lt;/code&gt; にコピペして弄ればいいのだ。&lt;/p&gt;

&lt;p&gt;では，いくつか設定変更を行う。
そうそう。
もし設定変更で構成が変わったら &lt;code&gt;mktexlsr&lt;/code&gt; を実行しておくこと。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ mktexlsr
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/texmf-local/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/texmf-local/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-config/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-config/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-var/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-var/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updating C:/texlive/2017/texmf-dist/ls-R...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Updated C:/texlive/2017/texmf-dist/ls-R.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;mktexlsr: Done.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3 id=&#34;外部コマンドの自動実行-restricted-shell-escape&#34;&gt;外部コマンドの自動実行（Restricted Shell Escape）&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; のコマンドを実行する際，あるコマンドから別のコマンドを自動的に実行する仕組みがある。
しかし，勝手にどんなコマンドでも実行できる，というわけにはいかないので，実行できるコマンドをあらかじめ指定しておく。
自動実行可能な外部コマンドの一覧を指定するのが &lt;code&gt;shell_escape_commands&lt;/code&gt; で &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 では以下のような設定になっている。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;shell_escape_commands = \
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;bibtex,bibtex8,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;extractbb,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;gregorio,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;kpsewhich,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;makeindex,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;repstopdf,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;texosquery-jre8,\&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;設定状態は &lt;code&gt;kpsewhich&lt;/code&gt; コマンドでも確認できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=shell_escape_commands
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;bibtex,bibtex8,extractbb,gregorio,kpsewhich,makeindex,repstopdf,texosquery-jre8,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;実はこれには日本語用の &lt;code&gt;pbibtex&lt;/code&gt; などが含まれていない。
ちなみに，いわゆる「角藤版」と呼ばれる &lt;a href=&#34;http://w32tex.org/index-ja.html&#34;&gt;W32TeX&lt;/a&gt; では以下のように設定されているらしい。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;shell_escape_commands = \
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;bibtex,pbibtex,jbibtex,repstopdf,epspdf,extractbb,\
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;makeindex,mendex,kpsewhich&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;そこで &lt;code&gt;texmf-local/web2c/texmf.cnf&lt;/code&gt; ファイルにこの記述を追加して設定を上書きする。
一応 &lt;code&gt;kpsewhich&lt;/code&gt; コマンドでも確認しておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=shell_escape_commands
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;bibtex,pbibtex,jbibtex,repstopdf,epspdf,extractbb,makeindex,mendex,kpsewhich&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;よしよし。&lt;/p&gt;

&lt;p&gt;ところで &lt;code&gt;shell_escape_commands&lt;/code&gt; の設定はセキュリティ上のリスクを伴うものであることをお忘れなく。
過去には &lt;code&gt;shell_escape_commands&lt;/code&gt; に関する脆弱性問題もあったようだ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://jvndb.jvn.jp/ja/contents/2016/JVNDB-2016-008562.html&#34;&gt;JVNDB-2016-008562 TeX Live における任意のコマンドを実行される脆弱性 - JVN iPedia - 脆弱性対策情報データベース&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://d.hatena.ne.jp/zrbabbler/20161206/1481039449&#34;&gt;【重要】TeXシステムの脆弱性の件 - マクロツイーター&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;文字エンコーディングの自動判別&#34;&gt;文字エンコーディングの自動判別&lt;/h3&gt;

&lt;p&gt;$\mathrm{p\TeX}$ の処理系には，入力テキストの文字エンコーディングを自動判別する機能があり &lt;code&gt;texmf.cnf&lt;/code&gt; の以下の記述により有効になっている。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;% Guess input encoding (SJIS vs. Unicode, etc.) in pTeX and friends?
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% Default is 0, to not guess.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;guess_input_kanji_encoding = 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これはこれで問題ないのだが，自動判別機能は完璧ではないので間違うことも稀にある。
少なくとも $\mathrm{up\TeX}$ 系は入力が UTF-8 固定なので自動判別機能は不要である。&lt;/p&gt;

&lt;p&gt;そこで，またまた &lt;code&gt;texmf-local/web2c/texmf.cnf&lt;/code&gt; ファイルに追記して以下のように設定を書き換える。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;guess_input_kanji_encoding.uptex = 0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;guess_input_kanji_encoding.uplatex = 0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;一応 &lt;code&gt;kpsewhich&lt;/code&gt; コマンドで設定を確認しておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=guess_input_kanji_encoding -progname=platex
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kpsewhich -var-value=guess_input_kanji_encoding -progname=uplatex
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;$\mathrm{p\LaTeX}$ と $\mathrm{up\LaTeX}$ で設定が異なることが確認できた。&lt;/p&gt;

&lt;h2 id=&#34;漢字の埋め込み設定&#34;&gt;漢字の埋め込み設定&lt;/h2&gt;

&lt;p&gt;DVI から PDF に変換するドライバ &lt;code&gt;dvipdfmx&lt;/code&gt; 用に漢字の埋め込み設定をしておく。
設定には &lt;code&gt;updmap&lt;/code&gt; コマンドを使う。&lt;/p&gt;

&lt;p&gt;まずは設定状態を確認する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kanji-config-updmap status
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;CURRENT family for ja: ipaex
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Standby family : ipa
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Standby family : ms
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Standby family : yu-win10&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;この状態で，たとえば &lt;a href=&#34;http://ipafont.ipa.go.jp/node26#ja&#34; title=&#34;IPAexフォント Ver.003.01(IPAexFont Ver.003.01) | IPAexフォント/IPAフォント&#34;&gt;IPAex&lt;/a&gt; 書体から游書体に切り替えたいのであれば以下のコマンドを実行すればよい&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:upd1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:upd1&#34;&gt;5&lt;/a&gt;&lt;/sup&gt;。
本当に変更されると困るので &lt;code&gt;--dry-run&lt;/code&gt; オプション付きで。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kanji-config-updmap-sys --dry-run yu-win10
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Setting up ... ptex-yu-win10.map
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys --quiet --nomkmap --nohash -setoption jaEmbed yu-win10
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys --quiet --nomkmap --nohash -setoption jaVariant &amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ちなみにフォントの埋め込みを行わない場合は &lt;code&gt;nofont&lt;/code&gt; を指定する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kanji-config-updmap-sys --dry-run nofont
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Setting up ... ptex-noEmbed.map
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys --quiet --nomkmap --nohash -setoption jaEmbed noEmbed
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys --quiet --nomkmap --nohash -setoption jaVariant &amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;さらに &lt;code&gt;--jis2004&lt;/code&gt; オプションを付けて起動すると字形が JIS X 0213:2004 に対応したものになるのだが&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ kanji-config-updmap-sys --dry-run --jis2004 ipaex
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Setting up ... ptex-ipaex.map
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys --quiet --nomkmap --nohash -setoption jaEmbed ipaex
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys --quiet --nomkmap --nohash -setoption jaVariant -04
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updmap --sys&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;IPA/&lt;a href=&#34;http://ipafont.ipa.go.jp/node26#ja&#34; title=&#34;IPAexフォント Ver.003.01(IPAexFont Ver.003.01) | IPAexフォント/IPAフォント&#34;&gt;IPAex&lt;/a&gt; 書体， MS， Windows 用の游書体は JIS X 0213:2000 （あるいはそれ以前）または JIS X 0213:2004 のどちらかの字形しか持っていないため &lt;code&gt;--jis2004&lt;/code&gt; を付けても意味がない。
&lt;code&gt;--jis2004&lt;/code&gt; オプションが有効なのは macOS 用の游書体（&lt;code&gt;yu-osx&lt;/code&gt;），ヒラギノ書体（&lt;code&gt;hiragino-pron&lt;/code&gt;），モリサワ書体（&lt;code&gt;morisawa-pr6n&lt;/code&gt;），小塚書体（&lt;code&gt;kozuka-pr6&lt;/code&gt;, &lt;code&gt;kozuka-pr6n&lt;/code&gt;）である。&lt;/p&gt;

&lt;p&gt;ちなみに &lt;a href=&#34;http://ipafont.ipa.go.jp/node26#ja&#34; title=&#34;IPAexフォント Ver.003.01(IPAexFont Ver.003.01) | IPAexフォント/IPAフォント&#34;&gt;IPAex&lt;/a&gt; フォントは2015年のバージョン3リリースで JIS X 0213:2004 の字形に対応しているらしい（異体字を含む）。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://ipafont.ipa.go.jp/node21#ja&#34;&gt;リリースノート(Release Note) | IPAexフォント/IPAフォント&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ところで游書体は Windows 環境では 8.1 から標準搭載されているが， Office ユーザ向けにフォントパックが公開され Windows 7 でも利用可能になっている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.microsoft.com/ja-jp/download/details.aspx?id=49116&#34;&gt;Download 游ゴシック 游明朝フォントパック from Official Microsoft Download Center&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://forest.watch.impress.co.jp/docs/review/745200.html&#34;&gt;【レビュー】「Office 2016」の「游明朝」「游ゴシック」を旧Officeに追加する公式フォントパック - 窓の杜&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;試しに何かタイプセットしてみる&#34;&gt;試しに何かタイプセットしてみる&lt;/h2&gt;

&lt;p&gt;ちうわけでいつものあの文書ですね。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/spiegel-im-spiegel/charset_document&#34;&gt;spiegel-im-spiegel/charset_document: 「文字コードとその実装」 upLaTeX ドキュメント&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;いやぁ，いい加減これも内容が古すぎてアレなのだが，いまさら書き直す気にはならないし，すっかり $\mathrm{\LaTeX}$ 動作テスト用の文書になってしまった。
早速リポジトリをローカルに clone して，いきなり latexmk を起動する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ latexmk charset.tex
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Latexmk: All targets (charset.dvi charset.pdf) are up-to-date&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;よし！ ちゃんと動いたな。
ついでに PDF を PDF/A に変換しておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ ps2pdf14 -dPDFA -dPDFACompatibilityPolicy=1 -sProcessColorModel=DeviceCMYK charset.pdf charset-pdfa.pdf&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;生成したファイルをチェックする。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23572647868/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4475/23572647868_cb8eb6d545_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Output PDF/A&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/23572647868/&#34;&gt;Output PDF/A&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;よしよし。
ちゃんと PDF/A になってるな。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/texjporg&#34;&gt;Japanese TeX Development Community&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?TeX%20Live&#34;&gt;TeX Live - TeX Wiki&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?TeX%20Live%2FWindows&#34;&gt;TeX Live/Windows - TeX Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?texmf.cnf%20%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB&#34;&gt;texmf.cnf ファイル - TeX Wiki&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?%E5%A4%96%E9%83%A8%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%AE%9F%E8%A1%8C&#34;&gt;外部コマンドの実行 - TeX Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://tug.org/texlive/updmap-kanji.html&#34;&gt;updmap and kanji - TeX Live - TeX Users Group&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000640.shtml&#34;&gt;TeX Live 2013 のインストールに挑戦 — Baldanders.info&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000698.shtml&#34;&gt;TeX Live へようこそ！ — Baldanders.info&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000730.shtml&#34;&gt;TeX Live 2014 for Windows — Baldanders.info&lt;/a&gt; : この記事の中で pxjahyper パッケージについて説明しているが &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2017 には既に含まれていた。ブラボー！&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000731.shtml&#34;&gt;TeX 覚え書き（upLaTeX から PDF/A まで） — Baldanders.info&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000735.shtml&#34;&gt;LuaTeX の練習（About CC-License） — Baldanders.info&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2015/luatex-ja/&#34;&gt;LuaTeX-ja に関する覚え書き&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;books&#34;&gt;参考図書&lt;/h2&gt;

&lt;div class=&#34;hreview&#34; &gt;&lt;a class=&#34;item url&#34; href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34;&gt;&lt;img src=&#34;https://images-fe.ssl-images-amazon.com/images/I/51E5K7B53aL._SL160_.jpg&#34; alt=&#34;photo&#34; class=&#34;photo&#34;  /&gt;&lt;/a&gt;&lt;dl &gt;&lt;dt class=&#34;fn&#34;&gt;&lt;a class=&#34;item url&#34; href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34;&gt;[改訂第7版]LaTeX2ε美文書作成入門&lt;/a&gt;&lt;/dt&gt;&lt;dd&gt;奥村 晴彦 黒木 裕介 &lt;/dd&gt;&lt;dd&gt;技術評論社 2017-01-24&lt;/dd&gt;&lt;dd&gt;評価&lt;abbr class=&#34;rating&#34; title=&#34;5&#34;&gt;&lt;img src=&#34;http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif&#34; alt=&#34;&#34; /&gt;&lt;/abbr&gt; &lt;/dd&gt;&lt;/dl&gt;&lt;p class=&#34;similar&#34;&gt;&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4798118141/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4798118141.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;LaTeX2e辞典~用法・用例逆引きリファレンス (DESKTOP REFERENCE)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4535558752/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4535558752.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;公共政策入門 ミクロ経済学的アプローチ&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4320112415/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4320112415.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;Rで楽しむ統計 (Wonderful R 1)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4000298550/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4000298550.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;岩波データサイエンス Vol.5&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4797391383/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4797391383.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;数学ガールの秘密ノート/積分を見つめて (数学ガールの秘密ノートシリーズ)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4000298569/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4000298569.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;岩波データサイエンス Vol.6&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4798115363/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4798115363.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;独習 LaTeX2ε&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4785315717/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4785315717.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;具体例から学ぶ 多様体&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774193046/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4774193046.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;【改訂第3版】基礎からわかる情報リテラシー&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4768704700/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4768704700.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;はじめて学ぶリー群 ―線型代数から始めよう&#34;  /&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p class=&#34;description&#34;&gt;ついに第7版が登場。紙の本で買って常に側に置いておくのが吉。&lt;/p&gt;
&lt;p class=&#34;gtools&#34; &gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2017-09-27&#34;&gt;2017-09-27&lt;/abbr&gt; (powered by &lt;a href=&#34;http://www.goodpic.com/mt/aws/index.html&#34; &gt;G-Tools&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:tljp1&#34;&gt;日本語組版に必要なパッケージをインストールするには “Simple install (big)” が手っ取り早い。 &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; のパッケージ群を熟知している方なら “Custom install” でもいいかもしれないが。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:tljp1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:pth1&#34;&gt;Windows には「システム環境変数」と「ユーザ環境変数」の2つがあって，ユーザに固有の環境変数は「ユーザ環境変数」のほうに設定できるようになっている。環境変数 &lt;code&gt;PATH&lt;/code&gt; は「システム環境変数」と「ユーザ環境変数」の両方に存在し，両方を足し合わせたものが実際の &lt;code&gt;PATH&lt;/code&gt; として機能する。私が以前にインストールした &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; 2014 では &lt;code&gt;PATH&lt;/code&gt; を「システム環境変数」のほうにセットしていたが， 2017 では「ユーザ環境変数」のほうにセットしているようだ。私のように &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; を入れ直したり，バージョン別に &lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; を使い分けている人は環境変数に注意した方がいいだろう。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:pth1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:tlmgr1&#34;&gt;Windows 環境では &lt;code&gt;tlmgr&lt;/code&gt; コマンドはバッチファイルで提供される。実体は Perl スクリプトである。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:tlmgr1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:pth2&#34;&gt;&lt;code&gt;texmf.cnf&lt;/code&gt; の優先順位に関する完全なリストは &lt;code&gt;kpsewhich -var-value=TEXMFCNF&lt;/code&gt; コマンドから取得できる。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:pth2&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:upd1&#34;&gt;Windows 環境でフォントを切り替える場合は &lt;code&gt;kanji-config-updmap&lt;/code&gt; コマンドではなく &lt;code&gt;kanji-config-updmap-sys&lt;/code&gt; コマンドを使わないとうまくいかないようだ。ちなみに &lt;code&gt;-sys&lt;/code&gt; 付きのコマンドではシステム設定を変更する。 &lt;code&gt;texmf-local&lt;/code&gt; フォルダに環境をまるっとコピーしたらいけるかな？ 試す気はないが。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:upd1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>TeX の思ひ出 - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2017/09/tex-born-in-1978/" />
		<id>tag:text.Baldanders.info,2017-09-29:/remark/2017/09/tex-born-in-1978/</id>
		<published>2017-09-29T14:50:20+09:00</published>
		<updated>2017-10-05T17:51:09+09:00</updated>
		<summary>TeX の最初のバージョンって1978年なのか。それってもうすぐ40周年ぢゃん！</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;$\mathrm{\TeX}$ について調べ物をしていて，何気なく &lt;a href=&#34;https://ja.wikipedia.org/wiki/TeX&#34; title=&#34;TeX - Wikipedia&#34;&gt;Wikipedia のページ&lt;/a&gt;を見たら， $\mathrm{\TeX}$ の最初のバージョンって1978年なのか。
それってもうすぐ40周年ぢゃん！&lt;/p&gt;

&lt;p&gt;私は学生時代はロクに勉強もしない不良学生だったので $\mathrm{\TeX}$ とは無縁だったのだが，バブルの恩恵でたまたま潜り込んだシステムハウスで某社製レーザープリンタ用の $\mathrm{\TeX}$ ドライバと出会い，それが $\mathrm{\TeX}$ というか $\mathrm{\LaTeX}$ にハマるきっかけになった。&lt;/p&gt;

&lt;p&gt;大昔の話だし，この程度の内容なら時効だよな，もう。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;当時は LIPS (LBP Image Processing System) 制御の某企業のレーザープリンターが市場を席巻していた頃で，その中で件のレーザープリンタは比較的低価格&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:lp&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:lp&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; ながら PostScript を内蔵してるってんで「なら $\mathrm{\TeX}$ ドライバと抱き合わせで売ったらいんじゃね？」というかなり打算的な考えだったような気がする。
勤めていた会社が大学方面のコネクションが弱かったので繋ぎを付けたかったというのもあったような。
実際，このプリンタは $\mathrm{\TeX}$ ドライバとセットでそこそこ売れたらしい。&lt;/p&gt;

&lt;p&gt;その $\mathrm{\TeX}$ ドライバは Pascal で書かれてたんだけど，オリジナルの作者の方は所有権を既に手放していて，技術サポートとして私にお鉢が回ってきたのだった。&lt;/p&gt;

&lt;p&gt;いや，私， &lt;strong&gt;Pascal なんて（仕事では）やったことないんだってば！&lt;/strong&gt;&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:dp&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:dp&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;幸いなことにソフトウェアに関しては完成度が非常に高く，私自身は内部の深いところまでは触らずに済んだのだが，技術サポートの人がソフトウェアを触ったことがないなんてありえないので，私自身も $\mathrm{\TeX}$ に手を出すことになってしまった。&lt;/p&gt;

&lt;p&gt;しかも当時は DOS で 日本語 $\mathrm{Micro\TeX}$ である。
フロッピーディスクでは運用できず（当時はまだ高かった）ハードディスクを専用に買ってもらったっけ。
しかし，件のプリンタと $\mathrm{\TeX}$ ドライバによる出力結果は素晴らしいの一言で，ワープロ&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:wp1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:wp1&#34;&gt;3&lt;/a&gt;&lt;/sup&gt; なんか目じゃない仕上がりに一目惚れしてしまったのだ。&lt;/p&gt;

&lt;p&gt;そこからはホントにどハマリしたね。
フォーマット・フリーの社内文書はほとんど $\mathrm{\LaTeX}$ で書いた。
議事録すら $\mathrm{\LaTeX}$ で書いたことがあって，お客さんに「どこの論文かと思った」と皮肉を言われたのも今は良い思い出である（笑）
ちなみに今でも履歴書は $\mathrm{\LaTeX}$ で&lt;a href=&#34;https://www.tamacom.com/rireki-j.html&#34; title=&#34;履歴書スタイルファイル&#34;&gt;書いている&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;当時に社内で書いた文書の一部は&lt;a href=&#34;http://www.baldanders.info/&#34; title=&#34;Baldanders.info&#34;&gt;本家サイト&lt;/a&gt;でも公開している。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;span&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/archive/charset-pdfa.pdf&#34;&gt;文字コードとその実装&lt;sup&gt;&lt;i class=&#34;fa fa-file-pdf-o&#34;&gt;&lt;/i&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; （&lt;a href=&#34;https://github.com/spiegel-im-spiegel/charset_document&#34; title=&#34;spiegel-im-spiegel/charset_document: 「文字コードとその実装」 upLaTeX ドキュメント&#34;&gt;GitHub&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/archive/ProgSH.pdf&#34;&gt;SH マイコン C プログラミング虎の巻&lt;sup&gt;&lt;i class=&#34;fa fa-file-pdf-o&#34;&gt;&lt;/i&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; （&lt;a href=&#34;https://github.com/spiegel-im-spiegel/progSH_document&#34; title=&#34;spiegel-im-spiegel/progSH_document: SHマイコン Cプログラミング虎の巻 (pLaTeX ドキュメント&#34;&gt;GitHub&lt;/a&gt;）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;その後，証券会社が倒産するほどの不況のずんどこが訪れ，勤務先もその煽りでプリンタ販売業務を止めてしまったが，私は $\mathrm{\TeX}$ で遊び続けた。
最初の頃のバイブルだった『てくてく$\mathrm{\TeX}$』とか『$\mathrm{\LaTeX}$入門』とかいまだに本棚に並んでるですよ&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:bs1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:bs1&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36713793483/&#34;&gt;&lt;img srcset=&#34;https://farm5.staticflickr.com/4448/36713793483_453ca1483a.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;私はコレで TeX を覚えましたw&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/36713793483/&#34;&gt;私はコレで TeX を覚えましたw&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;そういや昔は，テープを物理的に「回覧」して配布してたんだよねぇ。
私はテープを扱えるデバイスを（私的には）持ってなかったので回覧に参加できなかったんだけど。&lt;/p&gt;

&lt;p&gt;そのうち FTP や HTTP で大量にダウンロードできる環境が整って（ADSL 万歳！），長いあいだ一番お世話になったのはいわゆる「&lt;a href=&#34;http://w32tex.org/index-ja.html&#34; title=&#34;W32TeX&#34;&gt;角藤版&lt;/a&gt;」だった（今でも成果については大変恩恵を受けてますが）。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; を利用するようになったのは&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000640.shtml&#34; title=&#34;TeX Live 2013 のインストールに挑戦 — Baldanders.info&#34;&gt;2013年&lt;/a&gt;から。
いや，めっさ簡単になったものだよ。&lt;/p&gt;

&lt;p&gt;しかし，最近いちばん衝撃を受けたのは &lt;a href=&#34;https://ja.osdn.net/projects/luatex-ja/wiki/FrontPage&#34;&gt;LuaTeX-ja&lt;/a&gt; か。
だって日本語環境でもようやく直接 PDF/A を吐ける処理系が登場したんだよ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.baldanders.info/spiegel/log2/000731.shtml&#34;&gt;TeX 覚え書き（upLaTeX から PDF/A まで） — Baldanders.info&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2015/luatex-ja/&#34;&gt;LuaTeX-ja に関する覚え書き&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;これによってようやく日本語の $\mathrm{\TeX}$ 処理系でストレスなく PDF/A 形式のデジタル文書を作れるようになったわけだ。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;まぁでも $\mathrm{\TeX}$ 処理系は使わなくなったね。
理由は簡単で，デジタル文書が「紙」の制約から離れ始めたから。
それでも過去の成果は継承されていくし &lt;a href=&#34;https://www.mathjax.org/&#34;&gt;MathJax&lt;/a&gt; のように形を変えて残っていくものもあるんだけど。&lt;/p&gt;

&lt;p&gt;昔は「完成図書」をどうやって作成・維持するかが重要だった。
だから最終出力が「紙」である（または「紙」を意識する）ことに意味があったわけだ。&lt;/p&gt;

&lt;p&gt;でも今は違う。
そもそも「完成図書」など存在し得ない。
何故なら，プログラムと同様に，文書もまた常に更新される（ベータ版だ）から。
デジタル以前は更新コストが高かっただけで，もともと完全な文書など存在しないのだ（「コーディング」が紙テープやパンチカードから端末上での直接編集に変わって「コーダー」という職業が消滅したのと相似形かもしれない）。&lt;/p&gt;

&lt;p&gt;しかも更新履歴は git などのバージョン管理ツールで自動化できる。
つまり（プログラムコードもそうだけど）今や文書ってのは「時間」というベクトルを加えた存在になりつつあるわけだ。
文書が「「紙」の制約から離れ」るってのはそういうことなのだ。&lt;/p&gt;

&lt;p&gt;ひとつのソフトウェア・システムが40年も継続して存在するというのは凄いことだ。
「文書」の意味が変わりつつある中で，これからの40年で $\mathrm{\TeX}$ がどう変わっていくのか。
それとも無くなってしまうのか。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?TeX%E3%81%AE%E6%AD%B4%E5%8F%B2&#34;&gt;TeXの歴史 - TeX Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;参考図書&#34;&gt;参考図書&lt;/h2&gt;

&lt;div class=&#34;hreview&#34; &gt;&lt;a class=&#34;item url&#34; href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34;&gt;&lt;img src=&#34;https://images-fe.ssl-images-amazon.com/images/I/51E5K7B53aL._SL160_.jpg&#34; alt=&#34;photo&#34; class=&#34;photo&#34;  /&gt;&lt;/a&gt;&lt;dl &gt;&lt;dt class=&#34;fn&#34;&gt;&lt;a class=&#34;item url&#34; href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774187054/baldandersinf-22/&#34;&gt;[改訂第7版]LaTeX2ε美文書作成入門&lt;/a&gt;&lt;/dt&gt;&lt;dd&gt;奥村 晴彦 黒木 裕介 &lt;/dd&gt;&lt;dd&gt;技術評論社 2017-01-24&lt;/dd&gt;&lt;dd&gt;評価&lt;abbr class=&#34;rating&#34; title=&#34;5&#34;&gt;&lt;img src=&#34;http://g-images.amazon.com/images/G/01/detail/stars-5-0.gif&#34; alt=&#34;&#34; /&gt;&lt;/abbr&gt; &lt;/dd&gt;&lt;/dl&gt;&lt;p class=&#34;similar&#34;&gt;&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4798118141/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4798118141.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;LaTeX2e辞典~用法・用例逆引きリファレンス (DESKTOP REFERENCE)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4535558752/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4535558752.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;公共政策入門 ミクロ経済学的アプローチ&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4320112415/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4320112415.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;Rで楽しむ統計 (Wonderful R 1)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4000298550/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4000298550.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;岩波データサイエンス Vol.5&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4797391383/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4797391383.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;数学ガールの秘密ノート/積分を見つめて (数学ガールの秘密ノートシリーズ)&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4000298569/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4000298569.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;岩波データサイエンス Vol.6&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4798115363/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4798115363.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;独習 LaTeX2ε&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4785315717/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4785315717.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;具体例から学ぶ 多様体&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4774193046/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4774193046.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;【改訂第3版】基礎からわかる情報リテラシー&#34;  /&gt;&lt;/a&gt; &lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4768704700/baldandersinf-22/&#34; target=&#34;_top&#34;&gt;&lt;img src=&#34;http://images.amazon.com/images/P/4768704700.09._SCTHUMBZZZ_.jpg&#34;  alt=&#34;はじめて学ぶリー群 ―線型代数から始めよう&#34;  /&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p class=&#34;description&#34;&gt;ついに第7版が登場。紙の本で買って常に側に置いておくのが吉。&lt;/p&gt;
&lt;p class=&#34;gtools&#34; &gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2017-09-27&#34;&gt;2017-09-27&lt;/abbr&gt; (powered by &lt;a href=&#34;http://www.goodpic.com/mt/aws/index.html&#34; &gt;G-Tools&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:lp&#34;&gt;つっても当時のレーザープリンタは個人では買えないくらい高かったが。しかも PostScript プリンタは目玉が飛び出るくらい高かった。まぁ，まだバブルの名残が残ってたしねぇ。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:lp&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:dp&#34;&gt;ちなみに私が &lt;a href=&#34;https://ja.wikipedia.org/wiki/Delphi&#34; title=&#34;Delphi - Wikipedia&#34;&gt;Delphi&lt;/a&gt; で遊びだしたのは後のことである。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:dp&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:wp1&#34;&gt;当時の日本語ワープロといえば圧倒的に「一太郎」だったが （Windows 95 が登場してからは Microsoft Word も健闘してたけど当時の Word はとにかく日本語処理が下手くそだった），紙への出力に関しては私のような素人が見てもカスみたいな品質だった。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:wp1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:bs1&#34;&gt;先日，納戸にしまった本を発掘してたら &lt;a href=&#34;https://www.instagram.com/p/BZs5cUuHDNO/&#34;&gt;$\mathrm{\TeX}$ 関連の本やらパッケージが大量に出てきて&lt;/a&gt;我ながら笑ってしまった。どんだけ好きだったんだろう（笑）
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:bs1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
</feed>
