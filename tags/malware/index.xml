<feed xmlns="http://www.w3.org/2005/Atom" xmlns:cc="http://web.resource.org/cc/">
	<title>List of Malware - text.Baldanders.info</title>
	<link rel="alternate" type="text/html" href="https://text.baldanders.info/tags/malware/" />
	<link rel="self" type="application/atom+xml" href="https://text.baldanders.info/tags/malware/index.xml" />
	<id>tag:text.Baldanders.info,2024-06-30:/tags</id>
	<updated>2024-06-30T15:53:58+09:00</updated>
	<subtitle>帰ってきた「しっぽのさきっちょ」</subtitle>
	<icon>https://text.baldanders.info/images/avatar.jpg</icon>
	<logo>https://text.baldanders.info/images/avatar.jpg</logo>

	<entry>
		<title>ClamTk を導入する</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2024/06/install-clamtk/" />
		<id>tag:text.Baldanders.info,2024-06-30:/remark/2024/06/install-clamtk/</id>
		<published>2024-06-30T06:53:58+00:00</published>
		<updated>2024-06-30T08:39:31+00:00</updated>
		<summary>GUI フロントエンドで（多分）簡単操作</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">&lt;p&gt;随分前に &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; を&lt;a href=&#34;https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/&#34; target=&#34;_blank&#34; title=&#34;Ununtu に ClamAV を導入する&#34;&gt;導入&lt;/a&gt;する話を書いたのだが，今回は GUI フロントエンドである &lt;a href=&#34;https://gitlab.com/dave_m/clamtk/&#34; target=&#34;_blank&#34; title=&#34;Dave M / clamtk · GitLab&#34;&gt;ClamTk&lt;/a&gt; を導入する。&lt;/p&gt;
&lt;p&gt;その前に &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; 手順が以前とは少し違ってるみたいなので，そこからやり直し。&lt;/p&gt;
&lt;h2&gt;ClamAV のインストール&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; は APT でインストール可能。
ここは以前と変わらず。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt install clamav clamav-daemon libclamunrar
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/&#34; target=&#34;_blank&#34; title=&#34;Ununtu に ClamAV を導入する&#34;&gt;前&lt;/a&gt;のときはなかった &lt;code&gt;libclamunrar&lt;/code&gt; は圧縮ファイルの中身やメール添付ファイルを検証するパッケージらしい。
&lt;a href=&#34;https://www.ubuntu.com/&#34; target=&#34;_blank&#34; title=&#34;The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu&#34;&gt;Ubuntu&lt;/a&gt; では依存パッケージとして &lt;code&gt;libclamunrar11&lt;/code&gt; もインストールされる。
Debian だと &lt;a href=&#34;https://packages-pkgmirror-csail.debian.org/sid/libclamunrar12&#34; target=&#34;_blank&#34; title=&#34;Debian -- sid の libclamunrar12 パッケージに関する詳細&#34;&gt;&lt;code&gt;libclamunrar12&lt;/code&gt;&lt;/a&gt; ってのがあるらいいけど &lt;a href=&#34;https://www.ubuntu.com/&#34; target=&#34;_blank&#34; title=&#34;The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu&#34;&gt;Ubuntu&lt;/a&gt; の標準リポジトリにはなかった。&lt;/p&gt;
&lt;p&gt;バージョンを確認しておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ clamscan --version
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ClamAV 1.0.5/27321/Sat Jun 29 17:39:26 2024
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;おー。
v1 に到達してたのか。&lt;/p&gt;
&lt;p&gt;インストール後のサービスの状態を確認する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl status clamav-daemon.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;○ clamav-daemon.service - Clam AntiVirus userspace daemon
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     Loaded: loaded (/usr/lib/systemd/system/clamav-daemon.service; enabled; preset: enabled)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Drop-In: /etc/systemd/system/clamav-daemon.service.d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             └─extend.conf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     Active: inactive (dead)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;TriggeredBy: ○ clamav-daemon.socket
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  Condition: start condition unmet at Sun 2024-06-30 09:19:59 JST; 2min 11s ago
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             └─ ConditionPathExistsGlob=/var/lib/clamav/daily.{c[vl]d,inc} was not met
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       Docs: man:clamd(8)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             man:clamd.conf(5)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             https://docs.clamav.net/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ありゃ，状態が &lt;code&gt;inactive&lt;/code&gt; だな。
サービスを &lt;code&gt;start&lt;/code&gt; させればいいのかな。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl start clamav-daemon.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl status clamav-daemon.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;● clamav-daemon.service - Clam AntiVirus userspace daemon
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     Loaded: loaded (/usr/lib/systemd/system/clamav-daemon.service; enabled; preset: enabled)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Drop-In: /etc/systemd/system/clamav-daemon.service.d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             └─extend.conf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     Active: active (running) since Sun 2024-06-30 09:37:30 JST; 5s ago
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;TriggeredBy: ● clamav-daemon.socket
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       Docs: man:clamd(8)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             man:clamd.conf(5)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             https://docs.clamav.net/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Process: 1408921 ExecStartPre=/bin/mkdir -p /run/clamav (code=exited, status=0/SUCCESS)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Process: 1408923 ExecStartPre=/bin/chown clamav /run/clamav (code=exited, status=0/SUCCESS)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   Main PID: 1408925 (clamd)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      Tasks: 1 (limit: 37666)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     Memory: 922.0M (peak: 922.0M)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        CPU: 5.803s
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;     CGroup: /system.slice/clamav-daemon.service
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;             └─1408925 /usr/sbin/clamd --foreground=true
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;んー，大丈夫かな。&lt;/p&gt;
&lt;p&gt;設定ファイルは &lt;code&gt;/etc/clamav/clamd.conf&lt;/code&gt; ができているはず。
そのままでも問題ない。
強いて挙げるなら &lt;code&gt;MaxThreads&lt;/code&gt; の値が CPU コア数になってると思うので，適当に間引いた値にするとストレスになりにくい。&lt;/p&gt;
&lt;p&gt;On-Access スキャンの設定については以下を参照のこと。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.clamav.net/manual/OnAccess.html&#34; target=&#34;_blank&#34;&gt;On-Access Scanning - ClamAV Documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;設定変更したらサービスを &lt;code&gt;restart&lt;/code&gt; してね。&lt;/p&gt;
&lt;h3&gt;ClamAV 動作確認&lt;/h3&gt;
&lt;p&gt;以下のページからテスト用のファイルをダウンロードする。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.eicar.org/download-anti-malware-testfile/&#34; target=&#34;_blank&#34;&gt;Download Anti Malware Testfile - EICAR&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;次に，以下のコマンドを実行しダウンロードしたファイルをスキャンさせる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo clamscan -r --bell -i --max-filesize=100M -l scan.log .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/path/to/eicar-test/eicar.com.txt: Win.Test.EICAR_HDB-1 FOUND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/path/to/eicar-test/eicarcom2.zip: Win.Test.EICAR_HDB-1 FOUND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/path/to/eicar-test/eicar_com.zip: Win.Test.EICAR_HDB-1 FOUND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/path/to/eicar-test/eicar.com: Win.Test.EICAR_HDB-1 FOUND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;----------- SCAN SUMMARY -----------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Known viruses: 8695433
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Engine version: 1.0.5
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Scanned directories: 2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Scanned files: 11
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Infected files: 4
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Data scanned: 309.96 MB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Data read: 44.05 MB (ratio 7.04:1)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 42.667 sec (0 m 42 s)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Start Date: 2024:06:30 09:53:06
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;End Date:   2024:06:30 09:53:49
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;んー，これも問題なさそうかな。
ちなみにオプションの意味は&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-r&lt;/code&gt; は指定したディレクトリを再帰的に走査する&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--bell&lt;/code&gt; は malware を見つけたらベルを鳴らす&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt; malware に感染したファイルのみを報告する&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--max-filesize&lt;/code&gt; は指定したファイルより大きいファイルはスキップする（既定値は &lt;code&gt;25M&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt; はログファイルの指定&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;という感じ。&lt;/p&gt;
&lt;h2&gt;ClamTk のインストール&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://gitlab.com/dave_m/clamtk/&#34; target=&#34;_blank&#34; title=&#34;Dave M / clamtk · GitLab&#34;&gt;ClamTk&lt;/a&gt; のインストールも APT でOK。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt install clamtk
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ただしそのままだと色々と不具合があるらしいので，以下のページを参考に，いくつかのファイルを変更する。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://freefielder.jp/blog/2017/05/ubuntu-clamtk-trouble.html&#34; target=&#34;_blank&#34;&gt;【Ubuntu】ウィルス対策。ClamTkが上手く動作しないときの対処あれこれ。 - freefielder.jp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;まずは &lt;code&gt;/usr/bin/clamtk&lt;/code&gt; (Perl ソース) ファイルから。&lt;/p&gt;
&lt;p&gt;以下の記述を探す（45行目あたり？）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;setlocale&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LC_ALL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# setlocale( LC_ALL, &amp;#39;C&amp;#39; );&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;これのコメントを反転させる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# setlocale( LC_ALL, &amp;#39;&amp;#39; );&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;setlocale&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LC_ALL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;もうひとつ。
&lt;code&gt;/usr/share/perl5/ClamTk/Scan.pm&lt;/code&gt; (これも Perl ソース) ファイルについても以下の記述を探す（200行目あたり？）。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Try to avoid scanning emails...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$directive&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39; --scan-mail=no&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;これの &lt;code&gt;no&lt;/code&gt; の部分を &lt;code&gt;yes&lt;/code&gt; に変更する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Try to avoid scanning emails...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$directive&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;.=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39; --scan-mail=yes&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;これって APT で &lt;a href=&#34;https://gitlab.com/dave_m/clamtk/&#34; target=&#34;_blank&#34; title=&#34;Dave M / clamtk · GitLab&#34;&gt;ClamTk&lt;/a&gt; を更新する度にやるのかねぇ。
面倒な&amp;hellip;&lt;/p&gt;
&lt;p&gt;まぁ，いいや。
早速起動してみよう。&lt;/p&gt;
&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;&lt;a href=&#34;./clamtk.png&#34;&gt;&lt;img src=&#34;./clamtk.png&#34; srcset=&#34;./clamtk.png 554w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;ClamTk&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;&lt;figcaption&gt;&lt;div&gt;&lt;a href=&#34;./clamtk.png&#34;&gt;ClamTk&lt;/a&gt;&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;修正のせいで英語表記になってるのかな。
これはしょうがないか。&lt;/p&gt;
&lt;p&gt;まずは “Update Assistant” から&lt;/p&gt;
&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;&lt;a href=&#34;./update-assistant.png&#34;&gt;&lt;img src=&#34;./update-assistant.png&#34; srcset=&#34;./update-assistant.png 554w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Update Assistant&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;&lt;figcaption&gt;&lt;div&gt;&lt;a href=&#34;./update-assistant.png&#34;&gt;Update Assistant&lt;/a&gt;&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;“I would like to update signitures myself” にチェックを入れて Apply する。
これは signiture データの更新を後述する “Scheduler” で行うため。&lt;/p&gt;
&lt;p&gt;次に “Update” を開く。&lt;/p&gt;
&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;&lt;a href=&#34;./update.png&#34;&gt;&lt;img src=&#34;./update.png&#34; srcset=&#34;./update.png 554w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Update&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;&lt;figcaption&gt;&lt;div&gt;&lt;a href=&#34;./update.png&#34;&gt;Update&lt;/a&gt;&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;“Check for Updates” を押下して signiture データを更新する（上の図は更新後の状態）。&lt;/p&gt;
&lt;p&gt;更に “Whitelist” を開いて &lt;code&gt;/home/username&lt;/code&gt; ディレクトリ以下でスキャンから除外するディレクトリを指定する。&lt;/p&gt;
&lt;p&gt;これでようやく “Scheduler” の設定ができる。&lt;/p&gt;
&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;&lt;a href=&#34;./scheduler.png&#34;&gt;&lt;img src=&#34;./scheduler.png&#34; srcset=&#34;./scheduler.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Scheduler&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;&lt;figcaption&gt;&lt;div&gt;&lt;a href=&#34;./scheduler.png&#34;&gt;Scheduler&lt;/a&gt;&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;これでスキャンと signiture データの更新を行う時刻を指定できる。
“Scheduler” の設定は crontab に反映されている。
こんな感じ&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ crontab -l
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1 1 * * * /usr/bin/freshclam --datadir=/home/username/.clamtk/db --log=/home/username/.clamtk/db/freshclam.log # clamtk-defs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10 1 * * * /usr/bin/clamscan --exclude-dir=/home/username/.clamtk/viruses --exclude-dir=smb4k --exclude-dir=/run/user/username/gvfs --exclude-dir=/home/username/.gvfs --exclude-dir=.thunderbird --exclude-dir=.mozilla-thunderbird --exclude-dir=.evolution --exclude-dir=Mail --exclude-dir=kmail --database=/home/username/.clamtk/db -i -r /home/username --log=&amp;#34;$HOME/.clamtk/history/$(date +\%b-\%d-\%Y).log&amp;#34; 2&amp;gt;/dev/null # clamtk-scan
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;crontab って一見便利ぽいけど，コマンドライン・オプションの指定ミスで簡単に設定が消えちゃうし &lt;a href=&#34;https://gitlab.com/dave_m/clamtk/&#34; target=&#34;_blank&#34; title=&#34;Dave M / clamtk · GitLab&#34;&gt;ClamTk&lt;/a&gt; みたいにツールが設定を行う場合もあるので，うっかり触れないんだよなー&lt;/p&gt;
&lt;p&gt;愚痴はともかく，これで設定完了。
とりあえず “Scan a directory” で malware がないか確認しておこう。&lt;/p&gt;
&lt;p&gt;お疲れ様でした。&lt;/p&gt;
&lt;h2&gt;ブックマーク&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://zenn.dev/gladevise/articles/clamav-usage&#34; target=&#34;_blank&#34;&gt;Linux向けウィルス対策ソフトClamAVの使い方&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://ameblo.jp/l-yotarou/entry-12836559211.html&#34; target=&#34;_blank&#34;&gt;Ubuntu 22.04 LTSでウイルス対策ソフトを実行 ! | 与太郎のLinux道楽&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://sub-log.jp/2022/12/04/linux-mint%e3%81%abclamav%e3%81%aegui%e3%83%95%e3%83%ad%e3%83%b3%e3%83%88%e3%82%a8%e3%83%b3%e3%83%89%e3%81%a7%e3%81%82%e3%82%8bclamtk%e3%82%92%e5%b0%8e%e5%85%a5%e3%81%99%e3%82%8b/&#34; target=&#34;_blank&#34;&gt;Linux MintにClamAVのGUIフロントエンドであるClamTkを導入する  |  サブログ -sub log-&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考図書&lt;/h2&gt;
&lt;div class=&#34;hreview&#34;&gt;
  &lt;div class=&#34;photo&#34;&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/4295013498?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;&lt;img src=&#34;https://m.media-amazon.com/images/I/51Z5QFGJTFL._SL160_.jpg&#34; width=&#34;125&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;dl&gt;
    &lt;dt class=&#34;item&#34;&gt;&lt;a class=&#34;fn url&#34; href=&#34;https://www.amazon.co.jp/dp/4295013498?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;スーパーユーザーなら知っておくべきLinuxシステムの仕組み&lt;/a&gt;&lt;/dt&gt;
    &lt;dd&gt;Brian Ward (著), 柴田 芳樹 (翻訳)&lt;/dd&gt;
    &lt;dd&gt;インプレス 2022-03-08 (Release 2022-03-08)&lt;/dd&gt;
    &lt;dd&gt;単行本（ソフトカバー）&lt;/dd&gt;
    &lt;dd&gt;4295013498 (ASIN), 9784295013495 (EAN), 4295013498 (ISBN)&lt;/dd&gt;
    &lt;dd&gt;評価&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;4&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;far fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&#34;description&#34;&gt;&lt;a href=&#34;https://book.impress.co.jp/books/1121101019&#34;&gt;版元で PDF 版が買える&lt;/a&gt;。セキュリティ・エリアにも持ち込めるよう紙の本を買ったのだが，&lt;a href=&#34;https://technical-book-reading-2.connpass.com/event/272189/&#34;&gt;オンライン読書会&lt;/a&gt;が始まったので PDF 版も購入。Linux システムの扱い方に関するリファレンス本として優れている。最初に軽く流し読みして，必要に応じて該当項目を拾い読みしていけばいいだろう。&lt;/p&gt;
  &lt;p class=&#34;powered-by&#34;&gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2023-02-11&#34;&gt;2023-02-11&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;&gt;PA-APIv5&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt; &lt;!-- Linuxシステムの仕組み --&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;私は裏で色々バッチ処理を行ってる関係で，マシンは基本的に立ち上げっぱなしである。&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry><entry>
		<title>XZ Utils に仕組まれたバックドアに関する覚え書き</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2024/04/xz-utils-backdoor/" />
		<id>tag:text.Baldanders.info,2024-04-01:/remark/2024/04/xz-utils-backdoor/</id>
		<published>2024-04-01T11:18:07+00:00</published>
		<updated>2024-10-25T13:40:03+00:00</updated>
		<summary>起こったことはしょうがないので，ユーザとしては粛々と対応するしかない。</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">&lt;p&gt;先日から騒ぎになっている XZ Utils に仕組まれたバックドアについて覚え書きとしてブックマークをまとめておく。
最初は単なるセキュリティ脆弱性か悪意のコードかみたいな話が飛び交ってた気がするが，完全に malicious code として認知されたみたいね。
まぁ，詐欺としてはよくある話。
悪人顔の詐欺師なんかフィクションである（笑）&lt;/p&gt;
&lt;p&gt;起こったことはしょうがないので，ユーザとしては粛々と対応するしかない。
政治的な話は知らんが，願わくばまっとうなエンジニアを非難し活動を萎縮させるような行為は止めていただきたいものである。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tukaani.org/xz-backdoor/&#34; target=&#34;_blank&#34;&gt;XZ Utils backdoor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://nvd.nist.gov/vuln/detail/CVE-2024-3094&#34; target=&#34;_blank&#34;&gt;NVD - CVE-2024-3094&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:H/I:H/A:H&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;深刻度: 緊急 (Score: 10)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;基本評価基準&lt;/th&gt;
          &lt;th&gt;評価値&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;攻撃元区分&lt;/td&gt;
          &lt;td&gt;ネットワーク&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;攻撃条件の複雑さ&lt;/td&gt;
          &lt;td&gt;低&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;必要な特権レベル&lt;/td&gt;
          &lt;td&gt;不要&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ユーザ関与レベル&lt;/td&gt;
          &lt;td&gt;不要&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;スコープ&lt;/td&gt;
          &lt;td&gt;変更あり&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;機密性への影響&lt;/td&gt;
          &lt;td&gt;高&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;完全性への影響&lt;/td&gt;
          &lt;td&gt;高&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;可用性への影響&lt;/td&gt;
          &lt;td&gt;高&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ただの圧縮ソフトだろ，と思うかもしれないが&lt;/p&gt;
&lt;figure&gt;
&lt;blockquote cite=&#34;https://piyolog.hatenadiary.jp/entry/2024/04/01/035321&#34;&gt;影響を受けたライブラリをリンクしているsshdを使用していた場合、liblzmaの実装が改ざんされ、任意のソフトウエアを利用できるようになり、結果として外部から不正アクセスをされる恐れがある&lt;/blockquote&gt;
&lt;figcaption&gt;&lt;div&gt;&lt;q&gt;&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2024/04/01/035321&#34;&gt;XZ Utilsの脆弱性 CVE-2024-3094 についてまとめてみた - piyolog&lt;/a&gt;&lt;/q&gt;より&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;ということで，近年話題になっているサプライチェーン攻撃としても結構ヤバい話である。
今のところ（2024-04-01 時点），対応としては影響を受けないバージョン（5.4.6など）にダウングレードするしかない。&lt;/p&gt;
&lt;p&gt;ただし，影響を受ける Linux ディストリビューションのバージョンが少ないのは不幸中の幸いだろう。
Ubuntu は，自前で最新版を入れていない限り，現在リリースされているバージョンではいずれも&lt;a href=&#34;https://ubuntu.com/security/CVE-2024-3094&#34; target=&#34;_blank&#34; title=&#34;CVE-2024-3094 | Ubuntu&#34;&gt;影響がない&lt;/a&gt;ようだ。&lt;/p&gt;
&lt;p&gt;詳しい情報は以下が参考になる。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jpcert.or.jp/newsflash/2024040101.html&#34; target=&#34;_blank&#34;&gt;XZ Utilsに悪意のあるコードが挿入された問題（CVE-2024-3094）について&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2024/04/01/035321&#34; target=&#34;_blank&#34;&gt;XZ Utilsの脆弱性 CVE-2024-3094 についてまとめてみた - piyolog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;その他，参考情報：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cisa.gov/news-events/alerts/2024/03/29/reported-supply-chain-compromise-affecting-xz-utils-data-compression-library-cve-2024-3094&#34; target=&#34;_blank&#34;&gt;Reported Supply Chain Compromise Affecting XZ Utils Data Compression Library, CVE-2024-3094 | CISA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.redhat.com/en/blog/urgent-security-alert-fedora-41-and-rawhide-users&#34; target=&#34;_blank&#34;&gt;Urgent security alert for Fedora 41 and Fedora Rawhide users&lt;/a&gt; : Red Hat&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lists.debian.org/debian-security-announce/2024/msg00057.html&#34; target=&#34;_blank&#34;&gt;[SECURITY] [DSA 5649-1] xz-utils security update&lt;/a&gt; : Debian&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gist.github.com/thesamesam/223949d5a074ebc3dce9ee78baad9e27&#34; target=&#34;_blank&#34;&gt;xz-utils backdoor situation (CVE-2024-3094) · GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/amlweems/xzbot&#34; target=&#34;_blank&#34;&gt;amlweems/xzbot: notes, honeypot, and exploit demo for the xz backdoor (CVE-2024-3094)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://research.swtch.com/xz-timeline&#34; target=&#34;_blank&#34;&gt;research!rsc: Timeline of the xz open source attack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.schneier.com/blog/archives/2024/04/xz-utils-backdoor.html&#34; target=&#34;_blank&#34;&gt;Xz Utils Backdoor - Schneier on Security&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://openjsf.org/blog/openssf-openjs-alert-social-engineering-takeovers&#34; target=&#34;_blank&#34;&gt;Open Source Security (OpenSSF) and OpenJS Foundations Issue Alert for Social Engineering Takeovers of Open Source Projects | OpenJS Foundation&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.publickey1.jp/blog/24/xz_utilsopenssfopenjs_foundations.html&#34; target=&#34;_blank&#34;&gt;XZ Utilsのインシデントを教訓に、ソーシャルエンジニアリングによるオープンソースプロジェクトの乗っ取りに関する注意喚起。OpenSSFとOpenJS Foundationsが共同で － Publickey&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://softantenna.com/blog/xz-backdoor/&#34; target=&#34;_blank&#34;&gt;広く使用されている「xz」にssh接続を突破するバックドアが仕込まれていた事が判明。重大度はクリティカルでLinuxのほかmacOSにも影響 | ソフトアンテナ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gihyo.jp/admin/clip/01/ubuntu-topics/202404/05&#34; target=&#34;_blank&#34;&gt;Ubuntu 24.04 LTS（noble）の開発 / xz-utils問題（CVE-2024-3094）への対応のためのベータ延期とMilk-Vサポート | gihyo.jp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://wired.jp/article/jia-tan-xz-backdoor/&#34; target=&#34;_blank&#34;&gt;XZ Utilsにバックドアを仕込んだ謎の人物「Jia Tan」の正体とは？ 専門家たちの推理 | WIRED.jp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ブックマーク&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://text.baldanders.info/remark/2022/08/software-bills-of-materials/&#34; target=&#34;_blank&#34;&gt;オープンソース製品とソフトウェア部品表&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://text.baldanders.info/remark/2024/04/take-over-opensource-project/&#34; target=&#34;_blank&#34;&gt;オープンソース・プロジェクトの乗っ取りを試みる&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考図書&lt;/h2&gt;
&lt;div class=&#34;hreview&#34;&gt;
  &lt;div class=&#34;photo&#34;&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/4295013498?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;&lt;img src=&#34;https://m.media-amazon.com/images/I/51Z5QFGJTFL._SL160_.jpg&#34; width=&#34;125&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;dl&gt;
    &lt;dt class=&#34;item&#34;&gt;&lt;a class=&#34;fn url&#34; href=&#34;https://www.amazon.co.jp/dp/4295013498?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;スーパーユーザーなら知っておくべきLinuxシステムの仕組み&lt;/a&gt;&lt;/dt&gt;
    &lt;dd&gt;Brian Ward (著), 柴田 芳樹 (翻訳)&lt;/dd&gt;
    &lt;dd&gt;インプレス 2022-03-08 (Release 2022-03-08)&lt;/dd&gt;
    &lt;dd&gt;単行本（ソフトカバー）&lt;/dd&gt;
    &lt;dd&gt;4295013498 (ASIN), 9784295013495 (EAN), 4295013498 (ISBN)&lt;/dd&gt;
    &lt;dd&gt;評価&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;4&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;far fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&#34;description&#34;&gt;&lt;a href=&#34;https://book.impress.co.jp/books/1121101019&#34;&gt;版元で PDF 版が買える&lt;/a&gt;。セキュリティ・エリアにも持ち込めるよう紙の本を買ったのだが，&lt;a href=&#34;https://technical-book-reading-2.connpass.com/event/272189/&#34;&gt;オンライン読書会&lt;/a&gt;が始まったので PDF 版も購入。Linux システムの扱い方に関するリファレンス本として優れている。最初に軽く流し読みして，必要に応じて該当項目を拾い読みしていけばいいだろう。&lt;/p&gt;
  &lt;p class=&#34;powered-by&#34;&gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2023-02-11&#34;&gt;2023-02-11&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;&gt;PA-APIv5&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt; &lt;!-- Linuxシステムの仕組み --&gt;
&lt;div class=&#34;hreview&#34;&gt;
  &lt;div class=&#34;photo&#34;&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/4296001574?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;&lt;img src=&#34;https://m.media-amazon.com/images/I/51anznwPz2L._SL160_.jpg&#34; width=&#34;108&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;dl&gt;
    &lt;dt class=&#34;item&#34;&gt;&lt;a class=&#34;fn url&#34; href=&#34;https://www.amazon.co.jp/dp/4296001574?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;ハッキング思考　強者はいかにしてルールを歪めるのか、それを正すにはどうしたらいいのか&lt;/a&gt;&lt;/dt&gt;
    &lt;dd&gt;ブルース・シュナイアー (著), 高橋 聡 (翻訳)&lt;/dd&gt;
    &lt;dd&gt;日経BP 2023-10-12&lt;/dd&gt;
    &lt;dd&gt;単行本&lt;/dd&gt;
    &lt;dd&gt;4296001574 (ASIN), 9784296001576 (EAN), 4296001574 (ISBN)&lt;/dd&gt;
    &lt;dd&gt;評価&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;4&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;far fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&#34;description&#34;&gt;「AI時代にルールを味方につけるには、「正しいハッキングの考え方」が必要だ」（帯の言葉より）&lt;/p&gt;
  &lt;p class=&#34;powered-by&#34;&gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2023-10-13&#34;&gt;2023-10-13&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;&gt;PA-APIv5&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt; &lt;!-- ハッキング思考 --&gt;
&lt;div class=&#34;hreview&#34;&gt;
  &lt;div class=&#34;photo&#34;&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/4822283100?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;&lt;img src=&#34;https://m.media-amazon.com/images/I/51-pZ52JsUL._SL160_.jpg&#34; width=&#34;107&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;dl&gt;
    &lt;dt class=&#34;item&#34;&gt;&lt;a class=&#34;fn url&#34; href=&#34;https://www.amazon.co.jp/dp/4822283100?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;セキュリティはなぜやぶられたのか&lt;/a&gt;&lt;/dt&gt;
    &lt;dd&gt;ブルース・シュナイアー (著), 井口 耕二 (翻訳)&lt;/dd&gt;
    &lt;dd&gt;日経BP 2007-02-15&lt;/dd&gt;
    &lt;dd&gt;単行本&lt;/dd&gt;
    &lt;dd&gt;4822283100 (ASIN), 9784822283100 (EAN), 4822283100 (ISBN)&lt;/dd&gt;
    &lt;dd&gt;評価&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;5&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&#34;description&#34;&gt;原書のタイトルが “&lt;a href=&#34;https://www.amazon.co.jp/dp/B000PY3NB4?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1&#34;&gt;Beyond Fear: Thinking Sensibly About Security in an Uncertain World&lt;/a&gt;” なのに対して日本語タイトルがどうしようもなくヘボいが中身は名著。とりあえず読んどきなはれ。ゼロ年代当時 9.11 およびその後の米国のセキュリティ政策と深く関連している内容なので，そのへんを加味して読むとよい。&lt;/p&gt;
  &lt;p class=&#34;powered-by&#34;&gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2019-02-11&#34;&gt;2019-02-11&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;&gt;PA-APIv5&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt; &lt;!-- セキュリティはなぜやぶられたのか --&gt;
</content>
	</entry><entry>
		<title>最近のセキュリティ・インシデント</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2020/09/recently-security-incidents/" />
		<id>tag:text.Baldanders.info,2020-09-11:/remark/2020/09/recently-security-incidents/</id>
		<published>2020-09-11T04:55:11+00:00</published>
		<updated>2022-05-04T05:22:29+00:00</updated>
		<summary>帰ってきた Emotet / キャッシュレス決済の脆弱性</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">&lt;p&gt;（この記事は Facebook の TL に書き散らした内容からの再構成です）&lt;/p&gt;
&lt;p&gt;言い訳すると，私はもう「エンジニア」でも「管理者」でもないので，自身に直接降りかかりそうなセキュリティ・インシデント以外は知らないふりをすることにしている（一応&lt;a href=&#34;https://text.baldanders.info/bookmarks/&#34; target=&#34;_blank&#34;&gt;ブックマークは溜め込んでる&lt;/a&gt;けど）。
でも，まぁ，最近話題の以下の2つはブログ記事として記しておこうかな，と思ったので（笑）&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;#return-emotet&#34; target=&#34;_blank&#34;&gt;帰ってきた Emotet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#docomo-account&#34; target=&#34;_blank&#34;&gt;キャッシュレス決済の脆弱性&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;return-emotet&#34;&gt;帰ってきた Emotet&lt;/h2&gt;
&lt;p&gt;Emotet は主に電子メールで媒介される「トロイの木馬」に分類される malware で，単独での拡散機能はない。&lt;/p&gt;
&lt;p&gt;日本では2019年末あたりから報告例が上がっていて，一時は沈静化していたが，2020年7月中旬から再活性化している。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ipa.go.jp/security/announce/20191202.html&#34; target=&#34;_blank&#34;&gt;「Emotet」と呼ばれるウイルスへの感染を狙うメールについて：IPA 独立行政法人 情報処理推進機構&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2019/11/26/054443&#34; target=&#34;_blank&#34;&gt;国内で相次ぐ不審メールの注意喚起と返信型Emotetについてまとめてみた - piyolog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Emotet の特徴は以下の通り。&lt;/p&gt;
&lt;figure&gt;
&lt;blockquote cite=&#34;https://blog.f-secure.com/ja/emotet-returned-from-vacation-and-is-active-again-how-to-reduce-risk-in-your-environment/&#34;&gt;&lt;q&gt;Emotet は単体で感染することは少なく、認証情報を盗み出すトロイの木馬や身代金を要求するランサムウェアと一緒に感染することが多く、標的となるEメールや連絡先などの情報を盗み出し、これらの情報を利用して、実際に交わされたEメールの内容や連絡先を悪用し、偽装したEメールを配信することで新たな被害者を標的にします。受け取ったメッセージは正規のもののように見えてしまうため、ユーザーがこのフィッシングメールを判別することは極めて困難にです。Emotetは定期的にアップデートや改変が繰り返されており、Emotet自体とコマンド＆コントロールチャネルが更新できるため、従来のアンチウイルスのシグネチャやネットワークレベルでの検知は困難です&lt;/q&gt;&lt;/blockquote&gt;
&lt;figcaption&gt;&lt;div&gt;&lt;q&gt;&lt;a href=&#34;https://blog.f-secure.com/ja/emotet-returned-from-vacation-and-is-active-again-how-to-reduce-risk-in-your-environment/&#34;&gt;活動を休止していたEmotetが再び活発に – 感染リスクを軽減するためには - F-Secure&lt;/a&gt;&lt;/q&gt;より&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;つまり Emotet 侵入は「第一段階」に過ぎず，次段階の内部情報の窃盗や ransomware を使った脅迫行為に向けた情報収集に使われているようだ。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2019/11/29/082315&#34; target=&#34;_blank&#34;&gt;標的型ランサムウェア被害企業が1年以上前からEmotetに感染していた可能性についてまとめてみた - piyolog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;なので Emotet を検出しても，それを「除去して終わり」とはならず，内部システムの徹底的な洗い出しや情報漏洩の可能性の検討等の面倒くさい作業が待っているわけだ。&lt;/p&gt;
&lt;p&gt;Emotet 特効の防御策はないが，電子メールを媒介とすることから，通常の phishing 対策の徹底が重要となる。&lt;/p&gt;
&lt;figure&gt;
&lt;blockquote cite=&#34;https://www.ipa.go.jp/security/announce/20191202.html&#34;&gt;&lt;ul&gt;
&lt;li&gt;身に覚えのないメールの添付ファイルは開かない。メール本文中のURLリンクはクリックしない。&lt;/li&gt;
&lt;li&gt;自分が送信したメールへの返信に見えるメールであっても、不自然な点があれば添付ファイルは開かない。&lt;/li&gt;
&lt;li&gt;OSやアプリケーション、セキュリティソフトを常に最新の状態にする。&lt;/li&gt;
&lt;li&gt;信頼できないメールに添付されたWord文書やExcelファイルを開いた時に、マクロやセキュリティに関する警告が表示された場合、「マクロを有効にする」「コンテンツの有効化」というボタンはクリックしない。&lt;/li&gt;
&lt;li&gt;メールや文書ファイルの閲覧中、身に覚えのない警告ウインドウが表示された際、その警告の意味が分からない場合は、操作を中断する。&lt;/li&gt;
&lt;li&gt;身に覚えのないメールや添付ファイルを開いてしまった場合は、すぐにシステム管理部門等へ連絡する。&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;&lt;div&gt;&lt;q&gt;&lt;a href=&#34;https://www.ipa.go.jp/security/announce/20191202.html&#34;&gt;「Emotet」と呼ばれるウイルスへの感染を狙うメールについて&lt;/a&gt;&lt;/q&gt;より&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;最近の事例として面白いのは「パスワード付き zip ファイル」をパスワードと共に添付して送るタイプである。&lt;/p&gt;
&lt;figure&gt;
&lt;blockquote class=&#34;nobox lightmode&#34; style=&#39;margin:0 auto;text-align:center;&#39; cite=&#34;https://www.ipa.go.jp/security/announce/20191202.html#L13&#34;&gt;
&lt;a href=&#34;https://www.ipa.go.jp/security/announce/20191202.html#L13&#34;&gt;&lt;img src=&#34;./000085326.png&#34; srcset=&#34;./000085326.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;「Emotet」と呼ばれるウイルスへの感染を狙うメールについて&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;&lt;div&gt;&lt;q&gt;&lt;a href=&#34;https://www.ipa.go.jp/security/announce/20191202.html#L13&#34;&gt;「Emotet」と呼ばれるウイルスへの感染を狙うメールについて&lt;/a&gt;&lt;/q&gt;より&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;通常の添付ファイルは（企業・組織によっては）メールサーバ到達時点で拒否されることがあるため「パスワード付き zip ファイル」が使われるのだろうが，これが見事に日本の特殊商慣行というか奇習にマッチしているようで，9月に入ってから Emotet の侵入報告が激増しているらしい（笑）&lt;/p&gt;
&lt;p&gt;個人的には（少なくともビジネス・シーンでは）メールにファイルを添付して送るのは今や「悪習」だと思う。
ファイルの共有を行いたいのであれば Google drive や Box, Dropbox などのストレージ・サービスを活用すべきだろう。
かといって Firefox Send のような&lt;a href=&#34;https://text.baldanders.info/remark/2020/07/requirement-for-encryption/&#34; target=&#34;_blank&#34; title=&#34;経路の暗号化とデータの暗号化では要件が異なる&#34;&gt;認証を omit した仕組み&lt;/a&gt;では却ってリスクが増すけれど。&lt;/p&gt;
&lt;h2 id=&#34;docomo-account&#34;&gt;キャッシュレス決済の脆弱性&lt;/h2&gt;
&lt;p&gt;私もどうしても「どこもろざ」と読んでしまう。
そもそも「銀行口座」を連想させるようなネーミングからして失敗だよな（笑）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2020/09/08/054431&#34; target=&#34;_blank&#34;&gt;ドコモ口座を悪用した不正送金についてまとめてみた - piyolog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Twitter の TL を眺めるに，「docomo 利用者以外は関係ない」と思っている人が意外に多そうだ。
関係ないからね。
上のリンク先の記事に挙がっている銀行の口座を持っている人は，一度は残高履歴を確認することを強くお勧めする。&lt;/p&gt;
&lt;p&gt;「&lt;a href=&#34;https://docomokouza.jp/&#34; target=&#34;_blank&#34;&gt;ドコモ口座&lt;/a&gt;」は最近流行りの「キャッシュレス決済」サービスのひとつである。&lt;/p&gt;
&lt;p&gt;いわゆる「キャッシュレス決済」の市場は既に飽和していて「パイの食い合い」状態になっている。
これに拍車をかけるのが政府主導の「&lt;a href=&#34;https://mynumbercard.point.soumu.go.jp/&#34; target=&#34;_blank&#34;&gt;マイナポイント&lt;/a&gt;」で，ぶっちゃけ非常にウザい。&lt;/p&gt;
&lt;p&gt;キャリア系の決済サービスの強みは回線契約自体が利用者の「信用」を担保することだったと思うが，サービス対象者を不特定に拡大してしまったために「信用」の構造が変わってしまったのが今回のポイントのひとつだろう。&lt;/p&gt;
&lt;p&gt;もうひとつはチャージに「&lt;a href=&#34;https://www.chigin-cns.co.jp/services/web_service/&#34; target=&#34;_blank&#34; title=&#34;Web口振受付サービス｜地銀ネットワークサービス&#34;&gt;Web 口振受付サービス&lt;/a&gt;」を使っていること。&lt;/p&gt;
&lt;figure&gt;
&lt;blockquote class=&#34;nobox lightmode&#34; style=&#39;margin:0 auto;text-align:center;&#39; cite=&#34;https://piyolog.hatenadiary.jp/entry/2020/09/08/054431&#34;&gt;
&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2020/09/08/054431&#34;&gt;&lt;img src=&#34;./20200908053844.png&#34; srcset=&#34;./20200908053844.png 696w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;ドコモ口座を悪用した不正送金についてまとめてみた&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;&lt;div&gt;&lt;q&gt;&lt;a href=&#34;https://piyolog.hatenadiary.jp/entry/2020/09/08/054431&#34;&gt;ドコモ口座を悪用した不正送金についてまとめてみた&lt;/a&gt;&lt;/q&gt;より&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt;これは結構ヤバい仕組みだ。&lt;/p&gt;
&lt;p&gt;邪推だが「ドコモ口座」では「口座振替」が同一ユーザ内で完結するから問題ないと思ったのだろう。
しかし，実際には「ドコモ口座」ユーザが「誰か分からない」のだから，この前提は成り立たない。&lt;/p&gt;
&lt;p&gt;まぁ「ドコモ口座」は 2020-09-10 までに全ての銀行口座登録・変更機能を停止したそうで，遅きに失したとはいえ，措置としては妥当だろう。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docomokouza.jp/maintenance/info_20200910.html&#34; target=&#34;_blank&#34;&gt;銀行口座登録の申込受付停止および一部銀行のチャージ停止について&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;「ドコモ口座」では&lt;a href=&#34;https://www.nttdocomo.co.jp/info/news_release/detail/20200909_00_m.html&#34; target=&#34;_blank&#34; title=&#34;ドコモ口座への銀行口座の新規登録における対策強化について&#34;&gt;「本人確認」を強化すると言っている&lt;/a&gt;が「本人確認書類」の詐取はいくらでもあり得るのだから，オンラインでの（完全な）身元確認は無理と考えたほうがいい。
むしろ「オンラインでの身元確認は無理」という前提で，どのようにサービスを設計するかが重要だろう。&lt;/p&gt;
&lt;p&gt;あと，いまどき &lt;a href=&#34;https://techcrunch.com/2016/07/25/nist-declares-the-age-of-sms-based-2-factor-authentication-over/&#34; target=&#34;_blank&#34; title=&#34;SMSを使った二要素認証を非推奨〜禁止へ、米国立技術規格研究所NISTの新ガイダンス案 | TechCrunch Japan&#34;&gt;SMS 認証はヤメロ&lt;/a&gt;！ やる気あんのか？&lt;/p&gt;
&lt;p&gt;これ，今回はたまたま「ドコモ口座」だっただけで，似たようなことをやらかしてる「キャッシュレス決済」サービスは結構あるんじゃないの？ 今回のインシデントを通じてきちんとリスク・アセスメントを行い，必要なら法規制をかけないと。
野放図にやりたい放題やる季節は（&lt;a href=&#34;https://text.baldanders.info/remark/2019/07/7id-risk/&#34; target=&#34;_blank&#34; title=&#34;7iD リスク&#34;&gt;7pay 崩壊&lt;/a&gt;とともに）終わってるのよ。&lt;/p&gt;
&lt;p&gt;また，この手の犯罪は必ず模倣者が出る。
しばらくは残高履歴をこまめにチェックしたほうがいいだろう。&lt;/p&gt;
&lt;h3&gt;【2020-09-12 追記】 暗証番号を認証に使ってはいけない&lt;/h3&gt;
&lt;p&gt;Twitter で見かけたが某国営放送風テレビが「暗証番号を定期的に変える」とか馬鹿すぎることを言ってるらしい。
誰がそんな頭の悪いことを言い始めたのやら&amp;hellip; sigh&lt;/p&gt;
&lt;p&gt;言うまでもないことだと思っていたが改めて言わせてもらうと，暗証番号や PIN コードは認証（authentication）には使えない。
これらのコードは数字4桁から6桁で構成されている。
このサイズの数字列を総当り方式で解読しても，かかるコストは1円未満しかならない。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th colspan=&#39;4&#39;&gt;利用する文字種類数と内訳&lt;/th&gt;
&lt;th colspan=&#39;4&#39;&gt;パスワード長&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th&gt;種類数&lt;/th&gt;
&lt;th&gt;数字&lt;/th&gt;
&lt;th&gt;文字&lt;/th&gt;
&lt;th&gt;シンボル&lt;/th&gt;
&lt;th&gt;4文字&lt;/th&gt;
&lt;th&gt;8文字&lt;/th&gt;
&lt;th&gt;12文字&lt;/th&gt;
&lt;th&gt;16文字&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;10種&lt;/td&gt;&lt;td&gt;0-9&lt;/td&gt;&lt;td&gt;なし&lt;/td&gt;&lt;td&gt;なし&lt;/td&gt;&lt;td&gt;1円未満&lt;br&gt;（$2^{13.3}$）&lt;/td&gt;&lt;td&gt;1円未満&lt;br&gt;（$2^{26.6}$）&lt;/td&gt;&lt;td&gt;約35円&lt;br&gt;（$2^{39.9}$）&lt;/td&gt;&lt;td&gt;約35万円&lt;br&gt;（$2^{53.2}$）&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;36種&lt;/td&gt;&lt;td&gt;0-9&lt;/td&gt;&lt;td&gt;a-z&lt;/td&gt;&lt;td&gt;なし&lt;/td&gt;&lt;td&gt;1円未満&lt;br&gt;（$2^{20.7}$）&lt;/td&gt;&lt;td&gt;約100円&lt;br&gt;（$2^{41.4}$）&lt;/td&gt;&lt;td&gt;約1.65億円&lt;br&gt;（$2^{62.0}$）&lt;/td&gt;&lt;td&gt;約276兆円&lt;br&gt;（$2^{82.7}$）&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;62種&lt;/td&gt;&lt;td&gt;0-9&lt;/td&gt;&lt;td&gt;a-z&lt;br&gt;A-Z&lt;/td&gt;&lt;td&gt;なし&lt;/td&gt;&lt;td&gt;1円未満&lt;br&gt;（$2^{23.8}$）&lt;/td&gt;&lt;td&gt;約7,500円&lt;br&gt;（$2^{47.6}$）&lt;/td&gt;&lt;td&gt;約1,120億円&lt;br&gt;（$2^{71.5}$）&lt;/td&gt;&lt;td&gt;約165京円&lt;br&gt;（$2^{95.3}$）&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;94種&lt;/td&gt;&lt;td&gt;0-9&lt;/td&gt;&lt;td&gt;a-z&lt;br&gt;A-Z&lt;/td&gt;
	&lt;td&gt;&lt;code style=&#39;font-size:smaller;&#39;&gt;! &#34; # $ %&lt;br&gt;&amp;amp; &#39; ( ) =&lt;br&gt;~ | - ^ `&lt;br&gt;¥ { @ [&lt;br&gt;+ * ] ; :&lt;br&gt;} &amp;lt; &amp;gt; ? _&lt;br&gt;, . /&lt;/code&gt;&lt;/td&gt;
    &lt;td&gt;1円未満&lt;br&gt;（$2^{26.2}$）&lt;/td&gt;&lt;td&gt;約21万円&lt;br&gt;（$2^{52.4}$）&lt;/td&gt;&lt;td&gt;約16.5兆円&lt;br&gt;（$2^{78.7}$）&lt;/td&gt;&lt;br&gt;&lt;td&gt;約129,000京円&lt;br&gt;（$2^{104.9}$）&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;figcaption&gt;&lt;div&gt;パスワード解読の想定コスト例（&lt;q&gt;&lt;a href=&#39;https://www.ipa.go.jp/files/000026760.pdf&#39;&gt;情報漏えいを防ぐためのモバイルデバイス等設定マニュアル 解説編 &lt;sup&gt;&lt;i class=&#39;far fa-file-pdf&#39;&gt;&lt;/i&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/q&gt; 2.4.2.2項より）&lt;/div&gt;&lt;/figcaption&gt;
&lt;/figure&gt; &lt;!-- 要 MathJax --&gt;&lt;/p&gt;
&lt;p&gt;たとえば &lt;a href=&#34;https://tools.ietf.org/html/rfc6238&#34; target=&#34;_blank&#34; title=&#34;RFC 6238 - TOTP: Time-Based One-Time Password Algorithm&#34;&gt;TOTP (Time-based One-time Password)&lt;/a&gt; 認証では6桁の数字列を使うが，生存期間は30秒程度で，つまりその程度の信頼性しかないのだ。&lt;/p&gt;
&lt;p&gt;じゃあ，永続的な暗証番号や PIN コードが何に使われるのかというと，デバイスやアプリの「アンロック」に使われる。
この場合，暗証番号や PIN コードはユーザと（手元の）デバイスの間でのみ共有されていればいいので，（アカウントのロックアウトも組み合わせれば）セキュリティ要件はかなり緩くできる。&lt;/p&gt;
&lt;p&gt;しかし，暗証番号を「&lt;a href=&#34;https://www.chigin-cns.co.jp/services/web_service/&#34; target=&#34;_blank&#34; title=&#34;Web口振受付サービス｜地銀ネットワークサービス&#34;&gt;Web 口振受付サービス&lt;/a&gt;」のようなリモートサービスの認証で使うとなると話は変わってくる。
そもそも銀行側が「キャッシュカードの暗証番号を保持ってる」こと自体が問題だと思うが&amp;hellip;&lt;/p&gt;
&lt;p&gt;そういえば，どっかの&lt;a href=&#34;https://baldanders.info/spiegel/log/nikki-s/200206.html#2303&#34; target=&#34;_blank&#34; title=&#34;せち日記 - 2002年06月分&#34;&gt;説教番組&lt;/a&gt;が「SIM の PIN コードは変更したほうが安全」とか馬鹿なことを言ったそうで，実際に試した人のトラブルが続出したらしい（笑） 暗証番号や PIN コードは頻繁に変更するように考えられてないし，もし「頻繁に変更」が必要だと言うのなら，そのサービスやシステムは完全に失敗作である。&lt;/p&gt;
&lt;p&gt;あっ，でも，最近は警察や銀行関係者を装って，キャッシュカードや暗証番号を詐取する詐欺が流行ってるらしい。
詐欺に引っかからないのが一番だが，万一の事後処理として「暗証番号を変更する方法」は確認しておいたほうがいいだろう。&lt;/p&gt;
&lt;h2&gt;ブックマーク&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://japan.zdnet.com/article/35159322/&#34; target=&#34;_blank&#34;&gt;日本医師会、マルウェア「Emotet」の感染を公表&amp;ndash;感染拡散メールに注意喚起 - ZDNet Japan&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://unit42.paloaltonetworks.jp/emotet-thread-hijacking/&#34; target=&#34;_blank&#34;&gt;Emotetのメール攻撃手法「スレッドハイジャック」のケーススタディ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://japan.zdnet.com/article/35161046/&#34; target=&#34;_blank&#34;&gt;マルウェア「Emotet」が「Office」アップデートを装う新たな手口 - ZDNet Japan&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://text.baldanders.info/remark/2020/09/web-account-transfer/&#34; target=&#34;_blank&#34;&gt;「Web 口振受付サービス」ってなんぞ？&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考図書&lt;/h2&gt;
&lt;div class=&#34;hreview&#34;&gt;
  &lt;div class=&#34;photo&#34;&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/4822283100?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;&lt;img src=&#34;https://m.media-amazon.com/images/I/51-pZ52JsUL._SL160_.jpg&#34; width=&#34;107&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;dl&gt;
    &lt;dt class=&#34;item&#34;&gt;&lt;a class=&#34;fn url&#34; href=&#34;https://www.amazon.co.jp/dp/4822283100?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;セキュリティはなぜやぶられたのか&lt;/a&gt;&lt;/dt&gt;
    &lt;dd&gt;ブルース・シュナイアー (著), 井口 耕二 (翻訳)&lt;/dd&gt;
    &lt;dd&gt;日経BP 2007-02-15&lt;/dd&gt;
    &lt;dd&gt;単行本&lt;/dd&gt;
    &lt;dd&gt;4822283100 (ASIN), 9784822283100 (EAN), 4822283100 (ISBN)&lt;/dd&gt;
    &lt;dd&gt;評価&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;5&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&#34;description&#34;&gt;原書のタイトルが “&lt;a href=&#34;https://www.amazon.co.jp/dp/B000PY3NB4?tag=baldandersinf-22&amp;linkCode=ogi&amp;th=1&amp;psc=1&#34;&gt;Beyond Fear: Thinking Sensibly About Security in an Uncertain World&lt;/a&gt;” なのに対して日本語タイトルがどうしようもなくヘボいが中身は名著。とりあえず読んどきなはれ。ゼロ年代当時 9.11 およびその後の米国のセキュリティ政策と深く関連している内容なので，そのへんを加味して読むとよい。&lt;/p&gt;
  &lt;p class=&#34;powered-by&#34;&gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2019-02-11&#34;&gt;2019-02-11&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;&gt;PA-APIv5&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt; &lt;!-- セキュリティはなぜやぶられたのか --&gt;
&lt;div class=&#34;hreview&#34;&gt;
  &lt;div class=&#34;photo&#34;&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/4757143044?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;&lt;img src=&#34;https://m.media-amazon.com/images/I/413qoSjODUL._SL160_.jpg&#34; width=&#34;108&#34; alt=&#34;photo&#34;&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;dl&gt;
    &lt;dt class=&#34;item&#34;&gt;&lt;a class=&#34;fn url&#34; href=&#34;https://www.amazon.co.jp/dp/4757143044?tag=baldandersinf-22&amp;amp;linkCode=ogi&amp;amp;th=1&amp;amp;psc=1&#34;&gt;信頼と裏切りの社会&lt;/a&gt;&lt;/dt&gt;
    &lt;dd&gt;ブルース・シュナイアー (著), 山形 浩生 (翻訳)&lt;/dd&gt;
    &lt;dd&gt;NTT出版 2013-12-24&lt;/dd&gt;
    &lt;dd&gt;単行本（ソフトカバー）&lt;/dd&gt;
    &lt;dd&gt;4757143044 (ASIN), 9784757143043 (EAN), 4757143044 (ISBN)&lt;/dd&gt;
    &lt;dd&gt;評価&lt;abbr class=&#34;rating fa-sm&#34; title=&#34;5&#34;&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&amp;nbsp;&lt;i class=&#34;fas fa-star&#34;&gt;&lt;/i&gt;&lt;/abbr&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&#34;description&#34;&gt;社会における「信頼」とは。&lt;/p&gt;
  &lt;p class=&#34;powered-by&#34;&gt;reviewed by &lt;a href=&#39;#maker&#39; class=&#39;reviewer&#39;&gt;Spiegel&lt;/a&gt; on &lt;abbr class=&#34;dtreviewed&#34; title=&#34;2015-11-28&#34;&gt;2015-11-28&lt;/abbr&gt; (powered by &lt;a href=&#34;https://affiliate.amazon.co.jp/assoc_credentials/home&#34;&gt;PA-APIv5&lt;/a&gt;)&lt;/p&gt;
&lt;/div&gt; &lt;!-- 信頼と裏切りの社会 --&gt;
</content>
	</entry><entry>
		<title>Ununtu に ClamAV を導入する</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2019/05/clamav-for-ubuntu/" />
		<id>tag:text.Baldanders.info,2019-05-06:/remark/2019/05/clamav-for-ubuntu/</id>
		<published>2019-05-06T08:39:20+00:00</published>
		<updated>2019-07-25T13:49:55+00:00</updated>
		<summary>こんなに面倒臭いとは思わなかった。もうしばらく運用してから評価してみるですよ。</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">&lt;p&gt;&lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; を &lt;a href=&#34;https://www.ubuntu.com/&#34; target=&#34;_blank&#34; title=&#34;The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu&#34;&gt;Ubuntu&lt;/a&gt; に導入したのだが，思いのほか面倒臭かったので，覚え書きとして記しておく。&lt;/p&gt;
&lt;h2&gt;&lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; をインストールする&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; のインストール自体は APT (Advanced Package Tool) で簡単にできる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo apt install clamav clamav-daemon
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;なお &lt;code&gt;clamav-daemon&lt;/code&gt; は &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; をサービス化するためのパッケージである。&lt;/p&gt;
&lt;p&gt;現時点（2019年5月）で &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; の最新は 0.101.x なのだが APT で提供されているバージョンは 0.100.x の古いバージョンのようだ。
一応，以下の脆弱性への対応はしてあるみたいだが&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.clamav.net/2019/03/clamav-01012-and-01003-patches-have.html&#34; target=&#34;_blank&#34;&gt;ClamAV® blog: ClamAV 0.101.2 and 0.100.3 patches have been released!&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;このバージョンの古さは後々に影響を及ぼすかもしれない。
Debian には最新の&lt;a href=&#34;https://packages.debian.org/source/unstable/clamav&#34; target=&#34;_blank&#34;&gt;ソースパッケージがある&lt;/a&gt;ようだが，セキュリティ製品だしソースコードからビルドするのは流石に&amp;hellip;&lt;/p&gt;
&lt;h2&gt;データベースを更新する&lt;/h2&gt;
&lt;p&gt;まずは手動でデータベースを更新する。&lt;/p&gt;
&lt;p&gt;設定ファイル &lt;code&gt;/etc/clamav/freshclam.conf&lt;/code&gt; から &lt;code&gt;NotifyClamd&lt;/code&gt; の行をコメントアウトした上で &lt;code&gt;freshclam&lt;/code&gt; コマンドを実行する。
コマンドラインで書くとこんな感じ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl stop clamav-freshclam
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo sed -i -e &amp;#34;s/^NotifyClamd/#NotifyClamd/g&amp;#34; /etc/clamav/freshclam.conf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo freshclam
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; ClamAV update process started at Sun May  5 13:36:34 2019
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; ^Your ClamAV installation is OUTDATED!
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; ^Local version: 0.100.3 Recommended version: 0.101.2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; DON&amp;#39;T PANIC! Read https://www.clamav.net/documents/upgrading-clamav
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; main.cvd is up to date (version: 58, sigs: 4566249, f-level: 60, builder: sigmgr)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; daily.cvd is up to date (version: 25439, sigs: 1562310, f-level: 63, builder: raynman)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sun May  5 13:36:34 2019 -&amp;gt; bytecode.cvd is up to date (version: 328, sigs: 94, f-level: 63, builder: neo)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo sed -i -e &amp;#34;s/^#NotifyClamd/NotifyClamd/g&amp;#34; /etc/clamav/freshclam.conf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl start clamav-freshclam
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;データベースの更新自体はうまく行ってるようだが &lt;code&gt;OUTDATED&lt;/code&gt; とか言われてるよ &lt;code&gt;orz&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&amp;hellip;見なかったことにしよう。&lt;/p&gt;
&lt;p&gt;なお &lt;code&gt;clamav-freshclam.service&lt;/code&gt; の状態を確認するには以下のコマンドを起動すればよい。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl status clamav-freshclam.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;手動で動作確認&lt;/h2&gt;
&lt;p&gt;Malware 対策ソフト用の無害なウイルス（笑）があるので，これを使って &lt;code&gt;clamscan&lt;/code&gt; コマンドで動作確認する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl http://www.eicar.org/download/eicar.com -O
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ clamscan --infected --remove ./eicar.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./eicar.com: Eicar-Test-Signature FOUND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./eicar.com: Removed.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;----------- SCAN SUMMARY -----------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Known viruses: 6120222
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Engine version: 0.100.3
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Scanned directories: 0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Scanned files: 1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Infected files: 1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Data scanned: 0.00 MB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Data read: 0.00 MB (ratio 0.00:1)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 20.181 sec (0 m 20 s)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;よーし，うむうむ，よーし。&lt;/p&gt;
&lt;h2&gt;Scan On-Access の設定&lt;/h2&gt;
&lt;p&gt;ファイルアクセスへの常時監視を行う Scan On-Access を有効にするために &lt;code&gt;/etc/clamav/clamd.conf&lt;/code&gt; ファイルを修正する。
本当は &lt;code&gt;ScanOnAccess&lt;/code&gt; を &lt;code&gt;true&lt;/code&gt; にするだけでいい筈なのだが&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;，以下のコマンドで&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo systemctl status clamav-daemon.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;サービスの状態を確認すると以下のログを吐いて停止していた。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ERROR: ScanOnAccess: fanotify_init failed: Operation not permitted
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ScanOnAccess: clamd must be started by root
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;/etc/clamav/clamd.conf&lt;/code&gt; ファイルの他の部分にも手を入れる必要があるようだ。
以下に変更・追記が必要な項目を挙げておく。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line hl&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LocalSocketGroup root
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line hl&#34;&gt;&lt;span class=&#34;cl&#34;&gt;User root
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line hl&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ScanOnAccess true
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;OnAccessMountPath /home/username
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;OnAccessExcludePath /home/username/nocheck
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# VirusEvent /usr/local/bin/clamd-response
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;OnAccessPrevention false
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;OnAccessExtraScanning true
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;OnAccessExcludeUID 0&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最初の3行が変更が必要な項目，以降が追加項目である。
&lt;code&gt;OnAccessMountPath&lt;/code&gt; でスキャン対象のディレクトリを &lt;code&gt;OnAccessExcludePath&lt;/code&gt; で除外対象を指定する。
どちらも複数指定できる。&lt;/p&gt;
&lt;h3&gt;VirusEvent が効かない！？&lt;/h3&gt;
&lt;p&gt;上の設定で &lt;code&gt;VirusEvent&lt;/code&gt; をコメントアウトしているが，どうやら 0.100 では Scan On-Access を有効にしても &lt;code&gt;VirusEvent&lt;/code&gt; の設定が効かないようなのだ（0.101 はどうなんだろう）。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;VirusEvent&lt;/code&gt; には malware を発見した際に起動するコマンドを指定するのだが，これが動かないってかなり致命的じゃないのか？&lt;/p&gt;
&lt;p&gt;次善の策として以下のスクリプトを書いて cron で回すことにした。
Malware を検出すれば画面に通知が表示されるはずである。
cron で回してるだけなのでタイムラグが発生する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;logfile&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/home/username/.local/log/clamd-found.log&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; -r &lt;span class=&#34;nv&#34;&gt;$logfile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nv&#34;&gt;PRV_CNT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;cat &lt;span class=&#34;nv&#34;&gt;$logfile&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; wc -l&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nv&#34;&gt;PRV_CNT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;CNT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;grep ScanOnAccess /var/log/syslog &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep FOUND &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep -v &lt;span class=&#34;s2&#34;&gt;&amp;#34;(null)&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tee &lt;span class=&#34;nv&#34;&gt;$logfile&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; wc -l&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$CNT&lt;/span&gt; !&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$PRV_CNT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nv&#34;&gt;DATESTR&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;date&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  sudo -u username &lt;span class=&#34;nv&#34;&gt;DISPLAY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:0 &lt;span class=&#34;nv&#34;&gt;DBUS_SESSION_BUS_ADDRESS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;unix:path&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/run/user/1000/bus /usr/bin/notify-send -t &lt;span class=&#34;m&#34;&gt;10000&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$DATESTR&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; Virus Found &lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$CNT&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ダサいけどしょうがない。
ちなみに &lt;code&gt;username&lt;/code&gt; の部分には cron を回すログインユーザ名を， &lt;code&gt;1000&lt;/code&gt; の部分にはそのユーザ ID をセットする&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;h2&gt;もう一度，動作確認&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;clamav-daemon.service&lt;/code&gt; がうまく機能するか試してみよう。&lt;/p&gt;
&lt;p&gt;先ほどの無害なウイルス（笑）をダウンロードする。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl http://www.eicar.org/download/eicar.com -O
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;これでログ等を見て検知しているか確認する（上の通知も出れば完璧）。
確認できたらとっとと削除すること。&lt;/p&gt;
&lt;p&gt;今回は &lt;code&gt;clamdscan&lt;/code&gt; のほうを使ってみよう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ clamdscan --infected --remove ./eicar.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/home/username/work/./eicar.com: Eicar-Test-Signature FOUND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/home/username/work/./eicar.com: Removed.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;----------- SCAN SUMMARY -----------
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Infected files: 1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 0.365 sec (0 m 0 s)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;圧倒的に速くなった。
まぁ，バックグラウンドにサービスがいるんだから当たり前だが（笑）&lt;/p&gt;
&lt;h2&gt;Thunderbird と連携したかったが&amp;hellip;&lt;/h2&gt;
&lt;p&gt;MUA である Thunderbird と連携できるアドオンがあると聞いたのだが&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://addons.thunderbird.net/ja/thunderbird/addon/clamdrib-lin/&#34; target=&#34;_blank&#34;&gt;clamdrib LIN :: Thunderbird 向けアドオン&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;うまくインストールできない。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://addons.thunderbird.net/ja/thunderbird/addon/clamdrib-lin/&#34; target=&#34;_blank&#34; title=&#34;clamdrib LIN :: Thunderbird 向けアドオン&#34;&gt;clamdrib LIN&lt;/a&gt; の最新バージョンは2017年のもので最近のバージョン 60 以降には対応してないっぽい（互換性チェック回避のオプションも試したがうまく行かなかった）。
諦めるしかないようだ。&lt;/p&gt;
&lt;p&gt;こんなんばっかだな ＞ &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;「ウイルス対策ソフト」は必要か？&lt;/h2&gt;
&lt;p&gt;なんだか知らないが「Linux にウイルス対策ソフトは必要か？」などという頭の悪い議論があるそうで，しかも「必要ない」という人の主張は「Linux ユーザは Windows や macOS に比べて規模が小さいから狙われにくい」という，これまた頭が悪いとしか言いようがないものらしい。&lt;/p&gt;
&lt;p&gt;「ウイルス」という表現は古臭くて的を得ていないので，この記事では色々ひっくるめて malware (malicious software) という表現に統一させてもらうが，ぶっちゃけて言うなら使っている OS にかかわらず「&lt;strong&gt;ユーザレベルでは malware 対策はセキュリティ管理の中核ではない&lt;/strong&gt;」というのが多分正しい。&lt;/p&gt;
&lt;p&gt;じゃあ malware 対策は必要ないのかと言えば「さにあらず」で，しかしそういったものは外部化され不可視になっている。
今どきの言葉で言うなら “Security as a Service” とでもいうような状況である。
そしてそのプラットフォーム OS として Linux 等のセキュリティ要件はむしろ高まっていると言えるだろう。
今回 &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; を触ってみて感じたことだが，一般ユーザにとって &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; がちょっと残念な感じになっているのはサーバ用途に最適化されつつあるからではないかと思うのだ。&lt;/p&gt;
&lt;p&gt;セキュリティのトレンドは「防衛」中心から「監視」中心にシフトしていて，単純に malware をバラ撒いただけではすぐに検知され対策されてしまう。
故に攻撃側も時間をかけてでも密やかに確実にターゲットを追い詰める social engineering を駆使した各種ターゲティング攻撃へとシフトしている。&lt;/p&gt;
&lt;p&gt;Phishing メールやそれに含まれる malware 検知などはサービスプロバイダが（有料のものも含めて）やってくれるし， Web についても Phishing サイトやマイニング・コード等を含んだサイトはブラウザレベルでかなりいい感じにブロックできるようになりつつある&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;。
そういう意味で私にとって malware 対策ソフトは「うっかり転んだときのための少額保険」みたいなもので，それ以外ではあまり出しゃばって欲しくなかったりする。&lt;/p&gt;
&lt;p&gt;実際にそれまで使ってた Windows 7 でも “Microsoft Security Essentials” で必要十分な性能だったし &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; でも同程度の性能を満たしていれば，今回はそれでよかったのだ。
それがこんなに面倒臭いとは思わなかった。&lt;/p&gt;
&lt;p&gt;かといって malware 対策ソフトそのものに金銭は払いたくないし&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;，もうしばらく運用してから評価してみるですよ。&lt;/p&gt;
&lt;h2&gt;ブックマーク&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.tecmint.com/best-antivirus-programs-for-linux/&#34; target=&#34;_blank&#34;&gt;The 8 Best Free Anti-Virus Programs for Linux&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://news.mynavi.jp/article/20170420-a074/&#34; target=&#34;_blank&#34;&gt;Linux向けアンチウイルスソフト8選 | マイナビニュース&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://clamav-jp.osdn.jp/jdoc/clamav.html&#34; target=&#34;_blank&#34;&gt;Clam Antivirusに関するメモ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://help.ubuntu.com/community/ClamAV&#34; target=&#34;_blank&#34;&gt;ClamAV - Community Help Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://hnakamur.github.io/blog/2018/05/21/setup-clamav-on-ubuntu-mate-18.04-lts/&#34; target=&#34;_blank&#34;&gt;ClamAVをUbuntu MATE 18.04 LTSにセットアップ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://lab4ict.com/system/archives/934&#34; target=&#34;_blank&#34;&gt;Ubuntu 18.04 LTS DesktopでClamAVによるウィルスチェックを実行 – LAB4ICT&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://wiki.archlinux.org/index.php/ClamAV&#34; target=&#34;_blank&#34;&gt;ClamAV - ArchWiki&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.sophos.com/en-us/products/free-tools/sophos-antivirus-for-linux.aspx&#34; target=&#34;_blank&#34;&gt;Free Linux Malware Scanner | Lightweight Agent for Linux Malware Detection and Removal | Sophos&lt;/a&gt; : &lt;a href=&#34;https://www.clamav.net/&#34; target=&#34;_blank&#34; title=&#34;ClamavNet&#34;&gt;ClamAV&lt;/a&gt; がダメそうならこっちにする（笑）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://qiita.com/gano/items/802519add83c524e3019&#34; target=&#34;_blank&#34;&gt;Ubuntu16.04(さくらVPS)で１からcronの設定をし、pythonプログラムを定期実行する - Qiita&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;サービスのリスタートには &lt;code&gt;sudo systemctl restart clamav-daemon.service&lt;/code&gt; とすればよい。&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;ユーザ ID が分からない場合は &lt;code&gt;id username&lt;/code&gt; とコマンドを打てば分かるだろう。&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:3&#34;&gt;
&lt;p&gt;はっきり言ってフェイク・ニュースなんかより Phishing ページなどセキュリティ・リスクの高いコンテンツに対する監視の方にもっとリソースを割いてほしいのだけど。かといって中間車攻撃で暗号通信を覗き見るなんてのは論外だが。&amp;#160;&lt;a href=&#34;#fnref:3&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:4&#34;&gt;
&lt;p&gt;Android 端末には &lt;a href=&#34;https://www.f-secure.com/en/home/products/freedome&#34; target=&#34;_blank&#34;&gt;F-Secure 社の FREEDOME&lt;/a&gt; を入れている。 FREEDOME 自体は VPN ソフトだが malware 対策機能も付いていて追跡コードもある程度ブロックしてくれる優れもの。実はこれの Linux 版があれば買ってもよかったのだがなかったのだ。仮想ネットワークについては I2P を試してみるか，と思っていたりする。&amp;#160;&lt;a href=&#34;#fnref:4&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
</feed>
