<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:cc="http://web.resource.org/cc/">
	<title>Lua - text.Baldanders.info</title>
	<link rel="alternate" type="text/html" href="http://text.baldanders.info/tags/lua/" />
	<link rel="self" type="application/atom+xml" href="http://text.baldanders.info/tags/lua/index.xml" />
	<id>tag:text.Baldanders.info,2017-10-10:/tags</id>
	<updated>2017-10-10T18:02:56+09:00</updated>
	<subtitle>帰ってきた「しっぽのさきっちょ」</subtitle>
	<icon>http://text.baldanders.info//images/avatar.jpg</icon>
	<logo>http://text.baldanders.info//images/avatar.jpg</logo>
	<generator uri="https://gohugo.io/">Hugo 0.29</generator>

	
	<entry>
		<title>Glide から Dep への移行を検討する - golang</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/golang/consider-switching-from-glide-to-dep/" />
		<id>tag:text.Baldanders.info,2017-10-10:/golang/consider-switching-from-glide-to-dep/</id>
		<published>2017-10-10T18:02:56+09:00</published>
		<updated>2017-10-10T18:02:56+09:00</updated>
		<summary>つまり「依存関係（Vendoring）管理ツールとしては dep を推奨するけど移行できない人のために当面はサポートを続けるよ（でも将来は分からん）」という解釈でいいのだろうか。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="golang" label="golang" scheme="http://text.baldanders.info/golang" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;（この記事は &lt;a href=&#34;https://qiita.com/spiegel-im-spiegel/items/e931ad1a7565d02d179e&#34;&gt;Qiita とのマルチポスト&lt;/a&gt;です。
まぁ，向こうは草稿版だけど）&lt;/p&gt;

&lt;p&gt;久しぶりに &lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; を使おうと最新版（&lt;a href=&#34;https://github.com/Masterminds/glide/releases/tag/v0.13.0&#34; title=&#34;Release 0.13.0 · Masterminds/glide&#34;&gt;0.13.0&lt;/a&gt;）を見に行ったら “Consider switching to &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt;” とか書いてあるじゃない。&lt;/p&gt;

&lt;figure lang=&#34;en&#34;&gt;
&lt;blockquote&gt;
&lt;q&gt;Glide is used by a great number of projects and will continue to get support for some time.
But, the near future is likely in dep.
dep can handle importing Glide config files.
Please consider trying dep on your project or converting to dep.&lt;/q&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;https://github.com/Masterminds/glide/releases/tag/v0.13.0&#34;&gt;Release 0.13.0&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;まじすか。&lt;/p&gt;

&lt;p&gt;つまり「依存関係（Vendoring）管理ツールとしては &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; を推奨するけど移行できない人のために当面はサポートを続けるよ（でも将来は分からん）」という解釈でいいのだろうか。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; は &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;開発プロジェクトの公式ツールで，2017年の始めくらいに日本でも話題になったような気がするが。私は &lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; で完全に満足していたのでスルーしていた。
こんなことになるなんて。
ならもう &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; に移行するしかないぢゃん。&lt;/p&gt;

&lt;p&gt;とはいえ，いきなり本番環境に投入するのは怖いので，なにか適当なテストケースはないか，と自分のリポジトリを漁ってたら丁度いいのがあったよ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/spiegel-im-spiegel/pi&#34;&gt;spiegel-im-spiegel/pi: Estimate of Pi with Monte Carlo method.&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;これって&lt;a href=&#34;http://text.baldanders.info/golang/estimate-of-pi/&#34;&gt;モンテカルロ法で遊んでた&lt;/a&gt;ときに作ったものだ。
最悪ぶっ壊れてもいいので，これ使って試してみるか。&lt;/p&gt;

&lt;h2 id=&#34;dep-の取得&#34;&gt;&lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; の取得&lt;/h2&gt;

&lt;p&gt;まず &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; の取得から始めないとだが，リポジトリ自体は &lt;code&gt;go get&lt;/code&gt; コマンドで取得できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go get -v github.com/golang/dep&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これをこのままインストールしてもいいのだが&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go install -v github.com/golang/dep/cmd/dep&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/golang/dep/releases&#34; title=&#34;Releases · golang/dep&#34;&gt;リリースページ&lt;/a&gt;にビルド済みのモジュールが置かれているので，ありがたくこれを使わせてもらおう。&lt;/p&gt;

&lt;p&gt;最新版（現時点で &lt;a href=&#34;https://github.com/golang/dep/releases/tag/v0.3.1&#34; title=&#34;Release v0.3.1 · golang/dep&#34;&gt;v0.3.1&lt;/a&gt;）には Windows 用のモジュール &lt;code&gt;dep-windows-amd64&lt;/code&gt; もある。
Windows ユーザは何のファイルかと思うかもしれないが，実はこれ実行ファイルなので， &lt;code&gt;dep.exe&lt;/code&gt; にリネームしてそのまま使える。&lt;/p&gt;

&lt;p&gt;万が一があっては困るのでモジュールの SHA256 ハッシュ値を確認しておく（こういうのこそ OpenPGP を使ってくれないものか）。
Windows ユーザには（&lt;code&gt;sha256sum&lt;/code&gt; といった）標準ツールがないのが痛いのだが， &lt;a href=&#34;http://www.7-zip.org/&#34;&gt;7-Zip&lt;/a&gt; があるなら，これを使ってハッシュ値を確認できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ 7z.exe h -scrcSHA256 dep-windows-amd64
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;7-Zip [64] 16.04 : Copyright (c) 1999-2016 Igor Pavlov : 2016-10-04
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Scanning
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;1 file, 7696896 bytes (7517 KiB)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;SHA256                                                                    Size  Name
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;---------------------------------------------------------------- -------------  ------------
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A       7696896  dep-windows-amd64
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;---------------------------------------------------------------- -------------  ------------
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A       7696896
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Size: 7696896
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;SHA256 for data:              D4BF3EC10B1808CAB883C6AB2901C396CF463E684FDA350199E93E31806C194A
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Everything is Ok&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これを &lt;code&gt;dep-windows-amd64.sha256&lt;/code&gt; に記載されている値と比較する。
改竄されてなければ同じ値になるはずである。
目視は辛いのでテキストエディタ等の検索機能を使えばいいだろう。&lt;/p&gt;

&lt;div class=&#34;box&#34;&gt;
&lt;p&gt;&lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; を使っている人なら &lt;code&gt;.nyagos&lt;/code&gt; ファイルに&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;alias&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;sha1sum&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;%COMSPEC% /c &lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;%PROGRAMFILES%/7-Zip/7z.exe&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt; h -scrcSHA1 $*&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;sha256sum&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;%COMSPEC% /c &lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;%PROGRAMFILES%/7-Zip/7z.exe&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt; h -scrcSHA256 $*&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とか記述しておけば&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ sha256sum dep-windows-amd64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;で同じ結果が得られる。
改竄の有無を確認するためにファイルのハッシュ値を調べることはよくあるので準備しておくとよい。&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;実行モジュールの動作確認もしておく。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;dep is a tool for managing dependencies for Go projects
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Usage: dep &amp;lt;command&amp;gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Commands:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  init     Initialize a new project with manifest and lock files
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  status   Report the status of the project&amp;#39;s dependencies
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  ensure   Ensure a dependency is safely vendored in the project
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  prune    Prune the vendor tree of unused packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version  Show the dep version information
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Examples:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep init                               set up a new project
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep ensure                             install the project&amp;#39;s dependencies
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep ensure -update                     update the locked versions of all dependencies
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  dep ensure -add github.com/pkg/errors  add a dependency to the project
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Use &amp;#34;dep help [command]&amp;#34; for more information about a command.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep version
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;dep:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; version     : v0.3.1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; build date  : 2017-09-19
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; git hash    : 83789e2
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; go version  : go1.9
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; go compiler : gc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; platform    : windows/amd64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&#34;glide-から-dep-への移行&#34;&gt;&lt;a href=&#34;https://github.com/Masterminds/glide&#34; title=&#34;Masterminds/glide&#34;&gt;glide&lt;/a&gt; から &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; への移行&lt;/h2&gt;

&lt;p&gt;お試し用の &lt;a href=&#34;https://github.com/spiegel-im-spiegel/pi&#34; title=&#34;spiegel-im-spiegel/pi: Estimate of Pi with Monte Carlo method.&#34;&gt;spiegel-im-spiegel/pi&lt;/a&gt; をビルド可能な適当な場所に置く。&lt;/p&gt;

&lt;p&gt;このパッケージの &lt;code&gt;glide.yaml&lt;/code&gt; はこんな感じになっている。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;package: github.com/spiegel-im-spiegel/pi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;import:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- package: github.com/davidminor/uint128&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;また &lt;code&gt;glide.lock&lt;/code&gt; はこんな感じ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;hash: d570123d6231810c51dd17e415673df221fb2dec7ef6ab45cd34093002a87cbb
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;updated: 2016-11-16T17:28:38.2997832+09:00
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;imports:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  subpackages:
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  - lcg
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 5745f1bf80414e0ad2670e85d6aece8c58031def
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 76626ae9c91c4f2a10f34cad8ce83ea42c93bb75
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 98c0ea580d2f3c5a171acf4d4f15321b72209d08
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;- name: github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version: 5929f04fb8e4a19ac29fdf658866f9441f339cd9
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;testImports: []&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;この状態で &lt;code&gt;dep init&lt;/code&gt; コマンドを実行する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep init
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Importing configuration from glide. These are only initial constraints, and are further refined during the solve process.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Detected glide configuration files...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Converting from glide.yaml and glide.lock...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying v0.3.0 (5929f04) as initial lock for imported dep github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (6b74a60) as initial lock for imported dep github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (248dadf) as initial lock for imported dep github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying master (98c0ea5) as initial lock for imported dep github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (189780b) as initial lock for imported dep github.com/davidminor/gorand
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying master (5745f1b) as initial lock for imported dep github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying v1.0 (76626ae) as initial lock for imported dep github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Using * as initial constraint for imported dep github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  Trying * (5ccb023) as initial lock for imported dep github.com/spf13/pflag&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;実は &lt;a href=&#34;https://github.com/spiegel-im-spiegel/gocli&#34; title=&#34;spiegel-im-spiegel/gocli: Command line interface&#34;&gt;spiegel-im-spiegel/gocli&lt;/a&gt; パッケージの最新版は v0.4.0 だが， &lt;code&gt;glide.lock&lt;/code&gt; の内容を読み取って，ちゃんと v0.3.0 のものを取ってきているようだ。
偉いぞ！&lt;/p&gt;

&lt;p&gt;&lt;code&gt;dep init&lt;/code&gt; コマンドにより &lt;code&gt;Gopkg.toml&lt;/code&gt; および &lt;code&gt;Gopkg.lock&lt;/code&gt; の2つのファイルと &lt;code&gt;vendor/&lt;/code&gt; フォルダが作成される。
このうち &lt;code&gt;Gopkg.toml&lt;/code&gt; の内容は以下の通り。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/davidminor/gorand&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/pkg/errors&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/seehuhn/mt19937&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spf13/cobra&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;そして &lt;code&gt;Gopkg.lock&lt;/code&gt; の内容は以下の通りだ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/davidminor/gorand&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;lcg&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;189780b8053a44a111339a4248394fd844c1da40&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  branch = &amp;#34;master&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/davidminor/uint128&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;5745f1bf80414e0ad2670e85d6aece8c58031def&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/inconshreveable/mousetrap&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;76626ae9c91c4f2a10f34cad8ce83ea42c93bb75&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;v1.0&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/pkg/errors&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;248dadf4e9068a0b3e79f02ed0a610d935de5302&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  branch = &amp;#34;master&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/seehuhn/mt19937&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;98c0ea580d2f3c5a171acf4d4f15321b72209d08&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spf13/cobra&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;6b74a60562f5c1c920299b8f02d153e16f4897fc&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spf13/pflag&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;5ccb023bc27df288a957c5e994cd44fd19619465&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[[projects]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  packages = [&amp;#34;.&amp;#34;]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  revision = &amp;#34;5929f04fb8e4a19ac29fdf658866f9441f339cd9&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;v0.3.0&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;[solve-meta]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  analyzer-name = &amp;#34;dep&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  analyzer-version = 1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  inputs-digest = &amp;#34;4a7cc1799d386351173ccdf8266d22ebe2971ce7ba417395a0b63ca267ea9267&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  solver-name = &amp;#34;gps-cdcl&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  solver-version = 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;glide.lock&lt;/code&gt; と &lt;code&gt;Gopkg.lock&lt;/code&gt; の内容がきちんとマッチしているのが分かると思う。
念のため &lt;code&gt;dep status&lt;/code&gt; も見ておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep status
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;PROJECT                               CONSTRAINT  VERSION        REVISION  LATEST   PKGS USED
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/gorand          *                          189780b            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/uint128         *           branch master  5745f1b   5745f1b  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/inconshreveable/mousetrap  *           v1.0           76626ae   76626ae  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/pkg/errors                 *                          248dadf            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/seehuhn/mt19937            *           branch master  98c0ea5   98c0ea5  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/cobra                *                          6b74a60            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/pflag                *                          5ccb023            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/gocli   *           v0.3.0         5929f04   ce636bb  1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ビルドもちゃんと通る。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ go build -v .
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spiegel-im-spiegel/gocli
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/pflag
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/inconshreveable/mousetrap
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/uint128
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/seehuhn/mt19937
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/pkg/errors
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/davidminor/gorand/lcg
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/gencmplx
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/qq
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/genpi
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/plot
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/estmt
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/vendor/github.com/spf13/cobra
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi/cmd
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/pi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;というわけで， &lt;code&gt;glide.yaml&lt;/code&gt; と &lt;code&gt;glide.lock&lt;/code&gt; が正しい状態で残っていれば問題なく &lt;a href=&#34;https://github.com/golang/dep&#34; title=&#34;golang/dep: Go dependency management tool&#34;&gt;dep&lt;/a&gt; に移行できそうだ。&lt;/p&gt;

&lt;h2 id=&#34;依存関係の管理&#34;&gt;依存関係の管理&lt;/h2&gt;

&lt;p&gt;ところで，この状態で &lt;code&gt;dep ensure&lt;/code&gt; コマンドを実行すると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Gopkg.lock was already in sync with imports and Gopkg.toml
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/8) Wrote github.com/seehuhn/mt19937@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/8) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/8) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/8) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/8) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/8) Wrote github.com/spiegel-im-spiegel/gocli@v0.3.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/8) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/8) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;という感じで &lt;code&gt;Gopkg.lock&lt;/code&gt; ファイルも特に更新されないが，いったん &lt;code&gt;vendor/&lt;/code&gt; フォルダを削除して（またはリネームして）同じことをすると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Root project is &amp;#34;github.com/spiegel-im-spiegel/pi&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 19 transitively valid internal packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 12 external packages imported from 10 projects
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/22) Wrote github.com/mitchellh/mapstructure@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/22) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/22) Wrote gopkg.in/yaml.v2@v2
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/22) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/22) Wrote github.com/fsnotify/fsnotify@v1.4.2
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/22) Wrote github.com/magiconair/properties@v1.7.3
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/22) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/22) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(9/22) Wrote github.com/seehuhn/mt19937@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(10/22) Wrote github.com/pelletier/go-toml@v1.0.1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(11/22) Wrote github.com/spf13/afero@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(12/22) Wrote github.com/cpuguy83/go-md2man@v1.0.7
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(13/22) Wrote github.com/spf13/cast@v1.1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(14/22) Wrote github.com/hashicorp/hcl@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(15/22) Wrote github.com/spf13/jwalterweatherman@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(16/22) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(17/22) Wrote github.com/spf13/viper@v1.0.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(18/22) Wrote github.com/spiegel-im-spiegel/gocli@v0.3.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(19/22) Wrote github.com/russross/blackfriday@v1.5
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(20/22) Wrote golang.org/x/sys@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(21/22) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(22/22) Wrote golang.org/x/text@master&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;（途中の表示を省いている。ご容赦）&lt;/p&gt;

&lt;p&gt;と「え？ それ要らんやろ」ってなパッケージまで読み込んでくる。
うーん。
どうやら使わないサブパッケージまで依存関係を追跡してるみたい。&lt;/p&gt;

&lt;p&gt;そこで &lt;code&gt;Gopkg.toml&lt;/code&gt; に以下の記述を加えて余計なパッケージを読み込ませないようにした。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;ignored = [
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/cpuguy83/go-md2man/md2man&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/russross/blackfriday&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/spf13/cobra/doc&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/spf13/cobra/cobra/cmd&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &amp;#34;github.com/spf13/viper&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ついでに &lt;code&gt;Gopkg.toml&lt;/code&gt; で &lt;a href=&#34;https://github.com/spiegel-im-spiegel/gocli&#34; title=&#34;spiegel-im-spiegel/gocli: Command line interface&#34;&gt;spiegel-im-spiegel/gocli&lt;/a&gt; パッケージのバージョンを明記する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;[[constraint]]
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  name = &amp;#34;github.com/spiegel-im-spiegel/gocli&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  version = &amp;#34;0.3.0&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これでもう一度 &lt;code&gt;dep ensure&lt;/code&gt; コマンドを実行すると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep ensure -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Root project is &amp;#34;github.com/spiegel-im-spiegel/pi&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 19 transitively valid internal packages
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; 8 external packages imported from 8 projects
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;...
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(1/8) Wrote github.com/inconshreveable/mousetrap@v1.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(2/8) Wrote github.com/davidminor/gorand@189780b8053a44a111339a4248394fd844c1da40
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(3/8) Wrote github.com/spiegel-im-spiegel/gocli@v0.3.0
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(4/8) Wrote github.com/seehuhn/mt19937@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(5/8) Wrote github.com/spf13/cobra@6b74a60562f5c1c920299b8f02d153e16f4897fc
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(6/8) Wrote github.com/pkg/errors@248dadf4e9068a0b3e79f02ed0a610d935de5302
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(7/8) Wrote github.com/davidminor/uint128@master
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;(8/8) Wrote github.com/spf13/pflag@5ccb023bc27df288a957c5e994cd44fd19619465&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;となり &lt;code&gt;dep status&lt;/code&gt; コマンドの実行結果も&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep status
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;PROJECT                               CONSTRAINT  VERSION        REVISION  LATEST   PKGS USED
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/gorand          *                          189780b            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/davidminor/uint128         *           branch master  5745f1b   5745f1b  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/inconshreveable/mousetrap  *           v1.0           76626ae   76626ae  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/pkg/errors                 *                          248dadf            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/seehuhn/mt19937            *           branch master  98c0ea5   98c0ea5  1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/cobra                *                          6b74a60            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spf13/pflag                *                          5ccb023            1
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;github.com/spiegel-im-spiegel/gocli   ^0.3.0      v0.3.0         5929f04   5929f04  1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;と元に戻った。
不要なサブパッケージを排除するのはちょっと面倒くさそうである。&lt;/p&gt;

&lt;p&gt;ちなみに &lt;code&gt;Gopkg.toml&lt;/code&gt; のバージョン指定は “&lt;a href=&#34;http://semver.org/&#34; title=&#34;Semantic Versioning 2.0.0 | Semantic Versioning&#34;&gt;Semantic Versioning&lt;/a&gt;” に従っている。
具体的には “&lt;a href=&#34;http://semver.org/&#34; title=&#34;Semantic Versioning 2.0.0 | Semantic Versioning&#34;&gt;Semantic Versioning&lt;/a&gt;” の &lt;a href=&#34;https://golang.org/&#34; title=&#34;The Go Programming Language&#34;&gt;Go 言語&lt;/a&gt;実装である &lt;a href=&#34;https://github.com/Masterminds/semver&#34; title=&#34;Masterminds/semver: Work with Semantic Versions in Go&#34;&gt;Masterminds/semver&lt;/a&gt; パッケージを参照するとよい。&lt;/p&gt;

&lt;h2 id=&#34;依存関係の視覚化&#34;&gt;依存関係の視覚化&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;dep status&lt;/code&gt; コマンドには結果を DOT 言語で吐き出すオプションがあるようだ。
&lt;a href=&#34;http://www.graphviz.org/&#34; title=&#34;Graphviz | Graphviz - Graph Visualization Software&#34;&gt;Graphviz&lt;/a&gt; があれば，この出力結果を画像データに変換できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ dep status -dot | dot -Tpng -o pi-dependency.png&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;結果はこんな感じ。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;http://text.baldanders.info/images/pi-dependency.png&#34;&gt;&lt;img srcset=&#34;http://text.baldanders.info/images/pi-dependency.png 1428w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;pi-dependency.png&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;http://text.baldanders.info/images/pi-dependency.png&#34;&gt;pi-dependency.png&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ブラボー！&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.classmethod.jp/go/dep/&#34;&gt;Goオフィシャルチーム作成の依存関係管理ツール dep を試してみた ｜ Developers.IO&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://mattn.kaoriya.net/software/lang/go/20170125023240.htm&#34;&gt;Big Sky :: golang オフィシャル謹製のパッケージ依存解決ツール「dep」&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/golang/gopath-pollution/&#34;&gt;GOPATH 汚染問題&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/golang/package-visualization-tool/&#34;&gt;パッケージの依存状況の視覚化&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>Lua のモジュール - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2016/01/lua-module/" />
		<id>tag:text.Baldanders.info,2016-01-04:/remark/2016/01/lua-module/</id>
		<published>2016-01-04T22:44:13+09:00</published>
		<updated>2016-01-04T22:44:13+09:00</updated>
		<summary>Lua は不案内なので知らなかったのだが module() 関数は Lua 5.2 で廃止されていたらしい。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">&lt;p&gt;&lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; 4.1.0_0 がリリースされた。
主な変更点は &lt;code&gt;ln&lt;/code&gt; コマンドが追加されたことのようだ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/zetamatta/nyagos/releases/tag/4.1.0_0&#34;&gt;Release 4.1.0_0 · zetamatta/nyagos&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ただ，私の場合はより切実な問題があって， &lt;code&gt;-f&lt;/code&gt; オプションで &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; のスクリプトを実行させた場合に &lt;code&gt;module()&lt;/code&gt; 関数が使えなくなった。
&lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; は不案内なので知らなかったのだが &lt;code&gt;module()&lt;/code&gt; 関数は &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; 5.2 で deprecated になっていたらしい。
逆になんで今まで使えてたのかは分からない。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://p-monster.hatenablog.com/entry/2013/02/13/205419&#34;&gt;Luaのモジュールを穴が空くまで見つめてみる - プログラミングの魔物&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;module()&lt;/code&gt; 関数が使えないので &lt;code&gt;require()&lt;/code&gt; で外部ファイルを呼び出すとファイル内の記述がそのまま実行される。&lt;/p&gt;

&lt;p&gt;以前なら &lt;code&gt;module1.lua&lt;/code&gt; に&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;module&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;module1&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;package.seeall&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d9&#34;&gt;method1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Method 1&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d9&#34;&gt;method2&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Method 2&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;と定義しておけば&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;module1&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.write&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.write&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method2&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;と記述できた。
もし同じように機能させたいなら &lt;code&gt;module1.lua&lt;/code&gt; を&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;module1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Method 1&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method2&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Method 2&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;と記述するのが一番簡単なようだ。
&lt;code&gt;module1&lt;/code&gt; を関数テーブルとして定義するわけだ。&lt;/p&gt;

&lt;p&gt;あるいは &lt;code&gt;module1.lua&lt;/code&gt; を&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s3e8&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Method 1&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method2&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Method 2&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;としておいて，呼び出し側を&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s3e8&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;module1&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.write&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.write&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;module1.method2&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;とすればグローバル領域を汚さずに済むだろう。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.luafaq.org/&#34;&gt;Lua Unofficial FAQ (uFAQ)&lt;/a&gt; : “1.37.2 Life after module()?” の項が参考になる&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/16849422/using-the-module-function-in-lua-5-2&#34;&gt;c++ - Using the &amp;lsquo;module&amp;rsquo; function in Lua 5.2? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://marupeke296.com/LUA_No4_Table.html&#34;&gt;その４ 会得必須！Luaの真髄「テーブル」&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ie.u-ryukyu.ac.jp/~e085739/lua.hajime.4.html&#34;&gt;第 4 回: Lua のオブジェクト指向について紹介する — WTOPIA v1.0 documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>NYAGOS 4.1-beta がリリース - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2015/nyagos-4_1_beta/" />
		<id>tag:text.Baldanders.info,2015-12-20:/remark/2015/nyagos-4_1_beta/</id>
		<published>2015-12-20T16:31:06+09:00</published>
		<updated>2015-12-21T10:36:09+09:00</updated>
		<summary>4.1 で大きく変わったのはコールバック関数の扱いのようだ。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;ここのところ忙しくしてたら，いつの間にか &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; の &lt;a href=&#34;https://github.com/zetamatta/nyagos/releases/tag/4.1-beta&#34;&gt;4.1-beta&lt;/a&gt; が出てた。
4.1 で大きく変わったのはコールバック関数の扱いのようだ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;クラッシュ回避のため、全てのLua のコールバック関数はそれぞれの Lua インスタンスを持つようにした。（つまり、.nyagos で定義されたグローバル変数は、全てのコールバック関数から見ることができなくなった）&lt;/li&gt;
&lt;li&gt;コールバック関数と .nyagos 間で値を共有するため、テーブル share[] を作った&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;コールバック関数の挙動が変わったのは&lt;/p&gt;

&lt;figure&gt;
&lt;blockquote&gt;
&lt;q&gt;この制限は、クラッシュ回避のため、コールバック関数ごとに別の Lua インスタンスを用意しているためです。エイリアス等は別の goroutine 内で呼ばれるのですが、4.0 では、この時同一の Lua インスタンスを使用していたため、時にスタックに矛盾が発生して、クラッシュすることがあったのです。&lt;/q&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/c08586c85fa73c182a7a&#34;&gt;nyagosスクリプト解説 - CMD.EXEで化けさせず、nyagosの中だけプロンプトをカラー化&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ということらしい。&lt;/p&gt;

&lt;p&gt;実は &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; で表示するプロンプトは以下の記事を参考にオリジナルの &lt;code&gt;%PROMPT%&lt;/code&gt; から変えている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/c08586c85fa73c182a7a&#34;&gt;nyagosスクリプト解説 - CMD.EXEで化けさせず、nyagosの中だけプロンプトをカラー化 - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以前のプロンプト定義は以下のような感じだった。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s1770&#34;&gt;-- Simple Prompt for CMD.EXE&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;PROMPT&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;$L&amp;#39;&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.getenv&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;COMPUTERNAME&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;:$P$G$_$$$s&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;-- Coloring Prompt for NYAGOS.exe&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;prompter&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.prompt&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.prompt&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;prompter&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;$e[36;40;1m&amp;#39;&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;$e[37;1m&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;この中の &lt;code&gt;prompter&lt;/code&gt; がコールバック関数から見えなくなったということらしい。
そこで以下のようにコードを変更するのだそうだ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s1770&#34;&gt;-- Simple Prompt for CMD.EXE&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.env&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;prompt&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;$L&amp;#39;&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.getenv&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;COMPUTERNAME&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;:$P$G$_$$$s&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;-- Coloring Prompt for NYAGOS.exe&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;share.org_prompter&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.prompt&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.prompt&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;share.org_prompter&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;$e[36;40;1m&amp;#39;&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;$e[37;1m&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;ポイントは &lt;code&gt;share.org_prompter=nyagos.prompt&lt;/code&gt; の部分。
オリジナルの &lt;code&gt;nyagos.prompt()&lt;/code&gt; 関数を &lt;code&gt;share[]&lt;/code&gt; テーブルに退避させている。&lt;/p&gt;

&lt;p&gt;これでめでたく&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\program\nyagos&amp;gt;nyagos.exe
Nihongo Yet Another GOing Shell 4.1-beta-amd64 Powered by go1.5.2 &amp;amp; Lua 5.3
Copyright (c) 2014,2015 HAYAMA_Kaoru and NYAOS.ORG
&amp;lt;VENUS:C:/program/nyagos&amp;gt;
$ ls
Doc/               lua53.dll          nyagos.lua*        specialfolders.js*
catalog.d/         makeicon.cmd*      nyole.dll
license.txt        nyagos.d/          readme.md
lnk.js*            nyagos.exe*        readme_ja.md
&amp;lt;VENUS:C:/program/nyagos&amp;gt;
$
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;と表示できるようになった（カラーでお見せできないのが残念です）&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:a&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:a&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;実は私もプロンプトは折り返す派。
開発環境ではフォルダがかなり深くなることがあり，既存の &lt;code&gt;$P$G&lt;/code&gt; では見づらいのだ。
まぁこれは Windows に限らないのだが。&lt;/p&gt;

&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2015/nyagos-and-lua/&#34;&gt;NYAGOS で Lua&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/75840096f8279dd641a8&#34;&gt;何がちがう？NYAGOS 4.0 と 4.1β - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:a&#34;&gt;そういや昔の UNIX ワークステーションはホスト名に venus とか惑星名を付けてるところが多かったな。私がネットワーク管理者をしてた時はプロキシサーバに janus とか付けてた。若気の至りである（笑）
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:a&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>NYAGOS で Lua - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2015/nyagos-and-lua/" />
		<id>tag:text.Baldanders.info,2015-11-02:/remark/2015/nyagos-and-lua/</id>
		<published>2015-11-02T21:41:54+09:00</published>
		<updated>2017-01-20T12:27:56+09:00</updated>
		<summary>前回，ConEmu とともに NYAGOS を導入したけど，今回は NYAGOS のセッティングを中心に。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/remark/2015/conemu-and-nyagos/&#34;&gt;前回&lt;/a&gt;， &lt;a href=&#34;https://conemu.github.io/&#34; title=&#34;ConEmu - Handy Windows Terminal&#34;&gt;ConEmu&lt;/a&gt; とともに &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; を導入したけど，今回は &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; のセッティングを中心に。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; の特徴のひとつに， &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; のエンジンを内蔵し解釈できる点がある。
というか &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; 自身が機能拡張を &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; で実装していて，ユーザも hackable に &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; をカスタマイズできる。&lt;/p&gt;

&lt;p&gt;また &lt;code&gt;nyagos.exe&lt;/code&gt; を &lt;code&gt;-f&lt;/code&gt; オプションを付けて起動すると &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; のソースファイルをスクリプトとして実行できる。
たとえば以下のコード &lt;code&gt;hello.lua&lt;/code&gt; を以下のように記述し&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;Hello World!&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;nyagos.exe&lt;/code&gt; で実行すると&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:&amp;gt;nyagos.exe -f hello.lua
Hello World!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;となる。&lt;/p&gt;

&lt;p&gt;これだけだと大したことはないが， &lt;code&gt;nyagos.exe&lt;/code&gt; でスクリプトを実行した場合は &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; の &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; 拡張が使える。
例えばカレント・フォルダを取得する &lt;code&gt;getwd.lua&lt;/code&gt; を以下のように記述し&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.write&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.getwd&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;sc25&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;nyagos.exe&lt;/code&gt; で実行すると&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\Users\username&amp;gt;nyagos.exe -f getwd.lua
C:\Users\username
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;となる。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; 拡張については &lt;a href=&#34;https://github.com/zetamatta/nyagos/blob/master/Doc/nyagos_ja.md&#34;&gt;NYAGOS のドキュメント&lt;/a&gt;を参照するとよいだろう。
特筆すべきは &lt;code&gt;alias&lt;/code&gt; 機能で，単純なコマンドの置き換えだけでなく&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;nyagos.alias.cmdname = function(args) ... end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;のような形式で新しい内部コマンドを作成することもできる。&lt;/p&gt;

&lt;p&gt;ところで &lt;code&gt;nyagos.exe&lt;/code&gt; を普通に起動して &lt;code&gt;ls -oF&lt;/code&gt; コマンドでファイルの一覧を表示させてみると，拡張子 &lt;code&gt;.lua&lt;/code&gt; のファイルは実行可能ファイルになっていることが分かる。
ただ，実際に起動しようとすると&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~&amp;gt; hello.lua
&#39;lua&#39; is not recognized as an internal or external command,
operable program or batch file
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;と怒られた。
どうやら &lt;code&gt;lua&lt;/code&gt; コマンドがねーよ，と言っているらしい（確かに &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; の実行モジュールは入れてないのだが）。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; をインストールしたフォルダにある &lt;code&gt;nyagos.d\suffix.lua&lt;/code&gt; ファイルの末尾あたりを見ると&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.pl&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;perl&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.which&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;ipy&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.py&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;ipy&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;elseif&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;nyagos.which&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;py&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.py&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;py&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.py&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s3e8&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.rb&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;ruby&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.lua&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;lua&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.awk&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;awk&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;-f&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.js&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;cscript&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;//nologo&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.vbs&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;cscript&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;//nologo&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.ps1&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;powershell&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;-file&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;となっていて，拡張子 &lt;code&gt;.lua&lt;/code&gt; のファイルが &lt;code&gt;lua&lt;/code&gt; コマンドに関連付けられているのが分かる。
ってことは，これを &lt;code&gt;nyagos.exe&lt;/code&gt; に書き換えればいいわけだ。
とはいえ &lt;code&gt;nyagos.d\suffix.lua&lt;/code&gt; ファイルを直接いじるわけにはいかないので（バージョンアップのたびに上書きされる）， &lt;code&gt;%HOME%&lt;/code&gt; または &lt;code&gt;%HOMEPATH%&lt;/code&gt; フォルダにある &lt;code&gt;.nyagos&lt;/code&gt; ファイルに以下の記述を追加する&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:a&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:a&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;suffix.lua&lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;nyagos.exe&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#34;-f&amp;#34;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;これで &lt;code&gt;nyagos.exe&lt;/code&gt; を起動し直して &lt;code&gt;hello.lua&lt;/code&gt; ファイルを実行してみる。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~&amp;gt; hello.lua
Hello World!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;おおっ，うまくいった。
これで &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; スクリプトを &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt; 上でバッチファイルのように扱うことができる。&lt;/p&gt;

&lt;p&gt;さぁて，これでいよいよもって &lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; の勉強をしないといけなくなった。
Pascal 系の構文は目が滑るんだよなぁ。&lt;/p&gt;

&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;h3 id=&#34;nyagos-作者による解説&#34;&gt;NYAGOS 作者による解説&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/a49e3a40201511128508&#34;&gt;環境変数PATHが長すぎて、追加したパスが有効にならないぜ！ - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/c4ad3cc55c5afa74da63&#34;&gt;nyagosスクリプト解説 - svn のサブコマンドを勝手に拡張する - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/29a85695813926cafd2c&#34;&gt;nyagosスクリプト解説 - ezoe.lua「コマンドではない。」 - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/cdff310f53faf3369e48&#34;&gt;nyagosスクリプト解説 - 逆クォートによるコマンド出力展開編(backquote.lua) - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/c08586c85fa73c182a7a&#34;&gt;nyagosスクリプト解説 - CMD.EXEで化けさせず、nyagosの中だけプロンプトをカラー化 - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/89a907f4bd46d1750c31&#34;&gt;nyagosスクリプト解説 - VisualStudio れんけー - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/1fe83f736b0254e02415&#34;&gt;git 付属のPerlやunzipとかを使いたいけどsort,find,lnとかは要らない - Qiita&lt;/a&gt; &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:b&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:b&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;lua-の解説&#34;&gt;Lua の解説&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://yohshiy.blog.fc2.com/blog-entry-291.html&#34;&gt;Lua の Windows へのインストールと使い方 | プログラマーズ雑記帳&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://densan-labs.net/tech/lua/index.html&#34;&gt;Luaプログラミング入門 | densan-labs.net&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ie.u-ryukyu.ac.jp/~e085739/lua.hajime.html&#34;&gt;高速スクリプト言語 Lua を始めよう — WTOPIA v1.0 documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://handasse.blogspot.com/2010/02/lua.html&#34;&gt;良いもの。悪いもの。: Lua基礎文法最速マスター&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://noriko3.blog42.fc2.com/blog-entry-128.html&#34;&gt;紀子さん＠へぼぷろぐらまの日常 | Luaで日付時間操作。&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://symfoware.blog68.fc2.com/blog-entry-454.html&#34;&gt;Luaでファイルの読み書きを行なう - Symfoware&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://torus.jp/memo/x200907/lua-coroutine.rd.html&#34;&gt;Lua のコルーチンの使い方〜基本編〜 : torus solutions!&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;その他&#34;&gt;その他&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/daxanya1/items/7d4b51bba6c8f3a6016b&#34;&gt;NYAGOSとconemuでキーボード操作の拡張 - Qiita&lt;/a&gt; : &lt;a href=&#34;http://www.nyaos.org/index.cgi?p=NYAGOS&#34; title=&#34;NYAOS.ORG - NYAGOS&#34;&gt;NYAGOS&lt;/a&gt;+&lt;a href=&#34;http://www.lua.org/&#34; title=&#34;The Programming Language Lua&#34;&gt;Lua&lt;/a&gt; で動作を定義， &lt;a href=&#34;https://conemu.github.io/&#34; title=&#34;ConEmu - Handy Windows Terminal&#34;&gt;ConEmu&lt;/a&gt; でキーバインドを変更する&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/JugnautOnishi/items/7bec6008b6bdb1c1fb9a&#34;&gt;nyagosでbower searchを便利につかいたかった - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://qiita.com/zetamatta/items/3e83c7bfdfbe7fcc92b5&#34;&gt;【ポエム】 NYAGOSの現在と今後 【2017年版】 - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:a&#34;&gt;&lt;code&gt;suffix&lt;/code&gt; ではなく &lt;code&gt;alias&lt;/code&gt; で &lt;code&gt;lua&lt;/code&gt; コマンドを定義する手もある。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:a&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:b&#34;&gt;最近の &lt;a href=&#34;https://git-for-windows.github.io/&#34;&gt;Git for Windows&lt;/a&gt; は bash 関連のコマンドを &lt;code&gt;Git\usr\bin&lt;/code&gt; フォルダに集めている。 git コマンドだけが必要なら &lt;code&gt;Git\cmd&lt;/code&gt; フォルダにのみパスを通せばよい。 bash を使う場合は &lt;code&gt;Git\bin&lt;/code&gt; フォルダにある &lt;code&gt;bash.exe&lt;/code&gt; を起動するのが一番安全なようだ。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:b&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
	<entry>
		<title>LuaTeX-ja に関する覚え書き - remark</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/remark/2015/luatex-ja/" />
		<id>tag:text.Baldanders.info,2015-09-27:/remark/2015/luatex-ja/</id>
		<published>2015-09-27T01:32:49+09:00</published>
		<updated>2017-10-03T15:47:46+09:00</updated>
		<summary>LuaTeX では pdfTeX と同等のことができ， DVI ファイルではなく PDF ファイルを直接出力する。なおかつ callback を記述することにより内部処理に割り込みをかけ機能拡張することが可能になっている。LuaTeX-ja はこの機能拡張を使って日本語組版を LuaTeX の上で実現する。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="remark" label="remark" scheme="http://text.baldanders.info/remark" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;（これは&lt;a href=&#34;http://www.baldanders.info/mdwiki/#!luatexja.md&#34;&gt;2014年9月12日に公開した記事&lt;/a&gt;を再構成したものです）&lt;/p&gt;

&lt;p&gt;$\mathrm{Lua\TeX}$ では $\mathrm{pdf\TeX}$ と同等のことができ， DVI ファイルではなく PDF ファイルを直接出力する。
なおかつ callback を記述することにより内部処理に割り込みをかけ機能拡張することが可能になっている。
$\mathrm{Lua\TeX}$-ja はこの機能拡張を使って日本語組版を $\mathrm{Lua\TeX}$ の上で実現する。&lt;/p&gt;

&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://sourceforge.jp/projects/luatex-ja/wiki/FrontPage&#34;&gt;LuaTeX-ja Wiki - LuaTeX-ja - SourceForge.JP&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://sourceforge.jp/projects/luatex-ja/wiki/LuaTeX-ja%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9&#34;&gt;LuaTeX-jaの使い方 - LuaTeX-ja Wiki - LuaTeX-ja - SourceForge.JP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.antenna.co.jp/xml/xmllist/XMP/AboutXMP.htm&#34;&gt;XMP™ (Extensible Metadata Platform)仕様についてのメモ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ptex-からの主な変更点&#34;&gt;pTeX からの主な変更点&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;和文フォントは(小塚明朝,IPA 明朝などの)実際のフォント，和文フォントメトリック(JFMと呼ぶ )の組である&lt;/li&gt;
&lt;li&gt;日本語の文書中では改行はほとんどどこでも許されるので， $\mathrm{p\TeX}$ では和文文字直後の改行は無視される(スペースが入らない)ようになっていた。しかし， $\mathrm{Lua\TeX}$-ja では $\mathrm{Lua\TeX}$ の仕様のためにこの機能は完全には実装されていない&lt;/li&gt;
&lt;li&gt;2つの和文文字の間や，和文文字と欧文文字の間に入るグルー/カーン(両者をあわせて JAglue と呼ぶ)の挿入処理が 0 から書き直されている&lt;/li&gt;
&lt;li&gt;$\mathrm{Lua\TeX}$-ja では， $\mathrm{p\TeX}$ と同様に漢字・仮名を制御綴内に用いることができ， &lt;code&gt;\西暦&lt;/code&gt; などが正しく動作するようにしている。但し，制御綴中に使える和文文字が $\mathrm{p\TeX}$, $\mathrm{up\TeX}$ と全く同じではないことに注意すること&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;luatex-のバージョン-in-tex-live-2017&#34;&gt;LuaTeX のバージョン（in TeX Live 2017）&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ lualatex -v
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;This is LuaTeX, Version 1.0.4 (TeX Live 2017/W32TeX)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;Execute  &amp;#39;luatex --credits&amp;#39;  for credits and version details.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;There is NO warranty. Redistribution of this software is covered by
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;the terms of the GNU General Public License, version 2 or (at your option)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;any later version. For more information about these matters, see the file
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;named COPYING and the LuaTeX source.
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;LuaTeX is Copyright 2017 Taco Hoekwater and the LuaTeX Team.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;http://www.tug.org/texlive/&#34; title=&#34;TeX Live - TeX Users Group&#34;&gt;TeX Live&lt;/a&gt; で最新版を取得するには&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;$ tlmgr update --self --all&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;などとする。&lt;/p&gt;

&lt;h2 id=&#34;大雑把な解説&#34;&gt;大雑把な解説&lt;/h2&gt;

&lt;h3 id=&#34;最初の一歩&#34;&gt;最初の一歩&lt;/h3&gt;

&lt;p&gt;最低限の $\mathrm{\LaTeX}$ 文書ファイルはこんな感じ。入力は UTF-8 で行う。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;% \usepackage{luatexja} % no need to use luatexja with ltjclasses or ltjsclasses classes
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\section{はじめてのLua\TeX-ja}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ちゃんとLua\TeX-jaで日本語が出るかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\subsection{出たかな？}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;長い文章を入力するとちゃんと右端のところで折り返されるかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;大丈夫そうな気がするけど．ちょっと不安だけど何事も挑戦だよね。
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;ltjsarticle&lt;/code&gt; クラスを用いるのであれば &lt;code&gt;\usepackage{luatexja}&lt;/code&gt; の記述はなくても問題ない。&lt;/p&gt;

&lt;p&gt;これで&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;&amp;gt; luatatex hoge.tex&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;で問題なく処理できる。&lt;/p&gt;

&lt;h3 id=&#34;和文フォントの埋め込み&#34;&gt;和文フォントの埋め込み&lt;/h3&gt;

&lt;p&gt;現在のバージョンでは既定で IPAex フォントを埋め込むよう設定されている。
明示的に和文フォントを埋め込む場合は &lt;code&gt;luatexja-preset&lt;/code&gt; パッケージで書体単位でまとめてフォントを指定できる。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[sourcehan]{luatexja-preset} %和文フォントに Source Han フォントを指定する&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;プリセットオプションは以下のとおり&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;kozuka-pro&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kozuka-pr6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kozuka-pr6n&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hiragino-pro&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hiragino-pron&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;morisawa-pro&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;morisawa-pr6n&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;yu-win&lt;/code&gt; （&lt;a href=&#34;http://blog.petitboys.com/archives/yugothic-yumincho-jiyukobo.html&#34;&gt;游明朝/游ゴシック&lt;/a&gt;; Win8.1 以降）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;yu-osx&lt;/code&gt; （&lt;a href=&#34;http://blog.petitboys.com/archives/yugothic-yumincho-jiyukobo.html&#34;&gt;游明朝/游ゴシック&lt;/a&gt;; macOS）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ipa&lt;/code&gt;, &lt;code&gt;ipaex&lt;/code&gt;, &lt;code&gt;ms&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ipa-hg&lt;/code&gt;, &lt;code&gt;ipaex-hg&lt;/code&gt;, &lt;code&gt;ms-hg&lt;/code&gt; （Office 付属フォントを利用）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;moga-mobo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sourcehan&lt;/code&gt; &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:sh1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:sh1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;noembed&lt;/code&gt; （フォントを埋め込まない）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;追加で以下のオプションも使用できる&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nodeluxe&lt;/code&gt;: 明朝体・ゴシック体を各 1 ウェイトで使用する（規定値）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deluxe&lt;/code&gt;: 明朝体2ウェイト・ゴシック体3ウェイトと，丸ゴシック体を使用可能にする（otf パッケージ互換）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;expert&lt;/code&gt;: 横組専用仮名を用いる（otf パッケージ互換）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bold&lt;/code&gt;: 「明朝の太字」をゴシック体の太字によって代替する（otf パッケージ互換）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;90jis&lt;/code&gt;: 可能ならば 90JIS 字形を使う&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jis2004&lt;/code&gt;: 可能ならば JIS2004 字形を使う&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jis&lt;/code&gt;: jfm-jis.lua を JFM として用いる（JIS フォントメトリックに近い結果が得られる）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;no-math&lt;/code&gt;: &lt;code&gt;fontspec&lt;/code&gt; パッケージによる数式フォント置換が不都合な場合に指定する&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;graphicx-および-xcolor-パッケージ&#34;&gt;graphicx および xcolor パッケージ&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;graphicx&lt;/code&gt; および &lt;code&gt;xcolor&lt;/code&gt; パッケージはドライバ指定なしでOK。（自動検出される）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{graphicx,xcolor}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;明示的に指定するのであれば &lt;code&gt;luatex&lt;/code&gt; を指定する&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:def1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:def1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[luatex]{graphicx,xcolor}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3 id=&#34;hyperref-パッケージ&#34;&gt;hyperref パッケージ&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;hyperref&lt;/code&gt; パッケージも同様にドライバ指定なし大丈夫だが，そのままでは PDF の目次等が文字化けしてしまうので以下のパラメータを指定する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[pdfencoding=auto]{hyperref}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;または&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[unicode=true]{hyperref}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;更に &lt;code&gt;pdfa&lt;/code&gt; オプションをつけると PDF/A-1b 準拠の PDF を出力する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[pdfencoding=auto,pdfa]{hyperref} % PDF/A compatible&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;hyperref&lt;/code&gt; パッケージでは PDF metadata 用に以下のオプションが指定できる。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;baseurl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfauthor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfkeywords&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdflang&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfproducer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfsubject&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdftitle&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;hyperxmp-パッケージ&#34;&gt;hyperxmp パッケージ&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;hyperxmp&lt;/code&gt; パッケージを使うと XMP（Extensible Metadata Platform）によるメタデータを埋め込むことができる。
これは &lt;code&gt;hyperref&lt;/code&gt; パッケージと組み合わせて使う。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{hyperxmp} % XMP support with hyperref
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[pdfencoding=auto,pdfa]{hyperref} % PDF/A compatible
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\hypersetup{% hyperref options (and metadata)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdflang={jp},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdftitle={はじめての LuaTeX-ja},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfsubject={ちゃんとLuaTeX-jaで日本語が出るかな？},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfauthor={Spiegel},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfkeywords={LuaTeX-ja, PDF/A},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcopyright={Written by Spiegel on 2014,2017, and licensed under CC-BY.},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdflicenseurl={http://creativecommons.org/licenses/by/4.0/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontacturl={http://www.baldanders.info/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactcity={Hiroshima},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactcountry={Japan},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactregion={JA},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcaptionwriter={Spiegel},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    baseurl={http://text.baldanders.info/remark/2015/luatex-ja/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    draft=false,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarks=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarksnumbered=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarksopen=false,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    colorlinks=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    linkcolor=red,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    citecolor=green,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    filecolor=magenta,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    urlcolor=cyan
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;hyperxmp&lt;/code&gt; パッケージで追加されるパラメータは以下のとおり&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pdfauthortitle&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcaptionwriter&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactaddress&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactcity&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactcountry&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactemail&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactphone&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactpostcode&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontactregion&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcontacturl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfcopyright&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdflicenseurl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pdfmetalang&lt;/code&gt; （ない場合は &lt;code&gt;pdflang&lt;/code&gt; を参照する）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;どういうわけか &lt;code&gt;hyperxmp&lt;/code&gt; パッケージを使ってもいわゆる「タグ入り PDF」として Adobe Reader で認識されない。
&lt;a href=&#34;https://wiki.gnome.org/Apps/Evince&#34;&gt;Evince&lt;/a&gt; では著作権情報は読み取れているみたい。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;img srcset=&#34;https://farm1.staticflickr.com/756/21544622778_b7fa689c47_o.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;property&#34;&gt;
&lt;figcaption&gt;property&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&#34;参考文献の管理&#34;&gt;参考文献の管理&lt;/h3&gt;

&lt;p&gt;$\mathrm{bib\TeX}$, $\mathrm{bib\LaTeX}$ は $\mathrm{p\TeX}$, $\mathrm{up\TeX}$ で使っていたものを流用できる。
ただし，入出力は UTF-8 になること。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-tex&#34; data-lang=&#34;tex&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[backend=biber, style=numeric]{biblatex}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\addbibresource{refer.bib}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3 id=&#34;lualatex-用-latexmkrc-ファイルの準備&#34;&gt;LuaLaTeX 用 .latexmkrc ファイルの準備&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span class=&#34;s1770&#34;&gt;#!/usr/bin/env perl&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# LaTeX commands&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$pdflatex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;lualatex %O -synctex=1 %S&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$latex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;uplatex %O -synctex=1 %S&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$latex_silent_switch&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;-interaction=batchmode -c-style-errors&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# bibTeX commands&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$bibtex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;upbibtex %O %B&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$biber&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;biber %O --bblencoding=utf8 -u -U --output_safechars %B&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$makeindex&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;mendex %O -o %D %S&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# Device Driver&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$dvipdf&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;dvipdfmx %O -z9 -V 7 -o %D %S&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$dvips&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;dvips %O -z -f %S | convbkmk -u &amp;gt; %D&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$ps2pdf&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc1c&#34;&gt;&amp;#39;ps2pdf14 -dPDFA -dPDFACompatibilityPolicy=1 -sProcessColorModel=DeviceCMYK %O %S %D&amp;#39;&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# Typeset mode (generate a PDF)&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$pdf_mode&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# 0: do not generate a pdf , 1: using $pdflatex , 2: using $ps2pdf , 3: using $dvipdf&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s1770&#34;&gt;# Other configuration&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$pvc_view_file_via_temporary&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;&lt;/span&gt;&lt;span class=&#34;s7d0&#34;&gt;$max_repeat&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;sfa0&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sc80&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;s1388&#34;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3 id=&#34;最終形&#34;&gt;最終形&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-tex&#34; data-lang=&#34;tex&#34;&gt;&lt;span class=&#34;s1f40&#34;&gt;\documentclass{ltjsarticle}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[no-math,sourcehan]{luatexja-preset} %和文フォントに Source Han フォントを指定する
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;%% Hyperref 設定
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage{hyperxmp} % XMP support with hyperref
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\usepackage[pdfencoding=auto,pdfa]{hyperref} % PDF/A compatible
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;%% その他
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\renewcommand{\emph}[1]{\textsf{\textgt{#1}}} % 強調をゴシック体と Sans Serif に変更する
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;%% 文書情報
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\title{\emph{はじめてのLua\TeX-ja}}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\author{Spiegel}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\date{\today}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\hypersetup{% hyperref options (and metadata)
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdflang={jp},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdftitle={はじめての LuaTeX-ja},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfsubject={ちゃんとLuaTeX-jaで日本語が出るかな？},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfauthor={Spiegel},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfkeywords={LuaTeX-ja, PDF/A},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcopyright={Written by Spiegel on 2014,2017, and licensed under CC-BY.},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdflicenseurl={http://creativecommons.org/licenses/by/4.0/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontacturl={http://www.baldanders.info/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactcity={Hiroshima},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactcountry={Japan},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcontactregion={JA},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    pdfcaptionwriter={Spiegel},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    baseurl={http://text.baldanders.info/remark/2015/luatex-ja/},
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    draft=false,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarks=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarksnumbered=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    bookmarksopen=false,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    colorlinks=true,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    linkcolor=red,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    citecolor=green,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    filecolor=magenta,
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;    urlcolor=cyan
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\begin{document}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\maketitle
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\section{はじめてのLua\TeX-ja}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;ちゃんとLua\TeX-jaで日本語が出るかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\subsection{出たかな？}
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;長い文章を入力するとちゃんと右端のところで折り返されるかな？
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;大丈夫そうな気がするけど．ちょっと不安だけど何事も挑戦だよね．
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1f40&#34;&gt;\end{document}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&#34;ブックマーク&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.typekit.com/alternate/source-han-sans-jp/&#34;&gt;The Typekit Blog | Source Han Sansの紹介：オープンソースのPan-CJK書体&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://source.typekit.com/source-han-serif/jp/&#34;&gt;源ノ明朝&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://acetaminophen.hatenablog.com/entry/2016/04/23/141922&#34;&gt;TeX Live 2016 の新しい LuaTeX あれこれ - Acetaminophen’s diary&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://0-chromosome.hatenablog.jp/entry/2015/08/10/214938&#34;&gt;LuaTeXで使える！便利なLaTeX関連ツール - 0番染色体&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:sh1&#34;&gt;&lt;a href=&#34;https://github.com/adobe-fonts/source-han-serif&#34; title=&#34;adobe-fonts/source-han-serif: Source Han Serif | 思源宋体 | 思源宋體 | 源ノ明朝 | 본명조&#34;&gt;源ノ明朝&lt;/a&gt;および&lt;a href=&#34;https://github.com/adobe-fonts/source-han-sans&#34; title=&#34;adobe-fonts/source-han-sans: Source Han Sans | 思源黑体 | 思源黑體 | 源ノ角ゴシック | 본고딕&#34;&gt;源ノ角ゴシック&lt;/a&gt;の仕様例として「&lt;a href=&#34;http://text.baldanders.info/remark/2017/10/using-source-han-fonts-by-japanese-tex/&#34;&gt;TeX 日本語環境で「源ノ」フォントを使ってみた&lt;/a&gt;」を参考にどうぞ。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:sh1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:def1&#34;&gt;$\mathrm{Lua\TeX}$ 0.95 以降では &lt;code&gt;luatex.def&lt;/code&gt; ドライバが新設され，ドライバ依存のパッケージではこれを指定すればいいようになった。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:def1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry>
	
</feed>
