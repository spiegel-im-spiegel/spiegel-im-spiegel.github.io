<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:cc="http://web.resource.org/cc/">
	<title>Template - text.Baldanders.info</title>
	<link rel="alternate" type="text/html" href="http://text.baldanders.info/tags/template/" />
	<link rel="self" type="application/atom+xml" href="http://text.baldanders.info/tags/template/index.xml" />
	<id>tag:text.Baldanders.info,2015-09-25:/tags</id>
	<updated>2015-09-25T11:14:44+09:00</updated>
	<subtitle>帰ってきた「しっぽのさきっちょ」</subtitle>
	<icon>http://text.baldanders.info//images/avatar.jpg</icon>
	<logo>http://text.baldanders.info//images/avatar.jpg</logo>
	<generator uri="https://gohugo.io/">Hugo 0.21</generator>

	
	<entry>
		<title>Template の部品化 - hugo</title>
		<link rel="alternate" type="text/html" href="http://text.baldanders.info/hugo/partial-template/" />
		<id>tag:text.Baldanders.info,2015-09-25:/hugo/partial-template/</id>
		<published>2015-09-25T11:14:44+09:00</published>
		<updated>2015-10-04T19:56:00+09:00</updated>
		<summary>今回は Template について，もう少しだけ詳しく紹介してみる。</summary>
		
			<author>
				<name>Spiegel</name>
				<uri>http://www.baldanders.info/spiegel/profile/</uri>
			</author>
			
	<link rel="cc:license" type="application/rdf+xml" href="http://creativecommons.org/licenses/by-sa/4.0/rdf" />


		
		<category term="hugo" label="hugo" scheme="http://text.baldanders.info/hugo" />
		<content type="html" xml:lang="ja" xml:base="http://text.baldanders.info/">

&lt;p&gt;今回は Template について，もう少しだけ詳しく紹介してみる。&lt;/p&gt;

&lt;h2 id=&#34;theme-hugo-theme-text-を導入する&#34;&gt;Theme “hugo-theme-text” を導入する&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/hugo/theme/&#34; title=&#34;Theme を利用する&#34;&gt;前回&lt;/a&gt;予告した通り，拙作の Theme &lt;a href=&#34;https://github.com/spiegel-im-spiegel/hugo-theme-text&#34;&gt;spiegel-im-spiegel/hugo-theme-text&lt;/a&gt; を導入する。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\hugo-env\www&amp;gt;git clone https://github.com/spiegel-im-spiegel/hugo-theme-text.git themes/hugo-theme-text
Cloning into &#39;themes/hugo-theme-text&#39;...
remote: Counting objects: 174, done.
remote: Compressing objects: 100% (133/133), done.
Receiving objecemote: Total 174 (delta 82), reused 123 (delta 35), pack-reused 0
Receiving objects:  49%
Receiving objects: 100% (174/174), 25.34 KiB | 0 bytes/s, done.
Resolving deltas: 100% (82/82), done.
Checking connectivity... done.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;作業環境が git 管理下にある場合は submodule として導入するとよい。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\hugo-env\www&amp;gt;git submodule add https://github.com/spiegel-im-spiegel/hugo-theme-text.git themes/hugo-theme-text
Cloning into &#39;themes/hugo-theme-text&#39;...
remote: Counting objects: 282, done.
remote: Compressing objects: 100% (11/11), done.
rRemote: Total 282 (delta 4), reused 0 (delta 0), pack-reused 271eceiving object
Receiving objects: 100% (282/282), 37.54 KiB | 0 bytes/s, done.
Resolving deltas: 100% (141/141), done.
Checking connectivity... done.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;では，例によっていきなりビルド。
の前に，作業環境の &lt;code&gt;layouts&lt;/code&gt; フォルダを空っぽにする。&lt;/p&gt;

&lt;p&gt;ではビルド。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\hugo-env\www&amp;gt;hugo --theme=&amp;quot;hugo-theme-text&amp;quot;
0 draft content
0 future content
1 pages created
0 paginator pages created
2 tags created
1 categories created
in 21 ms
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;これでこんな感じの &lt;code&gt;index.html&lt;/code&gt; ファイルができれば成功。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;ja&amp;quot;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;
&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width, initial-scale=1&amp;quot;&amp;gt;
&amp;lt;meta name=&amp;quot;generator&amp;quot; content=&amp;quot;Hugo 0.15-DEV&amp;quot; /&amp;gt;

&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;//fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic|Open+Sans:400,400italic,700,700italic|Inconsolata:400,700&amp;amp;subset=latin,latin-ext&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;//cdnjs.cloudflare.com/ajax/libs/cc-icons/1.2.1/css/cc-icons.min.css&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;/css/main.css&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;/css/text-baldanders.css&amp;quot;&amp;gt;

&amp;lt;link rel=&amp;quot;alternate&amp;quot; href=&amp;quot;/index.xml&amp;quot; type=&amp;quot;application/rss+xml&amp;quot; title=&amp;quot;Hello World!&amp;quot;&amp;gt;

&amp;lt;title&amp;gt;Hello World!&amp;lt;/title&amp;gt;

&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;



&amp;lt;div id=&#39;container&#39;&amp;gt;
&amp;lt;header role=&amp;quot;banner&amp;quot;&amp;gt;
&amp;lt;h1&amp;gt;&amp;lt;a href=&amp;quot;http://hello.example.com/&amp;quot;&amp;gt;Hello World!&amp;lt;/a&amp;gt; &amp;lt;a href=&#39;http://text.baldanders.info/index.xml&#39; title=&#39;Feed&#39;&amp;gt;&amp;lt;i class=&#39;fa fa-rss&#39;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/h1&amp;gt;

&amp;lt;/header&amp;gt;


&amp;lt;main role=&amp;quot;main&amp;quot;&amp;gt;
&amp;lt;article itemscope itemtype=&#39;http://schema.org/Blog&#39; itemref=&#39;maker&#39;&amp;gt;
&amp;lt;h2 itemprop=&#39;name&#39;&amp;gt;All Entries&amp;lt;/h2&amp;gt;
&amp;lt;ul style=&amp;quot;list-style:none;&amp;quot;&amp;gt;&amp;lt;li itemprop=&#39;blogPost&#39; itemscope itemtype=&#39;http://schema.org/BlogPosting&#39;&amp;gt;
	[&amp;lt;a href=&amp;quot;/practice&amp;quot;&amp;gt;practice&amp;lt;/a&amp;gt;] &amp;lt;a href=&amp;quot;http://hello.example.com/practice/hello/&amp;quot; itemprop=&#39;url&#39;&amp;gt;&amp;lt;strong itemprop=&#39;name&#39;&amp;gt;Hello!&amp;lt;/strong&amp;gt;&amp;lt;/a&amp;gt;
	&amp;lt;span style=&amp;quot;font-size:smaller;&amp;quot;&amp;gt;(&amp;lt;time&amp;gt;2015-09-05&amp;lt;/time&amp;gt;)
	 #&amp;lt;a href=&amp;quot;/tags/hello&amp;quot;&amp;gt;hello&amp;lt;/a&amp;gt; #&amp;lt;a href=&amp;quot;/tags/world&amp;quot;&amp;gt;world&amp;lt;/a&amp;gt;
	&amp;lt;/span&amp;gt;
&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;/article&amp;gt;
&amp;lt;/main&amp;gt;

&amp;lt;footer&amp;gt;

&amp;lt;nav role=&amp;quot;navigation&amp;quot;&amp;gt;
&amp;lt;ul class=&#39;cloud center&#39;&amp;gt;
&amp;lt;li&amp;gt;Powered by &amp;lt;a href=&#39;https://gohugo.io/&#39;&amp;gt;Hugo 0.15-DEV&amp;lt;/a&amp;gt; and &amp;lt;a href=&amp;quot;https://github.com/spiegel-im-spiegel/hugo-theme-text&amp;quot;&amp;gt;Text&amp;lt;/a&amp;gt;.&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&amp;lt;/nav&amp;gt;

&amp;lt;/footer&amp;gt;

&amp;lt;/div&amp;gt;

&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;だいぶ賑やかになった。&lt;/p&gt;

&lt;p&gt;この &lt;code&gt;index.html&lt;/code&gt; のテンプレートはこんな感じになっている。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;{{ partial &amp;quot;top.html&amp;quot; . }}
&amp;lt;head&amp;gt;
{{ partial &amp;quot;header.html&amp;quot; . }}
&amp;lt;title&amp;gt;{{ .Site.Title }}&amp;lt;/title&amp;gt;
{{ with .Site.Params.description }}&amp;lt;meta name=&amp;quot;description&amp;quot; content=&amp;quot;{{ . }}&amp;quot;&amp;gt;{{ end }}
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
{{ partial &amp;quot;prepare.html&amp;quot; . }}
&amp;lt;div id=&#39;container&#39;&amp;gt;&amp;lt;!-- Container Area --&amp;gt;
{{ partial &amp;quot;banner.html&amp;quot; . }}

&amp;lt;main role=&amp;quot;main&amp;quot;&amp;gt;
&amp;lt;article itemscope itemtype=&#39;http://schema.org/Blog&#39; itemref=&#39;maker&#39;&amp;gt;
&amp;lt;h2 itemprop=&#39;name&#39;&amp;gt;All Entries&amp;lt;/h2&amp;gt;
&amp;lt;ul style=&amp;quot;list-style:none;&amp;quot;&amp;gt;{{ range .Site.Pages }}{{ partial &amp;quot;li.html&amp;quot; . }}{{ end }}&amp;lt;/ul&amp;gt;
&amp;lt;/article&amp;gt;
&amp;lt;/main&amp;gt;

{{ partial &amp;quot;footer.html&amp;quot; . }}
&amp;lt;/div&amp;gt;&amp;lt;!-- Container Area --&amp;gt;
{{ partial &amp;quot;cleanup.html&amp;quot; . }}
&amp;lt;/body&amp;gt;
{{ partial &amp;quot;end.html&amp;quot; . }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;この中で &lt;code&gt;{{ partial &amp;quot;top.html&amp;quot; . }}&lt;/code&gt; となっている部分が partial template を呼び出している部分で，テンプレートの中にテンプレートを入れ子にすることができる。&lt;/p&gt;

&lt;h3 id=&#34;partial-template&#34;&gt;Partial Template&lt;/h3&gt;

&lt;p&gt;Partial template を格納する場所は決まっている。
では， &lt;a href=&#34;https://github.com/spiegel-im-spiegel/hugo-theme-text&#34;&gt;spiegel-im-spiegel/hugo-theme-text&lt;/a&gt; の構成を見てみよう。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\hugo-env\www&amp;gt;tree /f themes\hugo-theme-text
C:\HUGO-ENV\WWW\THEMES\HUGO-THEME-TEXT
│  LICENSE
│  README.md
│  theme.toml
│
├─archetypes
│      default.md
│
├─images
│      screenshot.png
│      tn.png
│
├─layouts
│  │  index.html
│  │  rss.xml
│  │
│  ├─partials
│  │      banner.html
│  │      cc-license.html
│  │      ccl-rss.html
│  │      cleanup.html
│  │      end.html
│  │      feedback.html
│  │      footer.html
│  │      header-include.html
│  │      header.html
│  │      li.html
│  │      navi.html
│  │      prepare.html
│  │      social.html
│  │      top.html
│  │
│  └─_default
│          list.html
│          single.html
│          terms.html
│
└─static
    ├─css
    │      main.css
    │      text-baldanders.css
    │
    └─images
            avatar.png
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;layouts/partials&lt;/code&gt; フォルダに多くのファイルが格納されているのがお分かりだろうか。
これが partial template である。&lt;/p&gt;

&lt;p&gt;たとえば &lt;code&gt;layouts/partials/top.html&lt;/code&gt; の中身は以下のようになっている。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
{{ with .Site.LanguageCode }}&amp;lt;html lang=&amp;quot;{{ . }}&amp;quot;&amp;gt;{{ else }}&amp;lt;html&amp;gt;{{ end }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;また &lt;code&gt;layouts/partials/header.html&lt;/code&gt; は&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-html&#34;&gt;&amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;
&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width, initial-scale=1&amp;quot;&amp;gt;
{{ .Hugo.Generator }}
{{ with .Site.Params.favicon }}&amp;lt;link rel=&amp;quot;icon&amp;quot; type=&amp;quot;image/x-icon&amp;quot; href=&amp;quot;{{ . }}&amp;quot;&amp;gt;{{ end }}
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;//fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic|Open+Sans:400,400italic,700,700italic|Inconsolata:400,700&amp;amp;subset=latin,latin-ext&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;//cdnjs.cloudflare.com/ajax/libs/cc-icons/1.2.1/css/cc-icons.min.css&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;/css/main.css&amp;quot;&amp;gt;
&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;/css/text-baldanders.css&amp;quot;&amp;gt;
{{ partial &amp;quot;header-include.html&amp;quot; . }}
&amp;lt;link rel=&amp;quot;alternate&amp;quot; href=&amp;quot;/index.xml&amp;quot; type=&amp;quot;application/rss+xml&amp;quot; title=&amp;quot;{{ .Site.Title }}&amp;quot;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;となっていて，内部でさらに &lt;code&gt;layouts/partials/header-include.html&lt;/code&gt; を呼び出している。
実は &lt;code&gt;layouts/partials/header-include.html&lt;/code&gt; の中身は空である。
ユーザの作業環境側に &lt;code&gt;layouts/partials/header-include.html&lt;/code&gt; ファイルを設置すればそちらが優先して読み込まれるため，これでユーザ側がカスタマイズできるようになっている。&lt;/p&gt;

&lt;h3 id=&#34;おまけ-author-情報&#34;&gt;【おまけ】 Author 情報&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/spiegel-im-spiegel/hugo-theme-text&#34;&gt;spiegel-im-spiegel/hugo-theme-text&lt;/a&gt; では &lt;code&gt;config.toml&lt;/code&gt; に以下の author 情報を入れるとページに反映される。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[params.author]
name      = &amp;quot;Spiegel&amp;quot;
url       = &amp;quot;http://www.baldanders.info/spiegel/profile/&amp;quot;
avatar    = &amp;quot;/images/avatar.jpg&amp;quot;
license   = &amp;quot;by-sa&amp;quot;
github    = &amp;quot;spiegel-im-spiegel&amp;quot;
twitter   = &amp;quot;spiegel_2007&amp;quot;
medium    = &amp;quot;@spiegel&amp;quot;
instagram = &amp;quot;spiegel_2007&amp;quot;
facebook  = &amp;quot;spiegel.im.spiegel&amp;quot;
linkedin  = &amp;quot;spiegelimspiegel&amp;quot;
flattr    = &amp;quot;spiegel&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/21504929379/&#34;&gt;&lt;img srcset=&#34;https://farm6.staticflickr.com/5779/21504929379_e29706db7c.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Top Page of “hugo-theme-text”&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/21504929379/&#34;&gt;Top Page of “hugo-theme-text”&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;記事ページでは front matter に &lt;code&gt;[author]&lt;/code&gt; 項目を加える事で front matter の値が優先して表示される。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;+++
date = &amp;quot;2015-09-05T16:40:41+09:00&amp;quot;
draft = false
title = &amp;quot;Hello!&amp;quot;
categories = [ &amp;quot;hugo&amp;quot; ]
tags = [ &amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot; ]

[author]
  avatar = &amp;quot;/images/avatar.jpg&amp;quot;
  facebook = &amp;quot;spiegel.im.spiegel&amp;quot;
  flattr = &amp;quot;spiegel&amp;quot;
  github = &amp;quot;spiegel-im-spiegel&amp;quot;
  instagram = &amp;quot;spiegel_2007&amp;quot;
  license = &amp;quot;by-sa&amp;quot;
  linkedin = &amp;quot;spiegelimspiegel&amp;quot;
  medium = &amp;quot;@spiegel&amp;quot;
  name = &amp;quot;Spiegel&amp;quot;
  twitter = &amp;quot;spiegel_2007&amp;quot;
  url = &amp;quot;http://www.baldanders.info/spiegel/profile/&amp;quot;
+++
&lt;/code&gt;&lt;/pre&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://www.flickr.com/photos/spiegel/21069070064/&#34;&gt;&lt;img srcset=&#34;https://farm1.staticflickr.com/718/21069070064_4a0e51cbbd.jpg 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Entry Page of “hugo-theme-text”&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://www.flickr.com/photos/spiegel/21069070064/&#34;&gt;Entry Page of “hugo-theme-text”&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;他にも favicon や Disqus などを設置可能。
詳しくは &lt;a href=&#34;https://github.com/spiegel-im-spiegel/hugo-theme-text#simple-text-hugo-theme&#34;&gt;&lt;code&gt;README.md&lt;/code&gt;&lt;/a&gt; を参照のこと。&lt;/p&gt;

&lt;h2 id=&#34;bookmark&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://wdkk.co.jp/lab/hugo/&#34;&gt;Hugoサイト構築 | Watanabe-DENKI Inc. 渡辺電気株式会社&lt;/a&gt; : お勧め！&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&#34;http://text.baldanders.info/hugo/bookmark/&#34;&gt;Hugo に関するブックマークはこちら&lt;/a&gt;。&lt;/p&gt;
</content>
	</entry>
	
</feed>
