<feed xmlns="http://www.w3.org/2005/Atom" xmlns:cc="http://web.resource.org/cc/">
	<title>List of mua - text.Baldanders.info</title>
	<link rel="alternate" type="text/html" href="https://text.baldanders.info/tags/mua/" />
	<link rel="self" type="application/atom+xml" href="https://text.baldanders.info/tags/mua/index.xml" />
	<id>tag:text.Baldanders.info,2019-11-10:/tags</id>
	<updated>2019-11-10T16:43:28+09:00</updated>
	<subtitle>帰ってきた「しっぽのさきっちょ」</subtitle>
	<icon>https://text.baldanders.info/images/avatar.jpg</icon>
	<logo>https://text.baldanders.info/images/avatar.jpg</logo>

	<entry>
		<title>結局 Thunderbird もインストールし直すことにした</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2019/11/reinstalling-thunderbird/" />
		<id>tag:text.Baldanders.info,2019-11-10:/remark/2019/11/reinstalling-thunderbird/</id>
		<published>2019-11-10T07:43:28+00:00</published>
		<updated>2019-11-10T08:05:47+00:00</updated>
		<summary>どうやら Ubuntu は Thunderbird をまともにメンテナンスする気がないらしいとの結論に至った。そこで APT による管理はすっぱり諦めて自前で導入・管理することにした。</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">

&lt;p&gt;&lt;a href=&#34;https://www.ubuntu.com/&#34; title=&#34;The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu&#34;&gt;Ubuntu&lt;/a&gt; が &lt;a href=&#34;https://text.baldanders.info/release/2019/10/upgrade-ubuntu-19_10/&#34; title=&#34;Ubuntu 19.10 にアップグレードする&#34;&gt;19.10 にアップグレード&lt;/a&gt;されて &lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; が 68 ベースになったまではよかったが，そこから全くメンテされなくなってしまった。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://debian-handbook.info/browse/ja-JP/stable/apt.html&#34; title=&#34;第 6 章 メンテナンスと更新、APT ツール&#34;&gt;APT&lt;/a&gt; 管理下の &lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; は2019年11月時点で&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ apt show thunderbird
Package: thunderbird
Version: 1:68.1.2+build1-0ubuntu1
Priority: optional
Section: mail
Origin: Ubuntu
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;となっているが，実際には既に 68.2.2 がリリースされている。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.thunderbird.net/en-US/thunderbird/68.2.2/releasenotes/&#34;&gt;Thunderbird — Release Notes (68.2.2) — Mozilla&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;そういえば 60.9.0 がリリースされたときも &lt;a href=&#34;https://debian-handbook.info/browse/ja-JP/stable/apt.html&#34; title=&#34;第 6 章 メンテナンスと更新、APT ツール&#34;&gt;APT&lt;/a&gt; で配信可能になるまで1ヶ月かかったんだよな。&lt;/p&gt;

&lt;p&gt;ちうわけで，どうやら &lt;a href=&#34;https://www.ubuntu.com/&#34; title=&#34;The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu&#34;&gt;Ubuntu&lt;/a&gt; は &lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; をまともにメンテナンスする気がないらしいとの結論に至った。
以前に「&lt;a href=&#34;https://kledgeb.blogspot.com/2019/04/ubuntu-1910-3-geary.html&#34; title=&#34;Ubuntu 19.10 その3 - デフォルトのメールクライアントをGearyに変更する提案 - kledgeb&#34;&gt;デフォルトのメールクライアントをGearyに変更する提案&lt;/a&gt;」とかあったようなので仕方がないのかもしれないが，（鍵管理を含めて）まともに OpenPGP 暗号化が使える MUA は殆どない&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:mua1&#34;&gt;&lt;a href=&#34;#fn:mua1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; ので &lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; が「使えない」のは非常に困るわけですよ。&lt;/p&gt;

&lt;p&gt;そこで &lt;a href=&#34;https://debian-handbook.info/browse/ja-JP/stable/apt.html&#34; title=&#34;第 6 章 メンテナンスと更新、APT ツール&#34;&gt;APT&lt;/a&gt; による管理はすっぱり諦めて自前で導入・管理することにした。
といっても&lt;a href=&#34;https://www.thunderbird.net/en-US/thunderbird/all/&#34; title=&#34;Download Thunderbird in your language — Mozilla&#34;&gt;ダウンロードページ&lt;/a&gt;でプラットフォームと言語に応じたバイナリをダウンロードしてローカルの適当な場所で展開するだけだけどね&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:inst1&#34;&gt;&lt;a href=&#34;#fn:inst1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;設定およびメールデータは &lt;code&gt;~/thunderbird/&lt;/code&gt; ディレクトリ以下に格納されているが，バックアップをとった上で，バッサリ削除して最初からやり直した。
実際には，パソコンと携帯端末とでメールデータを共有するために，IMAP で管理しているので（だからこそ E2E 暗号化ができることが重要なんだけどね）特に問題はなかった。
&lt;a href=&#34;https://addons.thunderbird.net/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; も問題なく動作することを確認済み。&lt;/p&gt;

&lt;p&gt;よーし，うむうむ，よーし。&lt;/p&gt;

&lt;h2 id=&#34;toc_0&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.thunderbird.net/en-US/thunderbird/68.0/system-requirements/&#34;&gt;Thunderbird — 68.0 System Requirements — Mozilla&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://vitux.com/how-to-install-and-setup-thunderbird-email-client-in-ubuntu/&#34;&gt;How to Install and Setup Thunderbird Email Client in Ubuntu&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kzmmtmt.pgw.jp/?p=842&#34;&gt;GNOME3でアプリケーションメニューにランチャーを追加する (alacarteを使用しない方法) – Crow&#39;s eye&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://blog.mozilla.org/thunderbird/2019/10/thunderbird-enigmail-and-openpgp/&#34;&gt;Thunderbird, Enigmail and OpenPGP | The Mozilla Thunderbird Blog&lt;/a&gt; : 将来バージョンで &lt;a href=&#34;https://addons.thunderbird.net/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; は &lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; に組み込まれるそうだ&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://text.baldanders.info/openpgp/encrypted-mail-with-thunderbird/&#34;&gt;Thunderbird でメール暗号化&lt;/a&gt; : Windows 用に書いたが Linux でも同じように使えるので大丈夫&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:mua1&#34;&gt;ブラウザ上で動作する Web メール用の暗号化ツールとしては &lt;a href=&#34;https://www.mailvelope.com/&#34;&gt;Mailvelope&lt;/a&gt; が有名で，私も一応インストールしているが，鍵管理が独特で気持ち悪いので実際には使ってない。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:mua1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:inst1&#34;&gt;&lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; はインストール先ディレクトリを変えると別のインスタンスとみなしてそれぞれ別のプロファイルを作成するので注意が必要だ。この辺をコントロールするには &lt;code&gt;~/thunderbird/&lt;/code&gt; ディレクトリにある &lt;code&gt;installs.ini&lt;/code&gt; および &lt;code&gt;profiles.ini&lt;/code&gt; 各ファイルを弄る必要があるらしい。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:inst1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry><entry>
		<title>メール・サービスを立てずにコマンドラインでメールを送信する</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2019/06/send-mail-without-mail-service/" />
		<id>tag:text.Baldanders.info,2019-06-01:/remark/2019/06/send-mail-without-mail-service/</id>
		<published>2019-06-01T14:45:58+00:00</published>
		<updated>2019-06-02T01:15:17+00:00</updated>
		<summary>調べてみたら msmtp なるツールが良さげである。今回は msmtp を構成してメールを送信してみる。</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">

&lt;p&gt;cron で回したプロセスの実行結果をメールで送信することを考える。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.ubuntu.com/&#34; title=&#34;The leading operating system for PCs, IoT devices, servers and the cloud | Ubuntu&#34;&gt;Ubuntu&lt;/a&gt; はインストール直後の既定状態ではメール・サービスは入ってない。
したがって cron の実行結果（標準出力等に吐き出されるもの）は何処にも通知されない。
これはこれで合理的な設計なのだが（cron の実行結果でメールボックスが溢れたりすることもないし），やはり結果をメールで通知したいこともある。
かといって，そのためにわざわざデスクトップ・パソコンにメール・サービスを入れるのはナンセンスであろう。&lt;/p&gt;

&lt;p&gt;自前でメール・サービスを立てずに外部のメール・サーバにメールを流す送信専用の簡易 MUA があれば便利である。
そこで調べてみたら &lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; なるツールが良さげである&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:ssmtp1&#34;&gt;&lt;a href=&#34;#fn:ssmtp1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。
今回は &lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; を構成してコマンドラインでメールを送信するところまでやってみよう。&lt;/p&gt;

&lt;h2 id=&#34;toc_0&#34;&gt;&lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; のインストール&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; は APT で導入可能である。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ apt show msmtp
Package: msmtp
Version: 1.8.3-1
Priority: extra
Section: universe/mail
Origin: Ubuntu
Maintainer: Ubuntu Developers &amp;lt;ubuntu-devel-discuss@lists.ubuntu.com&amp;gt;
Original-Maintainer: Emmanuel Bouthenot &amp;lt;kolter@debian.org&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;なので早速インストールする。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ sudo apt install msmtp msmtp-mta&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;msmtp-mta&lt;/code&gt; パッケージは cron から &lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; を利用するのに必要なので併せてインストールしておく。
一応，動作確認しておこう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ msmtp --version
msmtp version 1.8.3
Platform: x86_64-pc-linux-gnu
TLS/SSL library: GnuTLS
Authentication library: GNU SASL
Supported authentication methods:
plain scram-sha-1 external gssapi cram-md5 digest-md5 login ntlm 
IDN support: enabled
NLS: enabled, LOCALEDIR is /usr/share/locale
Keyring support: none
System configuration file name: /etc/msmtprc
User configuration file name: /home/username/.msmtprc

Copyright (C) 2019 Martin Lambers and others.
This is free software.  You may redistribute copies of it under the terms of
the GNU General Public License &amp;lt;http://www.gnu.org/licenses/gpl.html&amp;gt;.
There is NO WARRANTY, to the extent permitted by law.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;よしよし。&lt;/p&gt;

&lt;h2 id=&#34;toc_1&#34;&gt;&lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; の設定&lt;/h2&gt;

&lt;p&gt;まずは &lt;code&gt;~/.msmtprc&lt;/code&gt; ファイルを作成して外部のメール・サーバを定義する&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:cfg1&#34;&gt;&lt;a href=&#34;#fn:cfg1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。
&lt;code&gt;~/.msmtprc&lt;/code&gt; の雛形ファイルは以下にあるので参考になるだろう。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/usr/share/doc/msmtp/examples/msmtprc-user.example&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;このファイルを元にして Gmail のメール・サーバにアクセスする設定を記述してみる。
こんな感じ&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:passwd1&#34;&gt;&lt;a href=&#34;#fn:passwd1&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;# Set default values for all following accounts.
defaults

# Use the mail submission port 587 instead of the SMTP port 25.
port 587

# Always use TLS.
tls on

# Gmail service
account gmail

# Host name of the SMTP server
host smtp.gmail.com

# Envelope-from address
from username@gmail.com

# Authentication. The password is given using one of five methods, see below.
auth on
user username@gmail.com

# Password method 2: Store the password in an encrypted file, and tell msmtp
# which command to use to decrypt it. This is usually used with GnuPG, as in
# this example. Usually gpg-agent will ask once for the decryption password.
#passwordeval gpg2 --no-tty -q -d ~/.msmtp-password.gpg

# Password method 3: Store the password directly in this file. Usually it is not
# a good idea to store passwords in plain text files. If you do it anyway, at
# least make sure that this file can only be read by yourself.
password password_string

# Set a default account
account default : gmail&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;~/.msmtprc&lt;/code&gt; ファイルの権限を変更するのも忘れずに。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ chmod 0600 ~/.msmtprc&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これで準備 OK。
試しにコマンドラインでメールを送信してみよう。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ echo &amp;#34;hello there.&amp;#34; | msmtp -a gmail username@gmail.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これで &lt;code&gt;username@gmail.com&lt;/code&gt; 宛に “hello there.” という内容でメールが届けば成功である。
ちなみに &lt;code&gt;-a&lt;/code&gt; オプションは省略できる。
この場合 &lt;code&gt;account default&lt;/code&gt; で指定されたアカウント情報で送信される。&lt;/p&gt;

&lt;h2 id=&#34;toc_2&#34;&gt;cron との連携&lt;/h2&gt;

&lt;p&gt;では cron との連携を試してみよう。
cron の設定方法については割愛する。
ググればいくらでも出てくるし。&lt;/p&gt;

&lt;p&gt;まずはパソコンのユーザ・アカウントとメールアドレスを連携させるために &lt;code&gt;/etc/aliases&lt;/code&gt; ファイルを作成する（これがないと &lt;code&gt;username@hostname&lt;/code&gt; 宛にメールを送ろうとする）。
内容はこんな感じ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;username: username@gmail.com
root: username@gmail.com
default: username@gmail.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;さらに &lt;code&gt;~/.msmtprc&lt;/code&gt; ファイルに以下の記述を追加する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;# aliases file
aliases /etc/aliases&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これで &lt;a href=&#34;https://marlam.de/msmtp/&#34;&gt;msmtp&lt;/a&gt; 側の準備は完了。&lt;/p&gt;

&lt;p&gt;テスト用のプロセスを crontab で定義する。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ crontab -e
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;内容は例えばこんな感じ。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;*/5 * * * * MAILTO=username ls&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これで &lt;code&gt;username&lt;/code&gt; のメールアドレス宛に5分おきに &lt;code&gt;ls&lt;/code&gt; コマンドの実行結果をメール送信する。
かなりウザいので動作確認できたらソッコーで削除しないと（笑）&lt;/p&gt;

&lt;p&gt;うまくいかない場合は &lt;code&gt;/var/log/syslog&lt;/code&gt; を見てみるとヒントになるかもしれない。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;$ cat /var/log/syslog | grep sendmail&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;toc_3&#34;&gt;パスワード情報の暗号化&lt;/h2&gt;

&lt;p&gt;外部メール・サーバへの送信で認証を行う場合は &lt;code&gt;~/.msmtprc&lt;/code&gt; ファイルに認証用のパスワードを設定する必要があるが，平文で保存されるため，いかにも不用心である。
そこでパスワード情報を暗号化することを考える。&lt;/p&gt;

&lt;p&gt;具体的には &lt;code&gt;~/.msmtprc&lt;/code&gt; ファイルの &lt;code&gt;password&lt;/code&gt; 項目を以下の記述で置き換える。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;passwordeval gpg --no-tty -q -d ~/.msmtp-password.gpg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;~/.msmtp-password.gpg&lt;/code&gt; が暗号化されたパスワード情報を格納するファイルで &lt;a href=&#34;https://gnupg.org/&#34; title=&#34;The GNU Privacy Guard&#34;&gt;GnuPG&lt;/a&gt; で暗号化されている。
&lt;code&gt;~/.msmtp-password.gpg&lt;/code&gt; ファイルを作成するには以下のコマンドラインを実行する。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;gpg --encrypt -o ~/.msmtp-gmail.gpg -r username@gmail.com -&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最後のハイフン（&lt;code&gt;-&lt;/code&gt;）を忘れずに。
これで標準入力からパスワードを入力し改行コードを入力した後 &lt;code&gt;ctrl-d&lt;/code&gt; で処理を抜ければ完了である&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:pw1&#34;&gt;&lt;a href=&#34;#fn:pw1&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;p&gt;メール送信時には復号のために &lt;a href=&#34;https://gnupg.org/&#34; title=&#34;The GNU Privacy Guard&#34;&gt;GnuPG&lt;/a&gt; がパスフレーズを要求するのでご注意を&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:gpg1&#34;&gt;&lt;a href=&#34;#fn:gpg1&#34;&gt;5&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;h2 id=&#34;toc_4&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.debian.org/msmtp&#34;&gt;msmtp - Debian Wiki&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://wiki.archlinux.jp/index.php/Msmtp&#34;&gt;msmtp - ArchWiki&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://qiita.com/iganari/items/5a61ec93d989f7c77a2c&#34;&gt;各ユーザのcrontabファイルの場所について - Qiita&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://qiita.com/tossh/items/e135bd063a50087c3d6a&#34;&gt;初心者向けcronの使い方 - Qiita&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://bakunyo.hatenablog.com/entry/2013/06/20/crontab%E4%BD%BF%E3%81%84%E6%96%B9%E3%81%BE%E3%81%A8%E3%82%81%E3%80%82&#34;&gt;crontab使い方まとめ。 - ばくのエンジニア日誌&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://qiita.com/UNILORN/items/a1a3f62409cdb4256219&#34;&gt;Cronの使い方とテクニックと詰まったところ - Qiita&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:ssmtp1&#34;&gt;ググってみると &lt;a href=&#34;https://wiki.debian.org/sSMTP&#34; title=&#34;sSMTP - Debian Wiki&#34;&gt;sSMTP&lt;/a&gt; に関する記事が頻出したが，残念なことに &lt;a href=&#34;https://wiki.debian.org/sSMTP&#34; title=&#34;sSMTP - Debian Wiki&#34;&gt;sSMTP&lt;/a&gt; はもはやメンテナンスされていないようである。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:ssmtp1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:cfg1&#34;&gt;マシン全体で設定する場合は &lt;code&gt;/etc/msmtprc&lt;/code&gt; ファイルに設定を記述する。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:cfg1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:passwd1&#34;&gt;&lt;code&gt;password&lt;/code&gt; の項目にはパスワードを記述するが， Google サインイン用のパスワードではなく「アプリ・パスワード」をセットする（Googleへのサインインに2要素認証を使っていることが前提）。アプリ・パスワードは「&lt;a href=&#34;https://myaccount.google.com/&#34;&gt;Google アカウント&lt;/a&gt;」のページで設定できる。アプリやプラットフォームごとに異なるアプリ・パスワードを設定するのがコツである。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:passwd1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:pw1&#34;&gt;もちろんパイプを使ってパスワードを入力することも可能だが，コマンドラインに履歴が残ってしまうので絶対にやらないこと。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:pw1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:gpg1&#34;&gt;&lt;a href=&#34;https://gnupg.org/&#34; title=&#34;The GNU Privacy Guard&#34;&gt;GnuPG&lt;/a&gt; の鍵を作成する際にパスフレーズの入力を省略すれば復号処理を自動化できるが秘密鍵の中身が丸見えになってしまうので取り扱いには注意が必要である。パスワード暗号化用の専用鍵を作って運用するのが無難だろう。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:gpg1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry><entry>
		<title>Thunderbird でメール暗号化</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/openpgp/encrypted-mail-with-thunderbird/" />
		<id>tag:text.Baldanders.info,2018-06-25:/openpgp/encrypted-mail-with-thunderbird/</id>
		<published>2018-06-25T12:32:25+00:00</published>
		<updated>2019-05-20T14:01:23+00:00</updated>
		<summary>今回は Thunderbird で OpenPGP 暗号化メールをやり取りする手順について簡単に紹介する。</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">

&lt;p&gt;フィードバックで少しやり取りして分かったのだが JPCERT/CC の記事は古いまま更新されていないようだ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jpcert.or.jp/magazine/security/pgpquick.html&#34;&gt;はじめての暗号化メール (Thunderbird編)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;なので今回は &lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; で &lt;a href=&#34;http://openpgp.org/&#34;&gt;OpenPGP&lt;/a&gt; 暗号化メールをやり取りする手順について簡単に紹介する。
なお &lt;a href=&#34;https://gnupg.org/&#34; title=&#34;The GNU Privacy Guard&#34;&gt;GnuPG&lt;/a&gt; の導入と鍵の生成は完了しているものとする。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://text.baldanders.info/openpgp/using-gnupg-for-windows-1/&#34;&gt;GnuPG for Windows インストール編&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://text.baldanders.info/openpgp/using-gnupg-for-windows-2/&#34;&gt;GnuPG for Windows : gpg-agent について&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://text.baldanders.info/openpgp/gnupg-cheat-sheet/&#34;&gt;GnuPG チートシート（鍵作成から失効まで）&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;toc_0&#34;&gt;&lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; の導入&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://www.thunderbird.net/&#34; title=&#34;Thunderbird — Software made to make email easier. — Mozilla&#34;&gt;Thunderbird&lt;/a&gt; で &lt;a href=&#34;http://openpgp.org/&#34;&gt;OpenPGP&lt;/a&gt; 暗号化メールをやり取りするには &lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; アドオンを導入する。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/29123820638/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/29123820638_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/29123820638_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Search Enigmail&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/29123820638/&#34;&gt;Search Enigmail&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;この状態で &lt;code&gt;[インストール]&lt;/code&gt; ボタンを押してインストールを完了させる。&lt;/p&gt;

&lt;h2 id=&#34;toc_1&#34;&gt;&lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; の設定&lt;/h2&gt;

&lt;p&gt;インストールが完了したらメニューから &lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; の「セットアップウィザード」を開く。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/41186104180/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/41186104180_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/41186104180_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail menu&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/41186104180/&#34;&gt;Enigmail menu&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42946809382/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42946809382_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42946809382_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail setup-wizard (1)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42946809382/&#34;&gt;Enigmail setup-wizard (1)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ここでは初心者向けの設定を紹介する。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42278121714/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42278121714_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42278121714_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail setup-wizard (2)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42278121714/&#34;&gt;Enigmail setup-wizard (2)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;メールアカウントに対応する鍵を既に作成している場合はその鍵を選択する（&lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; はメールアカウントと &lt;a href=&#34;http://openpgp.org/&#34;&gt;OpenPGP&lt;/a&gt; 鍵との関連をメールアドレスで行っている）。
対応する鍵がない場合には「メッセージ署名/暗号に使用する鍵ペアを新規に作成する」を選択して &lt;a href=&#34;http://openpgp.org/&#34;&gt;OpenPGP&lt;/a&gt; 鍵を作成する&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:key1&#34;&gt;&lt;a href=&#34;#fn:key1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/29124707788/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/29124707788_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/29124707788_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail setup-wizard (3)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/29124707788/&#34;&gt;Enigmail setup-wizard (3)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42947411712/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42947411712_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42947411712_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail setup-wizard (4)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42947411712/&#34;&gt;Enigmail setup-wizard (4)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42278604034/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42278604034_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42278604034_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail setup-wizard (5)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42278604034/&#34;&gt;Enigmail setup-wizard (5)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;ここで失効証明書を作っておく&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:rvk1&#34;&gt;&lt;a href=&#34;#fn:rvk1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;。
&lt;code&gt;[失効証明書の生成]&lt;/code&gt; ボタンを押して失効証明書を保存すると &lt;code&gt;[次へ]&lt;/code&gt; ボタンが有効になる。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42997052861/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42997052861_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42997052861_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail setup-wizard (6)&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42997052861/&#34;&gt;Enigmail setup-wizard (6)&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;これでセットアップ完了。
なお，アカウント設定ではもう少し詳細な設定が可能である。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/29125191098/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/29125191098_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/29125191098_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Enigmail settings&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/29125191098/&#34;&gt;Enigmail settings&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;toc_2&#34;&gt;暗号化メールの作成と表示&lt;/h2&gt;

&lt;p&gt;では自分自身宛にメールを作成して動作確認してみよう。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/29125311968/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/29125311968_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/29125311968_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Make mail&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/29125311968/&#34;&gt;Make mail&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;矢印で示した部分で暗号化および電子署名の有無を指定する。
左側が暗号化ボタン，右側が電子署名ボタンである。
2つのボタンはトグルになっていて，押す度にオン・オフを切り替えることができる。
上の図では暗号化と電子署名の両方を有効にしている。&lt;/p&gt;

&lt;p&gt;暗号化または電子署名はメール送信時に行われる。
送信時に件名を保護するか問い合わせがある。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42948011252/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42948011252_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42948011252_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Encrypt title&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42948011252/&#34;&gt;Encrypt title&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;code&gt;[件名を保護する]&lt;/code&gt; を選択すると件名を “Encrypted Message” に置き換えて送信する。
本来の件名は復号時に表示される。&lt;/p&gt;

&lt;p&gt;では実際に受信したメールを復号して表示してみよう。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/29125520728/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/29125520728_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/29125520728_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;Receive message&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/29125520728/&#34;&gt;Receive message&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;メールの復号と署名検証が正しく行われていることが確認できた。&lt;/p&gt;

&lt;h2 id=&#34;toc_3&#34;&gt;&lt;a href=&#34;http://openpgp.org/&#34;&gt;OpenPGP&lt;/a&gt; 鍵の管理&lt;/h2&gt;

&lt;p&gt;メニューから &lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; の「鍵の管理」を開く。&lt;/p&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/41188654830/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/41188654830_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/41188654830_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;key management&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/41188654830/&#34;&gt;key management&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure style=&#39;margin:0 auto;text-align:center;&#39;&gt;
&lt;a href=&#34;https://photo.baldanders.info/flickr/42949496932/&#34;&gt;&lt;img src=&#34;https://photo.baldanders.info/flickr/image/42949496932_m.png&#34; srcset=&#34;https://photo.baldanders.info/flickr/image/42949496932_m.png 500w&#34; sizes=&#34;(min-width:600px) 500px, 80vw&#34; alt=&#34;enigmail-key-management&#34;&gt;&lt;/a&gt;
&lt;figcaption&gt;&lt;a href=&#34;https://photo.baldanders.info/flickr/42949496932/&#34;&gt;enigmail-key-management&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;鍵の管理で公開鍵のインポート・エクスポートや電子署名等の操作ができる。&lt;/p&gt;

&lt;h2 id=&#34;toc_4&#34;&gt;ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.pep.security/&#34;&gt;p≡p Security&lt;/a&gt; : &lt;a href=&#34;https://addons.mozilla.org/thunderbird/addon/enigmail/&#34; title=&#34;Enigmail :: Add-ons for Thunderbird&#34;&gt;Enigmail&lt;/a&gt; は &lt;a href=&#34;https://www.pep.security/&#34; title=&#34;p≡p Security&#34;&gt;p≡p&lt;/a&gt; にも対応しているらしいが試してない&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:key1&#34;&gt;セットアップウィザードでは RSA 4096ビット長の &lt;a href=&#34;http://openpgp.org/&#34;&gt;OpenPGP&lt;/a&gt; 鍵を生成する。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:key1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:rvk1&#34;&gt;失効証明書は鍵を失効させる際に必要となる。失効した公開鍵を配布するのを忘れずに。詳しくは「&lt;a href=&#34;https://text.baldanders.info/openpgp/gnupg-cheat-sheet/&#34;&gt;GnuPG チートシート（鍵作成から失効まで）&lt;/a&gt;」を参照のこと。
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:rvk1&#34;&gt;&lt;sup&gt;[return]&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</content>
	</entry><entry>
		<title>OpenPGP および S/MIME メールクライアントの脆弱性について</title>
		<link rel="alternate" type="text/html" href="https://text.baldanders.info/remark/2018/05/critical-openpgp-vulnerability/" />
		<id>tag:text.Baldanders.info,2018-05-15:/remark/2018/05/critical-openpgp-vulnerability/</id>
		<published>2018-05-15T12:15:42+00:00</published>
		<updated>2019-07-01T13:48:09+00:00</updated>
		<summary>昨日くらいから GnuPG のメーリングリストが騒がしかったが，これのせいか。</summary>
		<author>
			<name>Spiegel</name>
			<uri>https://baldanders.info/profile/</uri>
		</author>
		
	<link rel="cc:license" type="application/rdf+xml" href="https://creativecommons.org/licenses/by-sa/4.0/rdf" />


		<content type="html" xml:lang="ja" xml:base="https://text.baldanders.info/">

&lt;p&gt;昨日くらいから &lt;a href=&#34;https://lists.gnupg.org/pipermail/gnupg-users/2018-May/060315.html&#34; title=&#34;Efail or OpenPGP is safer than S/MIME&#34;&gt;GnuPG のメーリングリスト&lt;/a&gt;が騒がしかったが，これのせいか。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://efail.de/&#34;&gt;EFAIL describes vulnerabilities in the end-to-end encryption technologies OpenPGP and S/MIME that leak the plaintext of encrypted emails.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;a href=&#34;https://efail.de/efail-attack-paper.pdf&#34;&gt;Efail: Breaking S/MIME and OpenPGP Email Encryption using Exfiltration Channels &lt;sup&gt;&lt;i class=&#34;far fa-file-pdf&#34;&gt;&lt;/i&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&#34;https://jvndb.jvn.jp/ja/contents/2017/JVNDB-2017-012995.html&#34; title=&#34;OpenPGP および S/MIME メールクライアントにメッセージの取り扱いに関する脆弱性&#34;&gt;JVNDB-2017-012995&lt;/a&gt; が発行されたので以下に書き出しておく（早速 &lt;a href=&#34;https://github.com/spiegel-im-spiegel/jvnman&#34; title=&#34;spiegel-im-spiegel/jvnman: JVN Vulnerability Data Management&#34;&gt;jvnman&lt;/a&gt; を使うことになるとは&lt;code&gt;w&lt;/code&gt;）。&lt;/p&gt;

&lt;figure&gt;
&lt;blockquote&gt;&lt;h2&gt;脆弱性の概要&lt;/h2&gt;

&lt;p&gt;平文メッセージが漏えいする可能性があります。  OpenPGP および S/MIME をサポートする電子メールクライアントには、攻撃者が細工したコンテンツを挿入した暗号化メールをユーザのメールクライアントで復号させることにより、平文を送信するためのチャネルを確立することが可能です。
発見者はこの脆弱性を用いた攻撃を &amp;quot;CBC/CFB gadget attack&amp;quot; と呼んでいます。例えば HTML image タグを挿入させることにより、復号されたメッセージが HTTP リクエストの一部として送信されてしまう可能性があります。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CVE-2017-17688: OpenPGP CFB Attacks&lt;/li&gt;
&lt;li&gt;CVE-2017-17689: S/MIME CBC Attacks&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;また、一部のメールクライアントでは、マルチパートの MIME メッセージを正しく分離して処理しないため、攻撃者は暗号化されたメールを平文の MIME パートに含めることが可能になります。この場合、CBC/CFB gadget attack を実行することなく平文メッセージが送信されてしまう可能性があります。  詳細は、&lt;a href=&#34;https://efail.de/efail-attack-paper.pdf&#34; target=&#34;blank&#34;&gt;発見者が提供する論文&lt;/a&gt;を参照して下さい。&lt;/p&gt;

&lt;h2&gt;想定される影響&lt;/h2&gt;

&lt;p&gt;遠隔の第三者により、復号に必要な鍵情報なしに暗号化メールから平文を取得される可能性があります。&lt;/p&gt;

&lt;h3&gt;影響を受ける製品&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;（複数のベンダ） / （複数の製品）&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;深刻度&lt;/h3&gt;

&lt;p&gt;CVSSv3 評価なし&lt;/p&gt;

&lt;h2&gt;対策&lt;/h2&gt;

&lt;p&gt;[ワークアラウンドを実施する] 次のワークアラウンドを実施することで、本脆弱性の影響を軽減することが可能です。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;メールクライアントとは別のアプリケーションを使って復号する&lt;/li&gt;
&lt;li&gt;メールクライアントの HTML レンダリングを無効化する&lt;/li&gt;
&lt;li&gt;メールクライアントのリモートコンテンツの読み込みを無効化する&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;関連情報&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Common Vulnerabilities and Exposures (CVE) &lt;a href=&#34;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-17688&#34;&gt;CVE-2017-17688&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Common Vulnerabilities and Exposures (CVE) &lt;a href=&#34;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-17689&#34;&gt;CVE-2017-17689&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;JVN &lt;a href=&#34;https://jvn.jp/vu/JVNVU95575473/&#34;&gt;JVNVU#95575473&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;US-CERT Vulnerability Note &lt;a href=&#34;https://www.kb.cert.org/vuls/id/122919&#34;&gt;VU#122919&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;関連文書 &lt;a href=&#34;https://efail.de/&#34;&gt;EFAIL&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;関連文書 &lt;a href=&#34;https://efail.de/efail-attack-paper.pdf&#34;&gt;Efail: Breaking S/MIME and OpenPGP Email Encryption using Exfiltration Channels (draft 0.9.0)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;(Powerd by &lt;a href=&#34;https://jvn.jp/&#34;&gt;JVN&lt;/a&gt; &amp;amp; &lt;a href=&#34;https://github.com/spiegel-im-spiegel/jvnman&#34; title=&#34;spiegel-im-spiegel/jvnman: JVN Vulnerability Data Management&#34;&gt;jvnman&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figcaption&gt;via &lt;q&gt;&lt;a href=&#34;https://jvndb.jvn.jp/ja/contents/2017/JVNDB-2017-012995.html&#34;&gt;JVNDB-2017-012995&lt;/a&gt;&lt;/q&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;影響を受ける製品については以下を参照のこと。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.kb.cert.org/vuls/id/122919&#34;&gt;Vulnerability Note VU#122919 - OpenPGP and S/MIME mail client vulnerabilities&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;つか，暗号化メッセージングに電子メールはもはや適切とは言えないので，この機会に他の手段も併せて考えておくべきだろう。&lt;/p&gt;

&lt;h2 id=&#34;toc_0&#34;&gt;その他ブックマーク&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.eff.org/deeplinks/2018/05/attention-pgp-users-new-vulnerabilities-require-you-take-action-now&#34;&gt;Attention PGP Users: New Vulnerabilities Require You To Take Action Now | Electronic Frontier Foundation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.schneier.com/blog/archives/2018/05/critical_pgp_vu.html&#34;&gt;Critical PGP Vulnerability - Schneier on Security&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://dot.kde.org/2018/05/15/efail-and-kmail&#34;&gt;EFAIL and KMail | KDE.news&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.jpcert.or.jp/at/2018/at180023.html&#34;&gt;メールクライアントにおける OpenPGP および S/MIME のメッセージの取り扱いに関する注意喚起&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://forest.watch.impress.co.jp/docs/news/1121880.html&#34;&gt;暗号化メールの内容が平文で漏洩する“EFAIL”脆弱性、欧州の研究者グループが発表 - 窓の杜&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://iphone-mania.jp/news-212434/&#34;&gt;【対策あり】iPhoneやMacのメールアプリに「eFail」と呼ばれる脆弱性 - iPhone Mania&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.technologyreview.jp/nl/an-e-fail-in-e-mail-could-let-hackers-read-your-encrypted-messages/&#34;&gt;MIT Tech Review: メールで使われる暗号化技術に脆弱性、内容読まれる恐れ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.itmedia.co.jp/enterprise/articles/1805/15/news062.html&#34;&gt;暗号化メールを平文で読まれる恐れ、「PGP」「S/MIME」に脆弱性 (1/2) - ITmedia エンタープライズ&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://news.mynavi.jp/article/20180522-633761/&#34;&gt;Thunderbird、アップデート推奨 - 暗号メールの脆弱性修正 | マイナビニュース&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://news.mynavi.jp/article/20180518-632038/&#34;&gt;Mozilla、Thunderbirdの暗号メールの脆弱性と対策について説明 | マイナビニュース&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://forest.watch.impress.co.jp/docs/news/1123137.html&#34;&gt;サイトー企画、“EFAIL”脆弱性への対策を行った「秀丸メール」v6.82を正式公開 - 窓の杜&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
</feed>
