<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Hugo 0.37.1" />
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" href="/css/local-font.css" type='text/css'>
<link rel='stylesheet' href='//fonts.googleapis.com/css?family=Noto+Serif%7cNoto+Sans%3a400,700%7cInconsolata%3a400,700' type='text/css'>
<link rel='stylesheet' href='//fonts.googleapis.com/earlyaccess/notosansjp.css' type='text/css'>
<link rel='stylesheet' href='http://www.baldanders.info/fonts/NotoSerifJP/NotoSerifJP.css' type='text/css'>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/cc-icons/1.2.1/css/cc-icons.min.css">
<link rel="stylesheet" href="/css/main.css" type='text/css'>
<link rel="stylesheet" href="/css/text-baldanders.css" type='text/css'>
<script defer src="https://use.fontawesome.com/releases/v5.0.1/js/all.js"></script>
<link rel="alternate" href="http://text.baldanders.info/index.xml" type="application/rss+xml" title="text.Baldanders.info">
<meta name="google-site-verification" content="jTjBCslPtf8gwVatiY-GDgGv7pV5csa8aUOw1MRPUD4">
<link rel="stylesheet" href="/css/addon.css">
<link rel="stylesheet" href="/css/chroma-styles.css">

<link rel="canonical" href="http://text.baldanders.info/golang/project-based-development/">
<title>gb でプロジェクト・ベースの開発環境をつくる — プログラミング言語 Go | text.Baldanders.info</title>
<meta property="og:title" content="gb でプロジェクト・ベースの開発環境をつくる — プログラミング言語 Go | text.Baldanders.info">
<meta name="description" content="今回は gb を使ってプロジェクト・ベースで Golang のコードを管理してみる。">
<meta property="og:description" content="今回は gb を使ってプロジェクト・ベースで Golang のコードを管理してみる。">
<meta property="og:image" content="http://text.baldanders.info/images/attention/go-code.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@spiegel_2007">
<meta name="twitter:creator" content="@spiegel_2007">
<meta name="author" content="Spiegel">
<meta name="keywords" content="golang, engineering, tools, gb, testing">
<link rel='prev' href='http://text.baldanders.info/golang/transform-character-encoding/' title='文字エンコーディング変換' />
<link rel='next' href='http://text.baldanders.info/golang/gopath-pollution/' title='GOPATH 汚染問題' />

<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "WebSite",
	"@id": "http://text.baldanders.info/",
	"inLanguage": "ja",
	"name": "text.Baldanders.info",
    "url": "http://text.baldanders.info/",
	"publisher": {
		"@id": "http://text.baldanders.info/#org"
	},
	"author": {
		"@id": "http://text.baldanders.info/#maker"
	},
	"image": "http://text.baldanders.info/images/avatar.jpg",
	"description": "帰ってきた「しっぽのさきっちょ」"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Organization",
	"@id": "http://text.baldanders.info/#org",
	"name": "text.Baldanders.info",
	"logo": {
		"@type": "ImageObject",
		"@id": "http://text.baldanders.info/#logo",
		"url": "http://text.baldanders.info/images/avatar.jpg"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Person",
	"@id": "http://text.baldanders.info/#maker",
	"name": "Spiegel",
	"url": "http://www.baldanders.info/spiegel/profile/",
	"image": "http://text.baldanders.info/images/avatar.jpg"
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "Blog",
	"@id": "http://text.baldanders.info/golang/",
	"url": "http://text.baldanders.info/golang/",
	"inLanguage": "ja",
	"name": "プログラミング言語 Go",
	"description": "Go 言語プログラミングに関する話題。",
	"image": "http://text.baldanders.info/images/attention/go-code.png",
	"publisher": {
		"@id": "http://text.baldanders.info/#org"
	},
	"author": {
		"@id": "http://text.baldanders.info/#maker"
	}
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BreadcrumbList",
	"@id": "http://text.baldanders.info/golang/project-based-development/#breadcrumb-list",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"item": {
				"@id": "http://text.baldanders.info/"
			}
		},
		{
			"@type": "ListItem",
			"position": 2,
			"item": {
				"@id": "http://text.baldanders.info/golang/"
			}
		}
	]
}
</script>
<script type="application/ld+json">
{
	"@context": "http://schema.org",
	"@type": "BlogPosting",
	"@id": "http://text.baldanders.info/golang/project-based-development/",
	"url": "http://text.baldanders.info/golang/project-based-development/",
	"mainEntityOfPage": "http://text.baldanders.info/golang/project-based-development/",
	"inLanguage": "ja",
	"name": "gb でプロジェクト・ベースの開発環境をつくる",
	"description": "今回は gb を使ってプロジェクト・ベースで Golang のコードを管理してみる。",
	"headline": "今回は gb を使ってプロジェクト・ベースで Golang のコードを管理してみる。",
	"keywords": "golang, engineering, tools, gb, testing",
	"image": "http://text.baldanders.info/images/attention/go-code.png",
	"datePublished": "2015-09-28T20:38:45+09:00",
	"dateModified": "2017-10-11T10:52:03+09:00",
	"publisher": {
		"@id": "http://text.baldanders.info/#org"
	},
	"author": {
		"@type": "Person",
		"@id": "http://text.baldanders.info/golang/project-based-development/#maker",
		"name": "Spiegel",
		"url": "http://www.baldanders.info/spiegel/profile/",
		"image": "http://text.baldanders.info/images/avatar.jpg"
	},
	"license": "http://creativecommons.org/licenses/by-sa/4.0/"
}
</script>
</head>
<body>

<div id='container'>

<main>
<nav class="breadcrumb">
<a href="http://text.baldanders.info/">text.Baldanders.info</a> &raquo; <a href="http://text.baldanders.info/golang/">プログラミング言語 Go</a>
</nav>
<article>
<h1>gb でプロジェクト・ベースの開発環境をつくる</h1>
<nav class="tags">
<div><a href="/tags">Tags</a>: #<a href="/tags/engineering">engineering</a> #<a href="/tags/gb">gb</a> #<a href="/tags/golang">golang</a> #<a href="/tags/testing">testing</a> #<a href="/tags/tools">tools</a></div>
<div><a href="https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io/commits/master/golang/project-based-development/index.html">History</a></div>
</nav>

<section>


<p>（初出： <a href="http://qiita.com/spiegel-im-spiegel/items/ef15a48542e043b32c99">はじめての Go 言語 (on Windows) その9 - Qiita</a>）</p>

<p>今回は <a href="http://getgb.io/" title="gb - A project based build tool for Go">gb</a> を使ってプロジェクト・ベースで Golang のコードを管理してみる。</p>

<ul>
<li><a href="http://getgb.io/">gb - A project based build tool for Go</a></li>
</ul>

<h2 id="gb-の導入">gb の導入</h2>

<p><a href="http://getgb.io/" title="gb - A project based build tool for Go">gb</a> の導入は <code>go get</code> でできる<sup class="footnote-ref" id="fnref:b"><a href="#fn:b">1</a></sup>。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:&gt;go get -v github.com/constabulary/gb/...
github.com/constabulary/gb (download)
github.com/constabulary/gb/log
github.com/constabulary/gb
github.com/constabulary/gb/vendor
github.com/constabulary/gb/cmd
github.com/constabulary/gb/cmd/gb
github.com/constabulary/gb/cmd/gb-vendor</code></pre></div>
<p>Windows の場合，環境変数 <code>GOPATH</code> で指定するフォルダ配下の <code>bin</code> フォルダに <code>gb.exe</code> および <code>gb-vendor.exe</code> が生成される。
このフォルダにパスを通しておく（またはパスの通っているフォルダに実行ファイルをコピーする）。</p>

<h2 id="プロジェクトの構築とビルド">プロジェクトの構築とビルド</h2>

<p>「<a href="/golang/packaging/">機能のパッケージ化</a>」で最後に作ったコードを使って実際に <a href="http://getgb.io/" title="gb - A project based build tool for Go">gb</a> でプロジェクトを作成しビルドを行ってみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;flag&#34;</span>
    <span class="s">&#34;fmt&#34;</span>
    <span class="s">&#34;os&#34;</span>
    <span class="s">&#34;strconv&#34;</span>
    <span class="s">&#34;time&#34;</span>

    <span class="s">&#34;github.com/spiegel-im-spiegel/astrocalc/modjulian&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//引数のチェック
</span><span class="c1"></span>    <span class="nx">flag</span><span class="p">.</span><span class="nx">Parse</span><span class="p">()</span>
    <span class="nx">argsStr</span> <span class="o">:=</span> <span class="nx">flag</span><span class="p">.</span><span class="nx">Args</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">argsStr</span><span class="p">)</span> <span class="p">&lt;</span> <span class="mi">3</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintln</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span> <span class="s">&#34;年月日を指定してください&#34;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="nx">args</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">num</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nx">Atoi</span><span class="p">(</span><span class="nx">argsStr</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
            <span class="nx">fmt</span><span class="p">.</span><span class="nx">Fprintln</span><span class="p">(</span><span class="nx">os</span><span class="p">.</span><span class="nx">Stderr</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">=</span> <span class="nx">num</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">tm</span> <span class="o">:=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Date</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Month</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nx">args</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nx">UTC</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span> <span class="nx">tm</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&#34;MJD = %d日\n&#34;</span><span class="p">,</span> <span class="nx">modjulian</span><span class="p">.</span><span class="nx">DayNumber</span><span class="p">(</span><span class="nx">tm</span><span class="p">))</span>
<span class="p">}</span></code></pre></div>
<h3 id="ソース-ファイルの配置">ソース・ファイルの配置</h3>

<p>プロジェクト・フォルダを <code>C:\workspace\gbdemo</code> とし，ソース・ファイル用のフォルダ <code>src\julian-day</code> を作成する。
このフォルダに上述のコードを記述したソース・ファイルを配置する。
フォルダ構成は以下の通り。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;tree /f .
C:\WORKSPACE\GBDEMO
└─src
    └─julian-day
            julian-day.go</code></pre></div>
<p>ビルドするには <code>gb build</code> コマンドを実行すればいいのだが，このままでは <code>modjulian</code> パッケージがないため失敗する。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text"><span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">workspace</span><span class="err">\</span><span class="nx">gbdemo</span><span class="p">&gt;</span><span class="nx">gb</span> <span class="nx">build</span>
<span class="nx">FATAL</span> <span class="nx">command</span> <span class="s">&#34;build&#34;</span> <span class="nx">failed</span><span class="p">:</span> <span class="nx">failed</span> <span class="nx">to</span> <span class="nx">resolve</span> <span class="kn">import</span> <span class="nx">path</span> <span class="s">&#34;julian-day&#34;</span><span class="p">:</span> <span class="nx">cannot</span> <span class="nx">find</span> <span class="kn">package</span> <span class="s">&#34;github.com/spiegel-im-spiegel/astrocalc/modjulian&#34;</span> <span class="nx">in</span> <span class="nx">any</span> <span class="nx">of</span><span class="p">:</span>
        <span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">Go</span><span class="err">\</span><span class="nx">src</span><span class="err">\</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="err">\</span><span class="nx">spiegel</span><span class="o">-</span><span class="nx">im</span><span class="o">-</span><span class="nx">spiegel</span><span class="err">\</span><span class="nx">astrocalc</span><span class="err">\</span><span class="nx">modjulian</span> <span class="p">(</span><span class="nx">from</span> <span class="err">$</span><span class="nx">GOROOT</span><span class="p">)</span>
        <span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">workspace</span><span class="err">\</span><span class="nx">gbdemo</span><span class="err">\</span><span class="nx">src</span><span class="err">\</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="err">\</span><span class="nx">spiegel</span><span class="o">-</span><span class="nx">im</span><span class="o">-</span><span class="nx">spiegel</span><span class="err">\</span><span class="nx">astrocalc</span><span class="err">\</span><span class="nx">modjulian</span> <span class="p">(</span><span class="nx">from</span> <span class="err">$</span><span class="nx">GOPATH</span><span class="p">)</span>
        <span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">workspace</span><span class="err">\</span><span class="nx">gbdemo</span><span class="err">\</span><span class="nx">vendor</span><span class="err">\</span><span class="nx">src</span><span class="err">\</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="err">\</span><span class="nx">spiegel</span><span class="o">-</span><span class="nx">im</span><span class="o">-</span><span class="nx">spiegel</span><span class="err">\</span><span class="nx">astrocalc</span><span class="err">\</span><span class="nx">modjulian</span></code></pre></div>
<p>プロジェクト・フォルダ以下を <code>GOPATH</code> として <code>modjulian</code> パッケージを探しているのがお分かりだろうか。
<a href="http://getgb.io/" title="gb - A project based build tool for Go">gb</a> では，実行時に既存の <code>GOPATH</code> を上書きするようである。
またプロジェクト・フォルダ配下の <code>vendor</code> フォルダを探しているのにも注目してほしい。</p>

<h3 id="外部パッケージの導入">外部パッケージの導入</h3>

<p><a href="http://getgb.io/" title="gb - A project based build tool for Go">gb</a> では外部パッケージを <code>gb vendor</code> コマンドで管理できる。
外部パッケージの導入には <code>gb vendor fetch</code> コマンドを使う。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb vendor fetch github.com/spiegel-im-spiegel/astrocalc/modjulian

C:\workspace\gbdemo&gt;tree /f .
C:\WORKSPACE\GBDEMO
├─src
│  └─julian-day
│          julian-day.go
│
└─vendor
    │  manifest
    │
    └─src
        └─github.com
            └─spiegel-im-spiegel
                └─astrocalc
                    └─modjulian
                            example_test.go
                            LICENSE
                            modjulian.go
                            modjulian_test.go</code></pre></div>
<p>プロジェクト・フォルダ以下に <code>vendor</code> フォルダが作成され，パッケージのソースファイルが展開されている。</p>

<p>今回 <code>gb vendor fetch</code> で取得したパッケージは <a href="https://github.com/" title="GitHub">GitHub</a> のリポジトリから取ってきたものだが， <code>git clone</code> ではなく，フォルダ・ファイル構成ごとコピーしてきたもののようである。</p>

<p><code>gb vendor fetch</code> コマンドでは <code>-branch</code> や <code>-tag</code> や <code>-revision</code> オプションでリポジトリのブランチやタグまたはリビジョンを指定できる。
このとき，導入したパッケージのリポジトリ情報は <code>vender\manifest</code> ファイルに格納されている（中身は JSON 形式）。</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&#34;dependencies&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;importpath&#34;</span><span class="p">:</span> <span class="s2">&#34;github.com/spiegel-im-spiegel/astrocalc/modjulian&#34;</span><span class="p">,</span>
            <span class="nt">&#34;repository&#34;</span><span class="p">:</span> <span class="s2">&#34;https://github.com/spiegel-im-spiegel/astrocalc&#34;</span><span class="p">,</span>
            <span class="nt">&#34;revision&#34;</span><span class="p">:</span> <span class="s2">&#34;c9f5fb495e67b868a2b3f0e16c38282095fe5033&#34;</span><span class="p">,</span>
            <span class="nt">&#34;branch&#34;</span><span class="p">:</span> <span class="s2">&#34;master&#34;</span><span class="p">,</span>
            <span class="nt">&#34;path&#34;</span><span class="p">:</span> <span class="s2">&#34;/modjulian&#34;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span></code></pre></div>
<p>ちなみに外部パッケージをアップデートする場合は <code>gb vendor update</code> コマンドを使う。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb vendor update github.com/spiegel-im-spiegel/astrocalc/modjulian</code></pre></div>
<p>または</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb vendor update -all</code></pre></div>
<h3 id="プロジェクトのビルド">プロジェクトのビルド</h3>

<p>では，この状態でもう一回ビルドしてみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb build
julian-day

C:\workspace\gbdemo&gt;tree /f .
C:\WORKSPACE\GBDEMO
├─bin
│      julian-day.exe
│
├─pkg
│  └─windows-amd64
│      │  julian-day.a
│      │
│      └─github.com
│          └─spiegel-im-spiegel
│              └─astrocalc
│                      modjulian.a
│
├─src
│  └─julian-day
│          julian-day.go
│
└─vendor
    │  manifest
    │
    └─src
        └─github.com
            └─spiegel-im-spiegel
                └─astrocalc
                    └─modjulian
                            example_test.go
                            LICENSE
                            modjulian.go
                            modjulian_test.go

C:\workspace\gbdemo&gt;bin\julian-day.exe 2015 1 1
2015-01-01 00:00:00 +0000 UTC
MJD = 57023日</code></pre></div>
<p>今度は上手くいったようだ。
<code>gb build</code> コマンドのオプションは以下の通り。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb help build
usage: gb build [build flags] [packages]

Build compiles the packages named by the import paths, along with their
dependencies.

Flags:

        -f
                ignore cached packages if present, new packages built will overwrite
                any cached packages. This effectively disables incremental
                compilation.
        -F
                do not cache packages, cached packages will still be used for
                incremental compilation. -f -F is advised to disable the package

                caching system.
        -q
                decreases verbosity, effectively raising the output level to ERROR.
                In a successful build, no output will be displayed.
        -P
                The number of build jobs to run in parallel, including test execution.
                By default this is the number of CPUs visible to gb.
        -R
                sets the base of the project root search path from the current working
                directory to the value supplied. Effectively gb changes working
                directory to this path before searching for the project root.
        -v
                increases verbosity, effectively lowering the output level from INFO
                to DEBUG.
        -dotfile
                if provided, gb will output a dot formatted file of the build steps to
                be performed.
        -ldflags &#39;flag list&#39;
                arguments to pass on each linker invocation.
        -gcflags &#39;arg list&#39;
                arguments to pass on each compile invocation.
        -tags &#39;tag list&#39;
                additional build tags.

The list flags accept a space-separated list of strings. To embed spaces in an
element in the list, surround it with either single or double quotes.

For more about specifying packages, see &#39;gb help packages&#39;. For more about
where packages and binaries are installed, run &#39;gb help project&#39;.</code></pre></div>
<p><code>-ldflags</code> や <code>-gcflags</code> オプションが使えるのはありがたいかな。</p>

<h2 id="複数パッケージを含めたプロジェクト管理">複数パッケージを含めたプロジェクト管理</h2>

<p>複数のパッケージをまとめて管理したい場合もある。
例えば以下のような構成を考えてみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;tree /f .
C:\WORKSPACE\GBDEMO
└─src
    └─julian-day
            julian-day.go

C:\workspace\gbdemo&gt;pushd src

C:\workspace\gbdemo\src&gt;git clone https://github.com/spiegel-im-spiegel/astrocalc.git github.com/spiegel-im-spiegel/astrocalc
Cloning into &#39;github.com/spiegel-im-spiegel/astrocalc&#39;...
remote: Counting objects: 43, done.
remote: Total 43 (delta 0), reused 0 (delta 0), pack-reused 43
Unpacking objects: 100% (43/43), done.
Checking connectivity... done.

C:\workspace\gbdemo\src&gt;popd

C:\workspace\gbdemo&gt;tree /f .
C:\WORKSPACE\GBDEMO
└─src
    ├─github.com
    │  └─spiegel-im-spiegel
    │      └─astrocalc
    │          │  .editorconfig
    │          │  .gitignore
    │          │  .travis.yml
    │          │  LICENSE
    │          │  README.md
    │          │
    │          └─modjulian
    │                  example_test.go
    │                  LICENSE
    │                  modjulian.go
    │                  modjulian_test.go
    │
    └─julian-day
            julian-day.go</code></pre></div>
<p>この状態でビルドを実行してみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb build
github.com/spiegel-im-spiegel/astrocalc/modjulian
julian-day

C:\workspace\gbdemo&gt;tree /f .
C:\WORKSPACE\GBDEMO
├─bin
│      julian-day.exe
│
├─pkg
│  └─windows-amd64
│      │  julian-day.a
│      │
│      └─github.com
│          └─spiegel-im-spiegel
│              └─astrocalc
│                      modjulian.a
│
└─src
    ├─github.com
    │  └─spiegel-im-spiegel
    │      └─astrocalc
    │          │  .editorconfig
    │          │  .gitignore
    │          │  .travis.yml
    │          │  LICENSE
    │          │  README.md
    │          │
    │          └─modjulian
    │                  example_test.go
    │                  LICENSE
    │                  modjulian.go
    │                  modjulian_test.go
    │
    └─julian-day
            julian-day.go

C:\workspace\gbdemo&gt;bin\julian-day.exe 2015 1 1
2015-01-01 00:00:00 +0000 UTC
MJD = 57023日</code></pre></div>
<p><a href="http://getgb.io/" title="gb - A project based build tool for Go">gb</a> ではプロジェクト・フォルダ以下にあるパッケージを自動で検索してビルドしてくれる。
もちろんパッケージを指定してビルドすることも可能。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb build github.com/spiegel-im-spiegel/astrocalc/modjulian
github.com/spiegel-im-spiegel/astrocalc/modjulian

C:\workspace\gbdemo&gt;gb build julian-day
julian-day</code></pre></div>
<p>さらにテストもできる<sup class="footnote-ref" id="fnref:a"><a href="#fn:a">2</a></sup>。</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">C:\workspace\gbdemo&gt;gb test -v github.com/spiegel-im-spiegel/astrocalc/modjulian
=== RUN   TestDayNumber
--- PASS: TestDayNumber (0.00s)
=== RUN   ExampleDayNumber
--- PASS: ExampleDayNumber (0.00s)                  
PASS</code></pre></div>
<p>パッケージによっては <code>go test</code> の結果と <code>gb test</code> の結果が異なる場合があるので注意が必要。</p>

<h2 id="ブックマーク">ブックマーク</h2>

<ul>
<li><a href="http://qiita.com/shinofara/items/ac0591fef95c2c6e936e">golang - gbを知ったのでgojiを使ったWEBアプリケーションプロジェクトを管理してみた - Qiita</a></li>
<li><a href="http://deeeet.com/writing/2015/06/26/golang-dependency-vendoring/">Go言語のDependency/Vendoringの問題と今後．gbあるいはGo1.5 | SOTA</a></li>
</ul>

<p><a href="http://text.baldanders.info/golang/bookmark/">Go 言語に関するブックマーク集はこちら</a>。</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:b">コマンド <code>go get</code> の使い方については「<a href="/golang/go-get-package/">go get コマンドでパッケージを管理する</a>」を参照のこと。
 <a class="footnote-return" href="#fnref:b"><sup>[return]</sup></a></li>
<li id="fn:a">テストについては「<a href="/golang/testing/">Go 言語のテスト・フレームワーク</a>」を参照のこと。
 <a class="footnote-return" href="#fnref:a"><sup>[return]</sup></a></li>
</ol>
</div>

</section>

</article>
</main>
<nav class="page-nav">
<div class="prev-page">&laquo; <a href="/golang/transform-character-encoding/">文字エンコーディング変換</a></div>
<div class="next-page"><a href="/golang/gopath-pollution/">GOPATH 汚染問題</a> &raquo;</div>
</nav>

<aside id='tech-terms'>
<style>
#tech-terms h1 {
  border: solid thin gray;
  margin: 0 0 1rem 0;
  padding: 0 0.5rem 2px 2px;
}
</style>
<h1>Technical Terms</h1>
<div class="cloud" style="font-size:smaller;">
<script src="http://e-words.jp/embed.x?e=utf8"></script>
<p class="right">Powered by <a href="http://e-words.jp/p/s-embed.html">e-Words</a></p>
</div>
</aside>
<aside id='feedback'>
<style>
#feedback h1 {
  border: solid thin gray;
  margin: 0 0 1rem 0;
  padding: 0 0.5rem 2px 2px;
}
</style>
<h1>Feedback</h1>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "textbaldandersinfo" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>
<footer>

	<div class="userinfo">
		<div class="userinfo-avater">
			
				<a href="http://www.baldanders.info/spiegel/profile/"><img src="/images/avatar.jpg" width="48" height="48" alt="avatar"></a>
			
		</div>
		<div class="userinfo-info" id="maker">
			
				Written by <a href="http://www.baldanders.info/spiegel/profile/" rel="cc:attributionURL" property="cc:attributionName">Spiegel</a> in <time property='dc:dateCopyrighted'>2015-09-28</time> (revised in <time property='dc:modified'>2017-10-11</time>).
				
	<a rel='cc:license' href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><i class="cc cc-cc"></i>&nbsp;<i class="cc cc-by"></i>&nbsp;<i class="cc cc-sa"></i></a>

			
			
	<ul class="social">
		<li><a href="https://github.com/spiegel-im-spiegel" target="_blank"><i class="fab fa-github"></i></a></li>
		<li><a href="https://twitter.com/spiegel_2007" target="_blank"><i class="fab fa-twitter"></i></a></li>
		<li><a href="https://medium.com/@spiegel" target="_blank"><i class="fab fa-medium"></i></a></li>
		
		<li><a href="http://instagram.com/spiegel_2007" target="_blank"><i class="fab fa-instagram"></i></a></li>
		
		<li><a href="https://www.facebook.com/spiegel.im.spiegel" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
		<li><a href="https://jp.linkedin.com/in/spiegelimspiegel" target="_blank"><i class="fab fa-linkedin-in"></i></a></li>
		
	</ul>
	<ul class="social">
		<li><a href="http://www.facebook.com/share.php?u=http%3a%2f%2ftext.baldanders.info%2fgolang%2fproject-based-development%2f" target="_blank"><i class="fab fa-facebook-square fa-2x" aria-hidden="true"></i></a></li>
		<li><a href="http://twitter.com/share?text=gb%20%e3%81%a7%e3%83%97%e3%83%ad%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88%e3%83%bb%e3%83%99%e3%83%bc%e3%82%b9%e3%81%ae%e9%96%8b%e7%99%ba%e7%92%b0%e5%a2%83%e3%82%92%e3%81%a4%e3%81%8f%e3%82%8b+from+@spiegel_2007&amp;url=http%3a%2f%2ftext.baldanders.info%2fgolang%2fproject-based-development%2f" target="_blank"><i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i></a></li>
		<li><a href="https://flattr.com/submit/auto?user_id=spiegel&amp;url=http%3a%2f%2ftext.baldanders.info%2fgolang%2fproject-based-development%2f&amp;title=gb%20%e3%81%a7%e3%83%97%e3%83%ad%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88%e3%83%bb%e3%83%99%e3%83%bc%e3%82%b9%e3%81%ae%e9%96%8b%e7%99%ba%e7%92%b0%e5%a2%83%e3%82%92%e3%81%a4%e3%81%8f%e3%82%8b" target="_blank"><img src="//button.flattr.com/flattr-badge-large.png" alt="Flattr this" title="Flattr this"></a></li>
	</ul>

		</div>
	</div>

<nav>
<ul class='cloud center'>
<li><a href='https://github.com/spiegel-im-spiegel/spiegel-im-spiegel.github.io'>Repository</a></li>
<li><a href='/reviews/'>Reviews</a></li>
<li><a href='/about-feeds/'>Feeds</a></li>
<li><a href='/site-policy/'>Site Policy</a></li>
<li><a href='https://validator.w3.org/nu/?doc=http%3a%2f%2ftext.baldanders.info%2fgolang%2fproject-based-development%2f&amp;showoutline=yes'>Debug</a></li>
</ul>
<ul class='cloud center'>
<li><a href='http://www.baldanders.info/'>Baldanders.info</a></li>
<li><a href='https://scrapbox.io/spiegel-branch/'>Scrapbox</a></li>
<li><a href='http://qiita.com/spiegel-im-spiegel'>Qiita</a></li>
</ul>
<ul class='cloud center'>
<li>Powered by <a href='https://gohugo.io/'>Hugo 0.37.1</a> and <a href="https://github.com/spiegel-im-spiegel/hugo-theme-text">Text</a>.</li>
</ul>
</nav>
</footer>
</div>


</body>
</html>
